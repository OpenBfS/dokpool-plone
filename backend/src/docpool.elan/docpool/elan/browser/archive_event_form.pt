<html lang="en"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      i18n:domain="docpool.elan"
      xml:lang="en"
      metal:use-macro="context/@@main_template/macros/master"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n">
<body>

<metal:content-core fill-slot="main">
<metal:content-core define-macro="main">
<tal:def tal:define="items python: view.items;">

      <form method="post"
            id="archive_event_form"
            name="archive_event_form"
            action="#"
            tal:attributes="action request/URL">

        <input type="hidden" name="form.uid" tal:attributes="value python: view.uid" />

        <tal:archive tal:condition="python: view.__name__=='archiveAndClose'">
            <h1 i18n:translate="">Archive Event</h1>
            <p i18n:translate="">Here you can archive the event "${python: context.title}" with ${python: len(items)} documents.</p>
            <p i18n:translate="">The following happens when archiving:</p>
            <ul>
                <li i18n:translate="">All content for this event is saved in an archive.</li>
                <li i18n:translate="">Deletes the original content.</li>
                <li i18n:translate="">Sets the event to state "closed".</li>
                <li i18n:translate="">Content that is assigned to more than this event is copied into the archive instead of moved.</li>
            </ul>
        </tal:archive>

        <tal:snapshot tal:condition="python: view.__name__=='snapshot'">
            <h1 i18n:translate="">Snapshot Event</h1>
            <p>Here you can create a snapshot of the event <em>${python: context.title}</em> with ${python: len(items)} documents.</p>
            <p i18n:translate="">The following happens when creating a snapshot:</p>
            <ul>
                <li i18n:translate="">The event stays active but documents are moved to an archive.</li>
                <li i18n:translate="">Copy Journals and Event to Archive.</li>
                <li i18n:translate="">Purge Journals.</li>
                <li i18n:translate="">Content that is assigned to more than this event is copied into the archive instead of moved.</li>
            </ul>
        </tal:snapshot>

        <p i18n:translate="">Depending on the number of documents in this event this can take up to an hour.
            Important: After XX minutes you may see a error-message "Guru-Meditation".
            This does not mean that the process failed but that a timeout has happened.
            Please keep waiting a couple of minuted and open this page again.
            You will see if the process has finished or is still runnning.
        </p>

        <p class="d-inline-flex gap-1">
            <a class="btn btn-secondary" data-bs-toggle="collapse" href="#collapseDocuments" role="button" aria-expanded="false" aria-controls="collapseDocuments">
                Show/Hide ${python: len(items)} Documents
            </a>
        </p>
        <div class="collapse" id="collapseDocuments">
            <ol>
                <li tal:repeat="brain python: items">
                    <a href=""
                       tal:attributes="href python:brain.getURL()">
                        <span tal:replace="python: brain.Title" />
                    </a>
                </li>
            </ol>
        </div>

        <div class="formControls" i18n:domain="plone">
          <input type="submit" class="input-sichern context btn btn-primary" name="form.button.submit" value="Apply" i18n:attributes="value label_apply;title"/>
          <input type="submit" class="input-abbrechen btn btn-secondary" value="Cancel" name="form.button.cancel" i18n:attributes="value;title"/>
        </div>
      </form>
</tal:def>
</metal:content-core>
</metal:content-core>

</body>
</html>
