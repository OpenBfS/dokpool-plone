<html xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      i18n:domain="docpool.elan"
>
  <body>

    <div class="cat_filter"
         metal:define-macro="cat_filter"
         tal:define="
           selected_categories python:view.selected_categories();
         "
    >
      <form class="category_selection"
            method="post"
            name="categories"
            tal:attributes="
              action string:selectCategories;
            "
      >
        <div class="multiselection">
          <select id="cat_select"
                  multiple="multiple"
                  name="cats:list"
                  size="5"
          >
            <tal:loop tal:repeat="category python:view.available_categories()">
              <option tal:content="python: category"
                      tal:attributes="
                        selected python:'selected' if category in selected_categories else None;
                      "
              >Category
              </option>
            </tal:loop>
          </select>
        </div>
        <input class="context btn btn-primary"
               name="form.button.Save"
               type="submit"
               value="Filter"
               i18n:attributes="value"
        />
        <input class="context btn btn-primary"
               id="reset_filter"
               name="form.button.Save"
               type="submit"
               value="All"
               i18n:attributes="value"
        />
      </form>
      <div class="cat_info">
        <span><i18n:text translate="">Current filter:</i18n:text>
          <tal:var replace="python:', '.join(selected_categories)" /></span>
      </div>
    </div>

    <metal:macro define-macro="elan_actions"
                 i18n:domain="docpool.elan"
    >
      <tal:cond define="
                  _is nocall:context/@@is;
                "
                condition="python: not (isCollection or _is.archive())"
      >
        <a href=""
           title="Edit unknown scenario"
           tal:define="
             unknown_scen python:elanobj.unknownScenario();
           "
           tal:condition="nocall:unknown_scen"
           tal:attributes="
             href unknown_scen/absolute_url;
           "
           i18n:attributes="title"
        >
          <img src=""
               tal:attributes="
                 src string:${context/portal_url}/publish.png;
               "
          />
        </a>
      </tal:cond>
    </metal:macro>

    <metal:macro define-macro="elan_meta"
                 i18n:domain="docpool.elan"
    >

      <dl class="doc_metadata">
        <tal:scns define="
                    scns elanobj/getScenarioNames|nothing;
                  "
                  condition="scns"
        >
          <dt i18n:translate="">Belongs to scenario:</dt>
          <dd tal:content="python:', '.join(scns)"></dd>
        </tal:scns>
        <tal:cat define="
                   cat elanobj/category;
                 "
                 condition="cat"
        >
          <dt i18n:translate="">Content from:</dt>
          <dd>${item_type} ${python:elanobj.cat_convert()}</dd>
        </tal:cat>
      </dl>
    </metal:macro>


  </body>
</html>
