/*! For license information please see 1.bundle.144fc75.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{10:function(t,e,i){var s,n;s=[i(0),i(39),i(41),i(80),i(8),i(170),i(43),i(42),i(81)],void 0===(n=function(t,e,i,s,n,o,a,r){"use strict";return i.extend({name:"plone-modal",trigger:".pat-plone-modal",parser:"mockup",createModal:null,$model:null,defaults:{width:"",height:"",margin:20,position:"center middle",triggers:[],zIndexSelector:".plone-modal-wrapper,.plone-modal-backdrop",backdrop:"body",backdropOptions:{zIndex:"1040",opacity:"0.85",className:"plone-modal-backdrop",classActiveName:"plone-backdrop-active",closeOnEsc:!0,closeOnClick:!0},title:null,titleSelector:"h1:first",buttons:'.formControls > input[type="submit"]',content:"#content",automaticallyAddButtonActions:!0,loadLinksWithinModal:!0,prependContent:".portalMessage",templateOptions:{className:"plone-modal fade",classDialog:"plone-modal-dialog",classModal:"plone-modal-content",classHeaderName:"plone-modal-header",classBodyName:"plone-modal-body",classFooterName:"plone-modal-footer",classWrapperName:"plone-modal-wrapper",classWrapperInnerName:"modal-wrapper-inner",classActiveName:"in",classPrependName:"",classContentName:"",template:'<div class="<%= options.className %>">  <div class="<%= options.classDialog %>">    <div class="<%= options.classModal %>">      <div class="<%= options.classHeaderName %>">        <a class="plone-modal-close">&times;</a>        <% if (title) { %><h2 class="plone-modal-title"><%= title %></h2><% } %>      </div>      <div class="<%= options.classBodyName %>">        <div class="<%= options.classPrependName %>"><%= prepend %></div>         <div class="<%= options.classContentName %>"><%= content %></div>      </div>      <div class="<%= options.classFooterName %>">         <% if (buttons) { %><%= buttons %><% } %>      </div>    </div>  </div></div>'},actions:{},actionOptions:{eventType:"click",disableAjaxFormSubmit:!1,target:null,ajaxUrl:null,modalFunction:null,isForm:!1,timeout:5e3,displayInModal:!0,reloadWindowOnClose:!0,error:".portalMessage.error",formFieldError:".field.error",onSuccess:null,onError:null,onFormError:null,onTimeout:null,redirectOnResponse:!1,redirectToUrl:function(t,e,i){var s;return(s=/<body.*data-view-url=[\"'](.*)[\"'].*/im.exec(e))&&s.length>1||(s=/<body.*data-base-url=[\"'](.*)[\"'].*/im.exec(e))&&s.length>1?s[1].split('"')[0]:(s=/<base.*href=[\"'](.*)[\"'].*/im.exec(e))&&s.length>1?s[1]:""}},routerOptions:{id:null,pathExp:null},form:function(i){var s=this,n=s.$modal;s.options.automaticallyAddButtonActions&&(i[s.options.buttons]={}),i.a={},t.each(i,(function(i,o){var a=e.union(e.keys(s.options.actionOptions),["templateOptions"]),r=t.extend(!0,{},s.options.actionOptions,e.pick(o,a));o.templateOptions=t.extend(!0,o.templateOptions,s.options.templateOptions);var l=e.union(e.keys(s.options.actionOptions),["actions","actionOptions"]),c=t.extend(!0,e.omit(o,l),s.options);t(i,t("."+o.templateOptions.classBodyName,n)).each((function(e){var i=t(this);i.on(r.eventType,(function(e){e.stopPropagation(),e.preventDefault(),s.loading.show(!1),null!==r.modalFunction?s[r.modalFunction]():t.nodeName(i[0],"input")||t.nodeName(i[0],"button")||!0===o.isForm?s.options.handleFormAction.apply(s,[i,r,c]):(null!==o.ajaxUrl||t.nodeName(i[0],"a"))&&s.options.handleLinkAction.apply(s,[i,r,c])}))}))}))},handleFormAction:function(e,i,s){var n,o,a=this,r={};if(r[e.attr("name")]=e.attr("value"),n=t.nodeName(e[0],"form")?e:e.parents("form:not(.disableAutoSubmit)"),o=null!==i.ajaxUrl?"function"==typeof i.ajaxUrl?i.ajaxUrl.apply(a,[e,i]):i.ajaxUrl:e.parents("form").attr("action"),i.disableAjaxFormSubmit)return e.attr("name")&&e.attr("value")&&n.append(t('<input type="hidden" name="'+e.attr("name")+'" value="'+e.attr("value")+'" />')),void n.trigger("submit");n.on("submit",(function(t){t.preventDefault()})),n.trigger("submit"),a.loading.show(!1),n.ajaxSubmit({timeout:i.timeout,data:r,url:o,error:function(t,e,s){a.loading.hide(),"timeout"===e&&i.onTimeout?i.onTimeout.apply(a,t,s):i.onError?i.onError(t,e,s):console.log("error happened do something"),a.emit("formActionError",[t,e,s])},success:function(n,o,r,l){a.loading.hide(),0===t(i.error,n).size()&&0===t(i.formFieldError,n).size()?!0!==i.redirectOnResponse?(i.onSuccess&&i.onSuccess(a,n,o,r,l),!0===i.displayInModal?a.redraw(n,s):(e.trigger("destroy.plone-modal.patterns"),i.reloadWindowOnClose&&a.reloadWindow()),a.emit("formActionSuccess",[n,o,r,l])):"function"==typeof i.redirectToUrl?window.parent.location.href=i.redirectToUrl.apply(a,[e,n,i]):window.parent.location.href=i.redirectToUrl:i.onFormError?i.onFormError(a,n,o,r,l):a.redraw(n,s)}})},handleLinkAction:function(e,i,s){var n,o=this;n=i.ajaxUrl?"function"==typeof i.ajaxUrl?i.ajaxUrl.apply(o,[e,i]):i.ajaxUrl:e.attr("href"),!1!==i.displayInModal?t.ajax({url:n}).fail((function(t,e,s){"timeout"===e&&i.onTimeout?i.onTimeout(o.$modal,t,s):i.onError?i.onError(t,e,s):window.alert(r("There was an error loading modal.")),o.emit("linkActionError",[t,e,s])})).done((function(t,e,n){o.redraw(t,s),i.onSuccess&&i.onSuccess(o,t,e,n),o.emit("linkActionSuccess",[t,e,n])})).always((function(){o.loading.hide()})):"_blank"===e.attr("target")?(window.open(n,"_blank"),o.loading.hide()):window.location=n},render:function(i){var s=this;if(s.emit("before-render"),s.$raw){var n=s.$raw.clone();t("input:checked",n).each((function(){this.setAttribute&&this.setAttribute("checked","checked")}));var o={title:"",prepend:"<div />",content:"",buttons:'<div class="pattern-modal-buttons"></div>',options:i.templateOptions};if(null===i.title){var a=t(i.titleSelector,n);o.title=a.html(),t(i.titleSelector,n).remove()}else o.title=i.title;i.prependContent&&(o.prepend=t("<div />").append(t(i.prependContent,n).clone()).html(),t(i.prependContent,n).remove()),i.content?o.content=t(i.content,n).html():o.content=n.html(),s.$modal=t(e.template(s.options.templateOptions.template)(o)),s.$modalDialog=t("> ."+s.options.templateOptions.classDialog,s.$modal),s.$modalContent=t("> ."+s.options.templateOptions.classModal,s.$modalDialog),t("form",s.$modal).on("keydown",(function(e){13===e.keyCode&&"TEXTAREA"!==e.target.nodeName&&(e.preventDefault(),t("input[type=submit], button[type=submit], button:not(type)",this).eq(0).trigger("click"))})),t(i.buttons,s.$modal).each((function(){var e=t(this);e.on("click",(function(t){t.stopPropagation(),t.preventDefault()})).clone().appendTo(t(".pattern-modal-buttons",s.$modal)).off("click").on("click",(function(t){t.stopPropagation(),t.preventDefault(),e.trigger("click")})),e.hide()})),s.emit("before-events-setup"),t(".plone-modal-header > a.plone-modal-close, .plone-modal-footer > a.plone-modal-close",s.$modal).off("click").on("click",(function(e){e.stopPropagation(),e.preventDefault(),t(e.target).trigger("destroy.plone-modal.patterns")})),i.form&&i.form.apply(s,[i.actions]),s.$modal.addClass(s.options.templateOptions.className).on("destroy.plone-modal.patterns",(function(t){t.stopPropagation(),s.hide()})).on("resize.plone-modal.patterns",(function(t){t.stopPropagation(),t.preventDefault(),s.positionModal()})).appendTo(s.$wrapperInner),s.options.loadLinksWithinModal&&s.$modal.on("click",(function(e){e.stopPropagation(),t.nodeName(e.target,"a")&&e.preventDefault(),s.$modal.trigger("modal-click")})),s.$modal.data("pattern-"+s.name,s),s.emit("after-render")}}},reloadWindow:function(){window.parent.location.reload()},init:function(){var e=this;e.options.loadLinksWithinModal=t.parseJSON(e.options.loadLinksWithinModal),null!==e.options.routerOptions.id&&o.addRoute("modal",e.options.routerOptions.id,(function(){this.show()}),e,e.options.routerOptions.pathExp,e.options.routerOptions.expReplace),!0===e.options.backdropOptions.closeOnEsc&&t(document).on("keydown",(function(t,i){e.$el.is("."+e.options.templateOptions.classActiveName)&&27===t.keyCode&&e.hide()})),t(window.parent).resize((function(){e.positionModal()})),e.options.triggers&&t.each(e.options.triggers,(function(i,s){var n=s.substring(0,s.indexOf(" ")),o=s.substring(s.indexOf(" "),s.length);t(o||e.$el).on(n,(function(t){t.stopPropagation(),t.preventDefault(),e.show()}))})),e.$el.is("a")&&(e.$el.attr("href")&&!e.options.image&&(e.options.target||"#"!==e.$el.attr("href").substr(0,1)||(e.options.target=e.$el.attr("href"),e.options.content=""),e.options.ajaxUrl||"#"===e.$el.attr("href").substr(0,1)||(e.options.ajaxUrl=function(){return e.$el.attr("href")})),e.$el.on("click",(function(t){t.stopPropagation(),t.preventDefault(),e.show()}))),e.initModal()},createAjaxModal:function(){var e=this;e.emit("before-ajax"),e.loading.show();var i=e.options.ajaxUrl;"function"==typeof i&&(i=i.apply(e,[e.options])),e.ajaxXHR=t.ajax({url:i,type:e.options.ajaxType}).done((function(i,s,n){e.ajaxXHR=void 0,e.$raw=t("<div />").append(t(a.parseBodyTag(i))),e.emit("after-ajax",e,s,n),e._show()})).fail((function(t,i,s){var n=e.options.actionOptions;"timeout"===i&&n.onTimeout?n.onTimeout(e.$modal,t,s):n.onError?n.onError(t,i,s):(window.alert(r("There was an error loading modal.")),e.hide()),e.emit("linkActionError",[t,i,s])})).always((function(){e.loading.hide()}))},createTargetModal:function(){this.$raw=t(this.options.target).clone(),this._show()},createBasicModal:function(){this.$raw=t("<div/>").html(this.$el.clone()),this._show()},createHtmlModal:function(){var e=t(this.options.html);this.$raw=e,this._show()},createImageModal:function(){this.$wrapper.addClass("image-modal");var e=this.$el.attr("href"),i=this.$el.attr("data-modal-srcset")||"",s=t.trim(this.$el.context.innerText)||"Image";this.$raw=t("<div><h1>"+s+'</h1><div id="content"><div class="modal-image"><img src="'+e+'" srcset="'+i+'" /></div></div></div>'),this._show()},initModal:function(){this.options.ajaxUrl?this.createModal=this.createAjaxModal:this.options.target?this.createModal=this.createTargetModal:this.options.html?this.createModal=this.createHtmlModal:this.options.image?this.createModal=this.createImageModal:this.createModal=this.createBasicModal},findPosition:function(t,e,i,s,n,o,a){var r,l,c,h,u={};return h=c=r=c="auto","left"===t?(c=i+"px",s>o&&(c="0px"),u.left=c):"right"===t?(h=i+"px",s>o&&(h="0px"),u.right=h,u.left="auto"):(c=o/2-s/2-i+"px",s>o&&(c="0px"),u.left=c),"top"===e?(r=i+"px",n>a&&(r="0px"),u.top=r):"bottom"===e?(l=i+"px",n>a&&(l="0px"),u.bottom=l,u.top="auto"):(r=a/2-n/2-i+"px",n>a&&(r="0px"),u.top=r),u},modalInitialized:function(){return null!==this.$modal&&void 0!==this.$modal},positionModal:function(){if(this.modalInitialized()){this.$modal.removeAttr("style"),this.$wrapper.parent().is("body")&&this.$wrapper.height(t(window.parent).height());var e="function"==typeof this.options.margin?this.options.margin():this.options.margin;this.$modal.css({position:"absolute",padding:e}),this.$modalDialog.css({margin:"0",padding:"0",width:this.options.width,height:this.options.height}),this.$modalContent.css({width:this.options.width});var i=this.options.position.split(" "),s=i[0],n=i[1],o=this.$modalDialog.outerWidth(!0),a=this.$modalDialog.outerHeight(!0),r=this.$wrapperInner.width(),l=this.$wrapperInner.height(),c=this.findPosition(s,n,e,o,a,r,l);for(var h in c)this.$modalDialog.css(h,c[h])}},render:function(t){this.emit("render"),this.options.render.apply(this,[t]),this.emit("rendered")},show:function(){this.backdrop=this.createBackdrop(),this.createModal()},createBackdrop:function(){var e=this,i=new s(e.$el.parents(e.options.backdrop),e.options.backdropOptions),n=1041;return t(e.options.zIndexSelector).each((function(){n=Math.max(n,parseInt(t(this).css("zIndex"))+1||1041)})),e.$wrapper=t("<div/>").hide().css({"z-index":n,"overflow-y":"auto",position:"fixed",height:"100%",width:"100%",bottom:"0",left:"0",right:"0",top:"0"}).addClass(e.options.templateOptions.classWrapperName).insertBefore(i.$backdrop).on("click",(function(t){e.options.backdropOptions.closeOnClick&&(t.stopPropagation(),t.preventDefault(),i.hide())})),i.on("hidden",(function(t){void 0!==e.$modal&&e.$modal.hasClass(e.options.templateOptions.classActiveName)&&e.hide()})),e.loading=new a.Loading({backdrop:i}),e.$wrapperInner=t("<div/>").addClass(e.options.classWrapperInnerName).css({position:"absolute",bottom:"0",left:"0",right:"0",top:"0"}).appendTo(e.$wrapper),i},_show:function(){var e=this;e.render.apply(e,[e.options]),e.emit("show"),e.backdrop.show(),e.$wrapper.show(),e.loading.hide(),e.$el.addClass(e.options.templateOptions.classActiveName),e.$modal.addClass(e.options.templateOptions.classActiveName),n.scan(e.$modal),e.positionModal(),t(window.parent).on("resize.plone-modal.patterns",(function(){e.positionModal()})),t("body").addClass("plone-modal-open"),e.emit("shown")},hide:function(){this.ajaxXHR&&this.ajaxXHR.abort(),this.emit("hide"),this._suppressHide&&!window.confirm(this._suppressHide)||(this.loading.hide(),this.$el.removeClass(this.options.templateOptions.classActiveName),void 0!==this.$modal&&(this.$modal.remove(),this.initModal()),this.$wrapper.remove(),t(".plone-modal",t("body")).size()<1&&(this._suppressHide=void 0,this.backdrop.hide(),t("body").removeClass("plone-modal-open"),t(window.parent).off("resize.plone-modal.patterns")),this.emit("hidden"))},redraw:function(e,i){this.emit("beforeDraw"),this.$modal.remove(),this.$raw=t("<div />").append(t(a.parseBodyTag(e))),this.render.apply(this,[i||this.options]),this.$modal.addClass(this.options.templateOptions.classActiveName),this.positionModal(),n.scan(this.$modal),this.emit("afterDraw")}})}.apply(e,s))||(t.exports=n)},170:function(t,e,i){var s,n;s=[i(39),i(46)],void 0===(n=function(t,e){"use strict";var i=function(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")};return new(e.Router.extend({actions:[],redirects:{},addRoute:function(e,s,n,o,a,r){void 0===t.findWhere(this.patterns,{patternName:e,id:s})&&this.actions.push({patternName:e,id:s,callback:n,context:o,pathExp:a,expReplace:r});var l=new RegExp("("+i(e)+":"+i(s)+")");this.route(l,"handleRoute")},addRedirect:function(t,e){this.redirects[t]=e},handleRoute:function(e){var i=e.split(":"),s=i[0],n=i[1],o=t.findWhere(this.actions,{patternName:s,id:n});o&&o.callback.call(o.context)},redirect:function(){var e,i,s,n=window.parent.location.pathname;if(t.some(this.actions,(function(t){if(t.pathExp&&(i=new RegExp(t.pathExp),n.match(i))){s="!/"+t.patternName+":"+t.id;var o="";return t.expReplace&&(o=t.expReplace),e=n.replace(i,o),!0}}),this),void 0===s)for(var o in this.redirects)if(i=new RegExp(o),n.match(i)){s="!/"+this.redirects[o],e=n.replace(i,"");break}void 0!==s&&this._changeLocation.apply(this,[e,s])},_changeLocation:function(t,e){window.parent.location.hash=e,window.parent.location.pathname=t},start:function(){e.history.start()},reset:function(){this.actions=[]}}))}.apply(e,s))||(t.exports=n)},42:function(t,e,i){var s,n;s=[i(59)],void 0===(n=function(t){"use strict";var e=null;return function(i,s){if(null===e){var n=new t;n.loadCatalog("widgets"),e=n.MessageFactory("widgets")}return e(i,s)}}.apply(e,s))||(t.exports=n)},46:function(t,e,i){var s,n,o;o=this,s=[i(39),i(0),e],void 0===(n=function(t,e,i){o.Backbone=function(t,e,i,s){var n=t.Backbone,o=[],a=o.slice;e.VERSION="1.1.2",e.$=s,e.noConflict=function(){return t.Backbone=n,this},e.emulateHTTP=!1,e.emulateJSON=!1;var r=e.Events={on:function(t,e,i){return c(this,"on",t,[e,i])&&e?(this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push({callback:e,context:i,ctx:i||this}),this):this},once:function(t,e,s){if(!c(this,"once",t,[e,s])||!e)return this;var n=this,o=i.once((function(){n.off(t,o),e.apply(this,arguments)}));return o._callback=e,this.on(t,o,s)},off:function(t,e,s){var n,o,a,r,l,h,u,d;if(!this._events||!c(this,"off",t,[e,s]))return this;if(!t&&!e&&!s)return this._events=void 0,this;for(l=0,h=(r=t?[t]:i.keys(this._events)).length;l<h;l++)if(t=r[l],a=this._events[t]){if(this._events[t]=n=[],e||s)for(u=0,d=a.length;u<d;u++)o=a[u],(e&&e!==o.callback&&e!==o.callback._callback||s&&s!==o.context)&&n.push(o);n.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=a.call(arguments,1);if(!c(this,"trigger",t,e))return this;var i=this._events[t],s=this._events.all;return i&&h(i,e),s&&h(s,arguments),this},stopListening:function(t,e,s){var n=this._listeningTo;if(!n)return this;var o=!e&&!s;for(var a in s||"object"!=typeof e||(s=this),t&&((n={})[t._listenId]=t),n)(t=n[a]).off(e,s,this),(o||i.isEmpty(t._events))&&delete this._listeningTo[a];return this}},l=/\s+/,c=function(t,e,i,s){if(!i)return!0;if("object"==typeof i){for(var n in i)t[e].apply(t,[n,i[n]].concat(s));return!1}if(l.test(i)){for(var o=i.split(l),a=0,r=o.length;a<r;a++)t[e].apply(t,[o[a]].concat(s));return!1}return!0},h=function(t,e){var i,s=-1,n=t.length,o=e[0],a=e[1],r=e[2];switch(e.length){case 0:for(;++s<n;)(i=t[s]).callback.call(i.ctx);return;case 1:for(;++s<n;)(i=t[s]).callback.call(i.ctx,o);return;case 2:for(;++s<n;)(i=t[s]).callback.call(i.ctx,o,a);return;case 3:for(;++s<n;)(i=t[s]).callback.call(i.ctx,o,a,r);return;default:for(;++s<n;)(i=t[s]).callback.apply(i.ctx,e);return}};i.each({listenTo:"on",listenToOnce:"once"},(function(t,e){r[e]=function(e,s,n){return(this._listeningTo||(this._listeningTo={}))[e._listenId||(e._listenId=i.uniqueId("l"))]=e,n||"object"!=typeof s||(n=this),e[t](s,n,this),this}})),r.bind=r.on,r.unbind=r.off,i.extend(e,r);var u=e.Model=function(t,e){var s=t||{};e||(e={}),this.cid=i.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(s=this.parse(s,e)||{}),s=i.defaults({},s,i.result(this,"defaults")),this.set(s,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(u.prototype,r,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,s){var n,o,a,r,l,c,h,u;if(null==t)return this;if("object"==typeof t?(o=t,s=e):(o={})[t]=e,s||(s={}),!this._validate(o,s))return!1;for(n in a=s.unset,l=s.silent,r=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=i.clone(this.attributes),this.changed={}),u=this.attributes,h=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]),o)e=o[n],i.isEqual(u[n],e)||r.push(n),i.isEqual(h[n],e)?delete this.changed[n]:this.changed[n]=e,a?delete u[n]:u[n]=e;if(!l){r.length&&(this._pending=s);for(var d=0,p=r.length;d<p;d++)this.trigger("change:"+r[d],this,u[r[d]],s)}if(c)return this;if(!l)for(;this._pending;)s=this._pending,this._pending=!1,this.trigger("change",this,s);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var s in this.attributes)e[s]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&i.clone(this.changed);var e,s=!1,n=this._changing?this._previousAttributes:this.attributes;for(var o in t)i.isEqual(n[o],e=t[o])||((s||(s={}))[o]=e);return s},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){void 0===(t=t?i.clone(t):{}).parse&&(t.parse=!0);var e=this,s=t.success;return t.success=function(i){if(!e.set(e.parse(i,t),t))return!1;s&&s(e,i,t),e.trigger("sync",e,i,t)},j(this,t),this.sync("read",this,t)},save:function(t,e,s){var n,o,a,r=this.attributes;if(null==t||"object"==typeof t?(n=t,s=e):(n={})[t]=e,s=i.extend({validate:!0},s),n&&!s.wait){if(!this.set(n,s))return!1}else if(!this._validate(n,s))return!1;n&&s.wait&&(this.attributes=i.extend({},r,n)),void 0===s.parse&&(s.parse=!0);var l=this,c=s.success;return s.success=function(t){l.attributes=r;var e=l.parse(t,s);if(s.wait&&(e=i.extend(n||{},e)),i.isObject(e)&&!l.set(e,s))return!1;c&&c(l,t,s),l.trigger("sync",l,t,s)},j(this,s),"patch"==(o=this.isNew()?"create":s.patch?"patch":"update")&&(s.attrs=n),a=this.sync(o,this,s),n&&s.wait&&(this.attributes=r),a},destroy:function(t){t=t?i.clone(t):{};var e=this,s=t.success,n=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(i){(t.wait||e.isNew())&&n(),s&&s(e,i,t),e.isNew()||e.trigger("sync",e,i,t)},this.isNew())return t.success(),!1;j(this,t);var o=this.sync("delete",this,t);return t.wait||n(),o},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||N();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var s=this.validationError=this.validate(t,e)||null;return!s||(this.trigger("invalid",this,s,i.extend(e,{validationError:s})),!1)}}),i.each(["keys","values","pairs","invert","pick","omit"],(function(t){u.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.attributes),i[t].apply(i,e)}}));var d=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},p={add:!0,remove:!0,merge:!0},f={add:!0,remove:!1};i.extend(d.prototype,r,{model:u,initialize:function(){},toJSON:function(t){return this.map((function(e){return e.toJSON(t)}))},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,f))},remove:function(t,e){var s,n,o,a,r=!i.isArray(t);for(e||(e={}),s=0,n=(t=r?[t]:i.clone(t)).length;s<n;s++)(a=t[s]=this.get(t[s]))&&(delete this._byId[a.id],delete this._byId[a.cid],o=this.indexOf(a),this.models.splice(o,1),this.length--,e.silent||(e.index=o,a.trigger("remove",a,this,e)),this._removeReference(a,e));return r?t[0]:t},set:function(t,e){(e=i.defaults({},e,p)).parse&&(t=this.parse(t,e));var s,n,o,a,r,l,c,h=!i.isArray(t);t=h?t?[t]:[]:i.clone(t);var d=e.at,f=this.model,m=this.comparator&&null==d&&!1!==e.sort,g=i.isString(this.comparator)?this.comparator:null,v=[],b=[],w={},y=e.add,x=e.merge,S=e.remove,C=!(m||!y||!S)&&[];for(s=0,n=t.length;s<n;s++){if(o=(r=t[s]||{})instanceof u?a=r:r[f.prototype.idAttribute||"id"],l=this.get(o))S&&(w[l.cid]=!0),x&&(r=r===a?a.attributes:r,e.parse&&(r=l.parse(r,e)),l.set(r,e),m&&!c&&l.hasChanged(g)&&(c=!0)),t[s]=l;else if(y){if(!(a=t[s]=this._prepareModel(r,e)))continue;v.push(a),this._addReference(a,e)}a=l||a,!C||!a.isNew()&&w[a.id]||C.push(a),w[a.id]=!0}if(S){for(s=0,n=this.length;s<n;++s)w[(a=this.models[s]).cid]||b.push(a);b.length&&this.remove(b,e)}if(v.length||C&&C.length)if(m&&(c=!0),this.length+=v.length,null!=d)for(s=0,n=v.length;s<n;s++)this.models.splice(d+s,0,v[s]);else{C&&(this.models.length=0);var T=C||v;for(s=0,n=T.length;s<n;s++)this.models.push(T[s])}if(c&&this.sort({silent:!0}),!e.silent){for(s=0,n=v.length;s<n;s++)(a=v[s]).trigger("add",a,this,e);(c||C&&C.length)&&this.trigger("sort",this,e)}return h?t[0]:t},reset:function(t,e){e||(e={});for(var s=0,n=this.models.length;s<n;s++)this._removeReference(this.models[s],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return a.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){return i.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"]((function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0}))},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return i.invoke(this.models,"get",t)},fetch:function(t){void 0===(t=t?i.clone(t):{}).parse&&(t.parse=!0);var e=t.success,s=this;return t.success=function(i){var n=t.reset?"reset":"set";s[n](i,t),e&&e(s,i,t),s.trigger("sync",s,i,t)},j(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?i.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var s=this,n=e.success;return e.success=function(t,i){e.wait&&s.add(t,e),n&&n(t,i,e)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof u)return t;(e=e?i.clone(e):{}).collection=this;var s=new this.model(t,e);return s.validationError?(this.trigger("invalid",this,s.validationError,e),!1):s},_addReference:function(t,e){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,s){("add"!==t&&"remove"!==t||i===this)&&("destroy"===t&&this.remove(e,s),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}}),i.each(["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"],(function(t){d.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.models),i[t].apply(i,e)}})),i.each(["groupBy","countBy","sortBy","indexBy"],(function(t){d.prototype[t]=function(e,s){var n=i.isFunction(e)?e:function(t){return t.get(e)};return i[t](this.models,n,s)}}));var m=e.View=function(t){this.cid=i.uniqueId("view"),t||(t={}),i.extend(this,i.pick(t,v)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},g=/^(\S+)\s*(.*)$/,v=["model","collection","el","id","attributes","className","tagName","events"];i.extend(m.prototype,r,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,i){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],!1!==i&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=i.result(this,"events")))return this;for(var e in this.undelegateEvents(),t){var s=t[e];if(i.isFunction(s)||(s=this[t[e]]),s){var n=e.match(g),o=n[1],a=n[2];s=i.bind(s,this),o+=".delegateEvents"+this.cid,""===a?this.$el.on(o,s):this.$el.on(o,a,s)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"),!1);else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t.class=i.result(this,"className"));var s=e.$("<"+i.result(this,"tagName")+">").attr(t);this.setElement(s,!1)}}}),e.sync=function(t,s,n){var o=w[t];i.defaults(n||(n={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:o,dataType:"json"};if(n.url||(a.url=i.result(s,"url")||N()),null!=n.data||!s||"create"!==t&&"update"!==t&&"patch"!==t||(a.contentType="application/json",a.data=JSON.stringify(n.attrs||s.toJSON(n))),n.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),n.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){a.type="POST",n.emulateJSON&&(a.data._method=o);var r=n.beforeSend;n.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",o),r)return r.apply(this,arguments)}}"GET"===a.type||n.emulateJSON||(a.processData=!1),"PATCH"===a.type&&b&&(a.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=n.xhr=e.ajax(i.extend(a,n));return s.trigger("request",s,l,n),l};var b=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),w={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var y=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},x=/\((.*?)\)/g,S=/(\(\?)?:\w+/g,C=/\*\w+/g,T=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(y.prototype,r,{initialize:function(){},route:function(t,s,n){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(s)&&(n=s,s=""),n||(n=this[s]);var o=this;return e.history.route(t,(function(i){var a=o._extractParameters(t,i);o.execute(n,a),o.trigger.apply(o,["route:"+s].concat(a)),o.trigger("route",s,a),e.history.trigger("route",o,s,a)})),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(T,"\\$&").replace(x,"(?:$1)?").replace(S,(function(t,e){return e?t:"([^/?]+)"})).replace(C,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var s=t.exec(e).slice(1);return i.map(s,(function(t,e){return e===s.length-1?t||null:t?decodeURIComponent(t):null}))}});var k=e.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},E=/^[#\/]|\s+$/g,O=/^\/+|\/+$/g,A=/msie [\w.]+/,I=/\/$/,_=/#.*$/;k.started=!1,i.extend(k.prototype,r,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(I,"");t.indexOf(i)||(t=t.slice(i.length))}else t=this.getHash();return t.replace(E,"")},start:function(t){if(k.started)throw new Error("Backbone.history has already been started");k.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var s=this.getFragment(),n=document.documentMode,o=A.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);if(this.root=("/"+this.root+"/").replace(O,"/"),o&&this._wantsHashChange){var a=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=a.hide().appendTo("body")[0].contentWindow,this.navigate(s)}this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!o?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=s;var r=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&r.hash&&(this.fragment=this.getHash().replace(E,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),k.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(t){return t=this.fragment=this.getFragment(t),i.any(this.handlers,(function(e){if(e.route.test(t))return e.callback(t),!0}))},navigate:function(t,e){if(!k.started)return!1;e&&!0!==e||(e={trigger:!!e});var i=this.root+(t=this.getFragment(t||""));if(t=t.replace(_,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var s=t.href.replace(/(javascript:|#).*$/,"");t.replace(s+"#"+e)}else t.hash="#"+e}}),e.history=new k,u.extend=d.extend=y.extend=m.extend=k.extend=function(t,e){var s,n=this;s=t&&i.has(t,"constructor")?t.constructor:function(){return n.apply(this,arguments)},i.extend(s,n,e);var o=function(){this.constructor=s};return o.prototype=n.prototype,s.prototype=new o,t&&i.extend(s.prototype,t),s.__super__=n.prototype,s};var N=function(){throw new Error('A "url" property or function must be specified')},j=function(t,e){var i=e.error;e.error=function(s){i&&i(t,s,e),t.trigger("error",t,s,e)}};return e}(o,i,t,e)}.apply(e,s))||(t.exports=n)},57:function(t,e,i){var s=i(0);!function(t){t.fn.drag=function(e,i,s){var n="string"==typeof e?e:"",o=t.isFunction(e)?e:t.isFunction(i)?i:null;return 0!==n.indexOf("drag")&&(n="drag"+n),s=(e==o?i:s)||{},o?this.bind(n,s,o):this.trigger(n)};var e=t.event,i=e.special,s=i.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(e){var i=t.data(this,s.datakey),n=e.data||{};i.related+=1,t.each(s.defaults,(function(t,e){void 0!==n[t]&&(i[t]=n[t])}))},remove:function(){t.data(this,s.datakey).related-=1},setup:function(){if(!t.data(this,s.datakey)){var i=t.extend({related:0},s.defaults);t.data(this,s.datakey,i),e.add(this,"touchstart mousedown",s.init,i),this.attachEvent&&this.attachEvent("ondragstart",s.dontstart)}},teardown:function(){(t.data(this,s.datakey)||{}).related||(t.removeData(this,s.datakey),e.remove(this,"touchstart mousedown",s.init),s.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",s.dontstart))},init:function(n){if(!s.touched){var o,a=n.data;if(!(0!=n.which&&a.which>0&&n.which!=a.which)&&!t(n.target).is(a.not)&&(!a.handle||t(n.target).closest(a.handle,n.currentTarget).length)&&(s.touched="touchstart"==n.type?this:null,a.propagates=1,a.mousedown=this,a.interactions=[s.interaction(this,a)],a.target=n.target,a.pageX=n.pageX,a.pageY=n.pageY,a.dragging=null,o=s.hijack(n,"draginit",a),a.propagates))return(o=s.flatten(o))&&o.length&&(a.interactions=[],t.each(o,(function(){a.interactions.push(s.interaction(this,a))}))),a.propagates=a.interactions.length,!1!==a.drop&&i.drop&&i.drop.handler(n,a),s.textselect(!1),s.touched?e.add(s.touched,"touchmove touchend",s.handler,a):e.add(document,"mousemove mouseup",s.handler,a),!(!s.touched||a.live)&&void 0}},interaction:function(e,i){var n=t(e)[i.relative?"position":"offset"]()||{top:0,left:0};return{drag:e,callback:new s.callback,droppable:[],offset:n}},handler:function(n){var o=n.data;switch(n.type){case!o.dragging&&"touchmove":n.preventDefault();case!o.dragging&&"mousemove":if(Math.pow(n.pageX-o.pageX,2)+Math.pow(n.pageY-o.pageY,2)<Math.pow(o.distance,2))break;n.target=o.target,s.hijack(n,"dragstart",o),o.propagates&&(o.dragging=!0);case"touchmove":n.preventDefault();case"mousemove":if(o.dragging){if(s.hijack(n,"drag",o),o.propagates){!1!==o.drop&&i.drop&&i.drop.handler(n,o);break}n.type="mouseup"}case"touchend":case"mouseup":default:s.touched?e.remove(s.touched,"touchmove touchend",s.handler):e.remove(document,"mousemove mouseup",s.handler),o.dragging&&(!1!==o.drop&&i.drop&&i.drop.handler(n,o),s.hijack(n,"dragend",o)),s.textselect(!0),!1===o.click&&o.dragging&&t.data(o.mousedown,"suppress.click",(new Date).getTime()+5),o.dragging=s.touched=!1}},hijack:function(i,n,o,a,r){if(o){var l,c,h,u={event:i.originalEvent,type:i.type},d=n.indexOf("drop")?"drag":"drop",p=a||0,f=isNaN(a)?o.interactions.length:a;i.type=n,i.originalEvent=null,o.results=[];do{if(c=o.interactions[p]){if("dragend"!==n&&c.cancelled)continue;h=s.properties(i,o,c),c.results=[],t(r||c[d]||o.droppable).each((function(a,r){if(h.target=r,i.isPropagationStopped=function(){return!1},!1===(l=r?e.dispatch.call(r,i,h):null)?("drag"==d&&(c.cancelled=!0,o.propagates-=1),"drop"==n&&(c[d][a]=null)):"dropinit"==n&&c.droppable.push(s.element(l)||r),"dragstart"==n&&(c.proxy=t(s.element(l)||c.drag)[0]),c.results.push(l),delete i.result,"dropinit"!==n)return l})),o.results[p]=s.flatten(c.results),"dropinit"==n&&(c.droppable=s.flatten(c.droppable)),"dragstart"!=n||c.cancelled||h.update()}}while(++p<f);return i.type=u.type,i.originalEvent=u.event,s.flatten(o.results)}},properties:function(t,e,i){var n=i.callback;return n.drag=i.drag,n.proxy=i.proxy||i.drag,n.startX=e.pageX,n.startY=e.pageY,n.deltaX=t.pageX-e.pageX,n.deltaY=t.pageY-e.pageY,n.originalX=i.offset.left,n.originalY=i.offset.top,n.offsetX=n.originalX+n.deltaX,n.offsetY=n.originalY+n.deltaY,n.drop=s.flatten((i.drop||[]).slice()),n.available=s.flatten((i.droppable||[]).slice()),n},element:function(t){if(t&&(t.jquery||1==t.nodeType))return t},flatten:function(e){return t.map(e,(function(e){return e&&e.jquery?t.makeArray(e):e&&e.length?s.flatten(e):e}))},textselect:function(e){t(document)[e?"unbind":"bind"]("selectstart",s.dontstart).css("MozUserSelect",e?"":"none"),document.unselectable=e?"off":"on"},dontstart:function(){return!1},callback:function(){}};s.callback.prototype={update:function(){i.drop&&this.available.length&&t.each(this.available,(function(t){i.drop.locate(this,t)}))}};var n=e.dispatch;e.dispatch=function(e){if(!(t.data(this,"suppress."+e.type)-(new Date).getTime()>0))return n.apply(this,arguments);t.removeData(this,"suppress."+e.type)};var o=e.fixHooks.touchstart=e.fixHooks.touchmove=e.fixHooks.touchend=e.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(e,i){if(i){var s=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0]||null;s&&t.each(o.props,(function(t,i){e[i]=s[i]}))}return e}}}(s),t.exports=s.drag},58:function(t,e,i){var s=i(0);!function(t){t.fn.drop=function(e,i,s){var n="string"==typeof e?e:"",o=t.isFunction(e)?e:t.isFunction(i)?i:null;return 0!==n.indexOf("drop")&&(n="drop"+n),s=(e==o?i:s)||{},o?this.bind(n,s,o):this.trigger(n)},t.drop=function(e){e=e||{},i.multi=!0===e.multi?1/0:!1===e.multi?1:isNaN(e.multi)?i.multi:e.multi,i.delay=e.delay||i.delay,i.tolerance=t.isFunction(e.tolerance)?e.tolerance:null===e.tolerance?null:i.tolerance,i.mode=e.mode||i.mode||"intersect"};var e=t.event.special,i=t.event.special.drop={multi:1,delay:20,mode:"overlap",targets:[],datakey:"dropdata",noBubble:!0,add:function(e){t.data(this,i.datakey).related+=1},remove:function(){t.data(this,i.datakey).related-=1},setup:function(){if(!t.data(this,i.datakey)){t.data(this,i.datakey,{related:0,active:[],anyactive:0,winner:0,location:{}}),i.targets.push(this)}},teardown:function(){if(!(t.data(this,i.datakey)||{}).related){t.removeData(this,i.datakey);var e=this;i.targets=t.grep(i.targets,(function(t){return t!==e}))}},handler:function(s,n){var o;if(n)switch(s.type){case"mousedown":case"touchstart":o=t(i.targets),"string"==typeof n.drop&&(o=o.filter(n.drop)),o.each((function(){var e=t.data(this,i.datakey);e.active=[],e.anyactive=0,e.winner=0})),n.droppable=o,e.drag.hijack(s,"dropinit",n);break;case"mousemove":case"touchmove":i.event=s,i.timer||i.tolerate(n);break;case"mouseup":case"touchend":i.timer=clearTimeout(i.timer),n.propagates&&(e.drag.hijack(s,"drop",n),e.drag.hijack(s,"dropend",n))}},locate:function(e,s){var n=t.data(e,i.datakey),o=t(e),a=o.offset()||{},r=o.outerHeight(),l=o.outerWidth(),c={elem:e,width:l,height:r,top:a.top,left:a.left,right:a.left+l,bottom:a.top+r};return n&&(n.location=c,n.index=s,n.elem=e),c},contains:function(t,e){return(e[0]||e.left)>=t.left&&(e[0]||e.right)<=t.right&&(e[1]||e.top)>=t.top&&(e[1]||e.bottom)<=t.bottom},modes:{intersect:function(t,e,i){return this.contains(i,[t.pageX,t.pageY])?1e9:this.modes.overlap.apply(this,arguments)},overlap:function(t,e,i){return Math.max(0,Math.min(i.bottom,e.bottom)-Math.max(i.top,e.top))*Math.max(0,Math.min(i.right,e.right)-Math.max(i.left,e.left))},fit:function(t,e,i){return this.contains(i,e)?1:0},middle:function(t,e,i){return this.contains(i,[e.left+.5*e.width,e.top+.5*e.height])?1:0}},sort:function(t,e){return e.winner-t.winner||t.index-e.index},tolerate:function(s){var n,o,a,r,l,c,h,u,d=0,p=s.interactions.length,f=[i.event.pageX,i.event.pageY],m=i.tolerance||i.modes[i.mode];do{if(u=s.interactions[d]){if(!u)return;u.drop=[],l=[],c=u.droppable.length,m&&(a=i.locate(u.proxy)),n=0;do{if(h=u.droppable[n]){if(!(o=(r=t.data(h,i.datakey)).location))continue;r.winner=m?m.call(i,i.event,a,o):i.contains(o,f)?1:0,l.push(r)}}while(++n<c);l.sort(i.sort),n=0;do{(r=l[n])&&(r.winner&&u.drop.length<i.multi?(r.active[d]||r.anyactive||(!1!==e.drag.hijack(i.event,"dropstart",s,d,r.elem)[0]?(r.active[d]=1,r.anyactive+=1):r.winner=0),r.winner&&u.drop.push(r.elem)):r.active[d]&&1==r.anyactive&&(e.drag.hijack(i.event,"dropend",s,d,r.elem),r.active[d]=0,r.anyactive-=1))}while(++n<c)}}while(++d<p);i.last&&f[0]==i.last.pageX&&f[1]==i.last.pageY?delete i.timer:i.timer=setTimeout((function(){i.tolerate(s)}),i.delay),i.last=i.event}};e.dropinit=e.dropstart=e.dropend=i}(s),t.exports=s.drop},59:function(t,e,i){var s,n;s=[i(0)],void 0===(n=function(t){"use strict";return function(){var e=this;e.baseUrl=t("body").attr("data-i18ncatalogurl"),e.baseUrl||(e.baseUrl="/plonejsi18n"),e.currentLanguage=t("html").attr("lang")||"en",e.currentLanguage.split("-").length>1&&(e.currentLanguage=e.currentLanguage.split("-")[0]+"_"+e.currentLanguage.split("-")[1].toUpperCase()),e.storage=null,e.catalogs={},e.ttl=864e5,Date.now||(Date.now=function(){return(new Date).valueOf()});try{"localStorage"in window&&null!==window.localStorage&&"JSON"in window&&null!==window.JSON&&(e.storage=window.localStorage)}catch(t){}e.configure=function(t){for(var i in t)e[i]=t[i]},e._setCatalog=function(t,i,s){t in e.catalogs||(e.catalogs[t]={}),e.catalogs[t][i]=s},e._storeCatalog=function(t,i,s){var n=t+"-"+i;null!==e.storage&&null!==s&&(e.storage.setItem(n,JSON.stringify(s)),e.storage.setItem(n+"-updated",Date.now()))},e.getUrl=function(t,i){return e.baseUrl+"?domain="+t+"&language="+i},e.loadCatalog=function(i,s){if(void 0===s&&(s=e.currentLanguage),null!==e.storage){var n=i+"-"+s;if(n in e.storage&&Date.now()-parseInt(e.storage.getItem(n+"-updated"),10)<e.ttl){var o=JSON.parse(e.storage.getItem(n));return void e._setCatalog(i,s,o)}}t.getJSON(e.getUrl(i,s),(function(t){null!==t&&(e._setCatalog(i,s,t),e._storeCatalog(i,s,t))}))},e.MessageFactory=function(t,i){return i=i||e.currentLanguage,function(s,n){var o,a,r;if(o=t in e.catalogs&&i in e.catalogs[t]&&s in e.catalogs[t][i]?e.catalogs[t][i][s]:s,n)for(r in n)n.hasOwnProperty(r)&&(a=new RegExp("\\$\\{"+r+"\\}","g"),o=o.replace(a,n[r]));return o}}}}.apply(e,s))||(t.exports=n)},79:function(t,e,i){var s,n=i(0);void 0===(s=n).fn.each2&&s.extend(s.fn,{each2:function(t){for(var e=s([0]),i=-1,n=this.length;++i<n&&(e.context=e[0]=this[i])&&!1!==t.call(e[0],i,e););return this}}),function(t,e){"use strict";function i(e){var i=t(document.createTextNode(""));e.before(i),i.before(e),i.remove()}function s(t){return t.replace(/[^\u0000-\u007E]/g,(function(t){return D[t]||t}))}function n(t,e){for(var i=0,s=e.length;s>i;i+=1)if(o(t,e[i]))return i;return-1}function o(t,i){return t===i||t!==e&&i!==e&&(null!==t&&null!==i&&(t.constructor===String?t+""==i+"":i.constructor===String&&i+""==t+""))}function a(t,e,i){var s,n,o;if(null===t||t.length<1)return[];for(n=0,o=(s=t.split(e)).length;o>n;n+=1)s[n]=i(s[n]);return s}function r(t){return t.outerWidth(!1)-t.width()}function l(i){var s="keyup-change-value";i.on("keydown",(function(){t.data(i,s)===e&&t.data(i,s,i.val())})),i.on("keyup",(function(){var n=t.data(i,s);n!==e&&i.val()!==n&&(t.removeData(i,s),i.trigger("keyup-change"))}))}function c(i){i.on("mousemove",(function(i){var s=j;(s===e||s.x!==i.pageX||s.y!==i.pageY)&&t(i.target).trigger("mousemove-filtered",i)}))}function h(t,i,s){var n;return s=s||e,function(){var e=arguments;window.clearTimeout(n),n=window.setTimeout((function(){i.apply(s,e)}),t)}}function u(e){var i=0,s=0;if("selectionStart"in(e=t(e)[0]))i=e.selectionStart,s=e.selectionEnd-i;else if("selection"in document){e.focus();var n=document.selection.createRange();s=document.selection.createRange().text.length,n.moveStart("character",-e.value.length),i=n.text.length-s}return{offset:i,length:s}}function d(t){t.preventDefault(),t.stopPropagation()}function p(e){if(!I){var i=e[0].currentStyle||window.getComputedStyle(e[0],null);(I=t(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:i.fontSize,fontFamily:i.fontFamily,fontStyle:i.fontStyle,fontWeight:i.fontWeight,letterSpacing:i.letterSpacing,textTransform:i.textTransform,whiteSpace:"nowrap"})).attr("class","select2-sizer"),t(document.body).append(I)}return I.text(e.val()),I.width()}function f(e,i,s){var n,o,a=[];(n=t.trim(e.attr("class")))&&t((n=""+n).split(/\s+/)).each2((function(){0===this.indexOf("select2-")&&a.push(this)})),(n=t.trim(i.attr("class")))&&t((n=""+n).split(/\s+/)).each2((function(){0!==this.indexOf("select2-")&&((o=s(this))&&a.push(o))})),e.attr("class",a.join(" "))}function m(t,e,i,n){var o=s(t.toUpperCase()).indexOf(s(e.toUpperCase())),a=e.length;return 0>o?void i.push(n(t)):(i.push(n(t.substring(0,o))),i.push("<span class='select2-match'>"),i.push(n(t.substring(o,o+a))),i.push("</span>"),void i.push(n(t.substring(o+a,t.length))))}function g(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(t).replace(/[&<>"'\/\\]/g,(function(t){return e[t]}))}function v(i){var s,n=null,o=i.quietMillis||100,a=i.url,r=this;return function(l){window.clearTimeout(s),s=window.setTimeout((function(){var s=i.data,o=a,c=i.transport||t.fn.select2.ajaxDefaults.transport,h={type:i.type||"GET",cache:i.cache||!1,jsonpCallback:i.jsonpCallback||e,dataType:i.dataType||"json"},u=t.extend({},t.fn.select2.ajaxDefaults.params,h);s=s?s.call(r,l.term,l.page,l.context):null,o="function"==typeof o?o.call(r,l.term,l.page,l.context):o,n&&"function"==typeof n.abort&&n.abort(),i.params&&(t.isFunction(i.params)?t.extend(u,i.params.call(r)):t.extend(u,i.params)),t.extend(u,{url:o,dataType:i.dataType,data:s,success:function(t){var e=i.results(t,l.page,l);l.callback(e)},error:function(t,e,i){var s={hasError:!0,jqXHR:t,textStatus:e,errorThrown:i};l.callback(s)}}),n=c.call(r,u)}),o)}}function b(e){var i,s,n=e,o=function(t){return""+t.text};t.isArray(n)&&(n={results:s=n}),!1===t.isFunction(n)&&(s=n,n=function(){return s});var a=n();return a.text&&(o=a.text,t.isFunction(o)||(i=a.text,o=function(t){return t[i]})),function(e){var i,s=e.term,a={results:[]};return""===s?void e.callback(n()):(i=function(n,a){var r,l;if((n=n[0]).children){for(l in r={},n)n.hasOwnProperty(l)&&(r[l]=n[l]);r.children=[],t(n.children).each2((function(t,e){i(e,r.children)})),(r.children.length||e.matcher(s,o(r),n))&&a.push(r)}else e.matcher(s,o(n),n)&&a.push(n)},t(n().results).each2((function(t,e){i(e,a.results)})),void e.callback(a))}}function w(i){var s=t.isFunction(i);return function(n){var o=n.term,a={results:[]},r=s?i(n):i;t.isArray(r)&&(t(r).each((function(){var t=this.text!==e,i=t?this.text:this;(""===o||n.matcher(o,i))&&a.results.push(t?this:{id:this,text:this})})),n.callback(a))}}function y(e,i){if(t.isFunction(e))return!0;if(!e)return!1;if("string"==typeof e)return!0;throw new Error(i+" must be a string, function, or falsy value")}function x(e,i){if(t.isFunction(e)){var s=Array.prototype.slice.call(arguments,2);return e.apply(i,s)}return e}function S(e){var i=0;return t.each(e,(function(t,e){e.children?i+=S(e.children):i++})),i}function C(){var e=this;t.each(arguments,(function(t,i){e[i].remove(),e[i]=null}))}function T(e,i){var s=function(){};return(s.prototype=new e).constructor=s,s.prototype.parent=e.prototype,s.prototype=t.extend(s.prototype,i),s}if(window.Select2===e){var k,E,O,A,I,_,N,j={x:0,y:0},M={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(t){switch(t=t.which?t.which:t){case M.LEFT:case M.RIGHT:case M.UP:case M.DOWN:return!0}return!1},isControl:function(t){switch(t.which){case M.SHIFT:case M.CTRL:case M.ALT:return!0}return!!t.metaKey},isFunctionKey:function(t){return(t=t.which?t.which:t)>=112&&123>=t}},P="<div class='select2-measure-scrollbar'></div>",D={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"};_=t(document),A=function(){var t=1;return function(){return t++}}(),k=T(Object,{bind:function(t){var e=this;return function(){t.apply(e,arguments)}},init:function(i){var s,o,a=".select2-results";this.opts=i=this.prepareOpts(i),this.id=i.id,i.element.data("select2")!==e&&null!==i.element.data("select2")&&i.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=t(".select2-hidden-accessible"),0==this.liveRegion.length&&(this.liveRegion=t("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body)),this.containerId="s2id_"+(i.element.attr("id")||"autogen"+A()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",i.element.attr("title")),this.body=t(document.body),f(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",i.element.attr("style")),this.container.css(x(i.containerCss,this.opts.element)),this.container.addClass(x(i.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",d),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),f(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(x(i.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",d),this.results=s=this.container.find(a),this.search=o=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",d),c(this.results),this.dropdown.on("mousemove-filtered",a,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",a,this.bind((function(t){this._touchEvent=!0,this.highlightUnderEvent(t)}))),this.dropdown.on("touchmove",a,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",a,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind((function(t){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())}))),function(t,e){var i=h(t,(function(t){e.trigger("scroll-debounced",t)}));e.on("scroll",(function(t){n(t.target,e.get())>=0&&i(t)}))}(80,this.results),this.dropdown.on("scroll-debounced",a,this.bind(this.loadMoreIfNeeded)),t(this.container).on("change",".select2-input",(function(t){t.stopPropagation()})),t(this.dropdown).on("change",".select2-input",(function(t){t.stopPropagation()})),t.fn.mousewheel&&s.mousewheel((function(t,e,i,n){var o=s.scrollTop();n>0&&0>=o-n?(s.scrollTop(0),d(t)):0>n&&s.get(0).scrollHeight-s.scrollTop()+n<=s.height()&&(s.scrollTop(s.get(0).scrollHeight-s.height()),d(t))})),l(o),o.on("keyup-change input paste",this.bind(this.updateResults)),o.on("focus",(function(){o.addClass("select2-focused")})),o.on("blur",(function(){o.removeClass("select2-focused")})),this.dropdown.on("mouseup",a,this.bind((function(e){t(e.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(e),this.selectHighlighted(e))}))),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",(function(t){t.stopPropagation()})),this.lastSearchTerm=e,t.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==i.maximumInputLength&&this.search.attr("maxlength",i.maximumInputLength);var r=i.element.prop("disabled");r===e&&(r=!1),this.enable(!r);var u=i.element.prop("readonly");u===e&&(u=!1),this.readonly(u),N=N||function(){var e=t(P);e.appendTo(document.body);var i={width:e.width()-e[0].clientWidth,height:e.height()-e[0].clientHeight};return e.remove(),i}(),this.autofocus=i.element.prop("autofocus"),i.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",i.searchInputPlaceholder)},destroy:function(){var t=this.opts.element,i=t.data("select2"),s=this;this.close(),t.length&&t[0].detachEvent&&s._sync&&t.each((function(){s._sync&&this.detachEvent("onpropertychange",s._sync)})),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,i!==e&&(i.container.remove(),i.liveRegion.remove(),i.dropdown.remove(),t.removeData("select2").off(".select2"),t.is("input[type='hidden']")?t.css("display",""):(t.show().prop("autofocus",this.autofocus||!1),this.elementTabIndex?t.attr({tabindex:this.elementTabIndex}):t.removeAttr("tabindex"),t.show())),C.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(t){return t.is("option")?{id:t.prop("value"),text:t.text(),element:t.get(),css:t.attr("class"),disabled:t.prop("disabled"),locked:o(t.attr("locked"),"locked")||o(t.data("locked"),!0)}:t.is("optgroup")?{text:t.attr("label"),children:[],element:t.get(),css:t.attr("class")}:void 0},prepareOpts:function(i){var s,n,r,l,c=this;if("select"===(s=i.element).get(0).tagName.toLowerCase()&&(this.select=n=i.element),n&&t.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],(function(){if(this in i)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")})),i.debug=i.debug||t.fn.select2.defaults.debug,i.debug&&console&&console.warn&&(null!=i.id&&console.warn("Select2: The `id` option has been removed in Select2 4.0.0, consider renaming your `id` property or mapping the property before your data makes it to Select2. You can read more at https://select2.github.io/announcements-4.0.html#changed-id"),null!=i.text&&console.warn("Select2: The `text` option has been removed in Select2 4.0.0, consider renaming your `text` property or mapping the property before your data makes it to Select2. You can read more at https://select2.github.io/announcements-4.0.html#changed-id"),null!=i.sortResults&&console.warn("Select2: the `sortResults` option has been renamed to `sorter` in Select2 4.0.0. "),null!=i.selectOnBlur&&console.warn("Select2: The `selectOnBlur` option has been renamed to `selectOnClose` in Select2 4.0.0."),null!=i.ajax&&null!=i.ajax.results&&console.warn("Select2: The `ajax.results` option has been renamed to `ajax.processResults` in Select2 4.0.0."),null!=i.formatNoResults&&console.warn("Select2: The `formatNoResults` option has been renamed to `language.noResults` in Select2 4.0.0."),null!=i.formatSearching&&console.warn("Select2: The `formatSearching` option has been renamed to `language.searching` in Select2 4.0.0."),null!=i.formatInputTooShort&&console.warn("Select2: The `formatInputTooShort` option has been renamed to `language.inputTooShort` in Select2 4.0.0."),null!=i.formatInputTooLong&&console.warn("Select2: The `formatInputTooLong` option has been renamed to `language.inputTooLong` in Select2 4.0.0."),null!=i.formatLoading&&console.warn("Select2: The `formatLoading` option has been renamed to `language.loadingMore` in Select2 4.0.0."),null!=i.formatSelectionTooBig&&console.warn("Select2: The `formatSelectionTooBig` option has been renamed to `language.maximumSelected` in Select2 4.0.0."),i.element.data("select2Tags")&&console.warn("Select2: The `data-select2-tags` attribute has been renamed to `data-tags` in Select2 4.0.0.")),null!=i.element.data("tags")){var h=i.element.data("tags");t.isArray(h)||(h=[]),i.element.data("select2Tags",h)}if(null!=i.sorter&&(i.sortResults=i.sorter),null!=i.selectOnClose&&(i.selectOnBlur=i.selectOnClose),null!=i.ajax&&t.isFunction(i.ajax.processResults)&&(i.ajax.results=i.ajax.processResults),null!=i.language){var u=i.language;t.isFunction(u.noMatches)&&(i.formatNoMatches=u.noMatches),t.isFunction(u.searching)&&(i.formatSearching=u.searching),t.isFunction(u.inputTooShort)&&(i.formatInputTooShort=u.inputTooShort),t.isFunction(u.inputTooLong)&&(i.formatInputTooLong=u.inputTooLong),t.isFunction(u.loadingMore)&&(i.formatLoading=u.loadingMore),t.isFunction(u.maximumSelected)&&(i.formatSelectionTooBig=u.maximumSelected)}if("function"!=typeof(i=t.extend({},{populateResults:function(s,n,o){var a,r=this.opts.id,l=this.liveRegion;(a=function(s,n,h){var u,d,p,f,m,g,v,b,w,y,x=[];for(u=0,d=(s=i.sortResults(s,n,o)).length;d>u;u+=1)f=!(m=!0===(p=s[u]).disabled)&&r(p)!==e,g=p.children&&p.children.length>0,(v=t("<li></li>")).addClass("select2-results-dept-"+h),v.addClass("select2-result"),v.addClass(f?"select2-result-selectable":"select2-result-unselectable"),m&&v.addClass("select2-disabled"),g&&v.addClass("select2-result-with-children"),v.addClass(c.opts.formatResultCssClass(p)),v.attr("role","presentation"),(b=t(document.createElement("div"))).addClass("select2-result-label"),b.attr("id","select2-result-label-"+A()),b.attr("role","option"),(y=i.formatResult(p,b,o,c.opts.escapeMarkup))!==e&&(b.html(y),v.append(b)),g&&((w=t("<ul></ul>")).addClass("select2-result-sub"),a(p.children,w,h+1),v.append(w)),v.data("select2-data",p),x.push(v[0]);n.append(x),l.text(i.formatMatches(s.length))})(n,s,0)}},t.fn.select2.defaults,i)).id&&(r=i.id,i.id=function(t){return t[r]}),t.isArray(i.element.data("select2Tags"))){if("tags"in i)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+i.element.attr("id");i.tags=i.element.data("select2Tags")}if(n?(i.query=this.bind((function(t){var i,n,o,a={results:[],more:!1},r=t.term;o=function(e,i){var s;e.is("option")?t.matcher(r,e.text(),e)&&i.push(c.optionToData(e)):e.is("optgroup")&&(s=c.optionToData(e),e.children().each2((function(t,e){o(e,s.children)})),s.children.length>0&&i.push(s))},i=s.children(),this.getPlaceholder()!==e&&i.length>0&&((n=this.getPlaceholderOption())&&(i=i.not(n))),i.each2((function(t,e){o(e,a.results)})),t.callback(a)})),i.id=function(t){return t.id}):"query"in i||("ajax"in i?((l=i.element.data("ajax-url"))&&l.length>0&&(i.ajax.url=l),i.query=v.call(i.element,i.ajax)):"data"in i?i.query=b(i.data):"tags"in i&&(i.query=w(i.tags),i.createSearchChoice===e&&(i.createSearchChoice=function(e){return{id:t.trim(e),text:t.trim(e)}}),i.initSelection===e&&(i.initSelection=function(e,s){var n=[];t(a(e.val(),i.separator,i.transformVal)).each((function(){var e={id:this,text:this},s=i.tags;t.isFunction(s)&&(s=s()),t(s).each((function(){return o(this.id,e.id)?(e=this,!1):void 0})),n.push(e)})),s(n)}))),"function"!=typeof i.query)throw"query function not defined for Select2 "+i.element.attr("id");if("top"===i.createSearchChoicePosition)i.createSearchChoicePosition=function(t,e){t.unshift(e)};else if("bottom"===i.createSearchChoicePosition)i.createSearchChoicePosition=function(t,e){t.push(e)};else if("function"!=typeof i.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return i},monitorSource:function(){var i,s=this.opts.element,n=this;s.on("change.select2",this.bind((function(t){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()}))),this._sync=this.bind((function(){var t=s.prop("disabled");t===e&&(t=!1),this.enable(!t);var i=s.prop("readonly");i===e&&(i=!1),this.readonly(i),this.container&&(f(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(x(this.opts.containerCssClass,this.opts.element))),this.dropdown&&(f(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(x(this.opts.dropdownCssClass,this.opts.element)))})),s.length&&s[0].attachEvent&&s.each((function(){this.attachEvent("onpropertychange",n._sync)})),(i=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)!==e&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new i((function(e){t.each(e,n._sync)})),this.propertyObserver.observe(s.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(e){var i=t.Event("select2-selecting",{val:this.id(e),object:e,choice:e});return this.opts.element.trigger(i),!i.isDefaultPrevented()},triggerChange:function(e){e=e||{},e=t.extend({},e,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(e),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var t=this._enabled&&!this._readonly,e=!t;return t!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",e),this.close(),this.enabledInterface=t,!0)},enable:function(t){t===e&&(t=!0),this._enabled!==t&&(this._enabled=t,this.opts.element.prop("disabled",!t),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(t){t===e&&(t=!1),this._readonly!==t&&(this._readonly=t,this.opts.element.prop("readonly",t),this.enableInterface())},opened:function(){return!!this.container&&this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var e,i,s,n,o,a=this.dropdown,r=this.container,l=r.offset(),c=r.outerHeight(!1),h=r.outerWidth(!1),u=a.outerHeight(!1),d=t(window),p=d.width(),f=d.height(),m=d.scrollLeft()+p,g=d.scrollTop()+f,v=l.top+c,b=l.left,w=g>=v+u,y=l.top-u>=d.scrollTop(),S=a.outerWidth(!1);a.hasClass("select2-drop-above")?(i=!0,!y&&w&&(s=!0,i=!1)):(i=!1,!w&&y&&(s=!0,i=!0)),s&&(a.hide(),l=this.container.offset(),c=this.container.outerHeight(!1),h=this.container.outerWidth(!1),u=a.outerHeight(!1),m=d.scrollLeft()+p,g=d.scrollTop()+f,v=l.top+c,b=l.left,S=a.outerWidth(!1),a.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(o=t(".select2-results",a)[0],a.addClass("select2-drop-auto-width"),a.css("width",""),(S=a.outerWidth(!1)+(o.scrollHeight===o.clientHeight?0:N.width))>h?h=S:S=h,u=a.outerHeight(!1)):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(v-=(e=this.body.offset()).top,b-=e.left),!(m>=b+S)&&l.left+m+r.outerWidth(!1)>S&&(b=l.left+this.container.outerWidth(!1)-S),n={left:b,width:h},i?(this.container.addClass("select2-drop-above"),a.addClass("select2-drop-above"),u=a.outerHeight(!1),n.top=l.top-u,n.bottom="auto"):(n.top=v,n.bottom="auto",this.container.removeClass("select2-drop-above"),a.removeClass("select2-drop-above")),n=t.extend(n,x(this.opts.dropdownCss,this.opts.element)),a.css(n)},shouldOpen:function(){var e;return!this.opened()&&(!1!==this._enabled&&!0!==this._readonly&&(e=t.Event("select2-opening"),this.opts.element.trigger(e),!e.isDefaultPrevented()))},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),_.on("mousemove.select2Event",(function(t){j.x=t.pageX,j.y=t.pageY})),!0)},opening:function(){var e,s=this.containerEventName,n="scroll."+s,o="resize."+s,a="orientationchange."+s;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),0===(e=t("#select2-drop-mask")).length&&((e=t(document.createElement("div"))).attr("id","select2-drop-mask").attr("class","select2-drop-mask"),e.hide(),e.appendTo(this.body),e.on("mousedown touchstart click",(function(s){i(e);var n,o=t("#select2-drop");o.length>0&&((n=o.data("select2")).opts.selectOnBlur&&n.selectHighlighted({noFocus:!0}),n.close(),s.preventDefault(),s.stopPropagation())}))),this.dropdown.prev()[0]!==e[0]&&this.dropdown.before(e),t("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),e.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var r=this;this.container.parents().add(window).each((function(){t(this).on(o+" "+n+" "+a,(function(t){r.opened()&&r.positionDropdown()}))}))},close:function(){if(this.opened()){var e=this.containerEventName,i="scroll."+e,s="resize."+e,n="orientationchange."+e;this.container.parents().add(window).each((function(){t(this).off(i).off(s).off(n)})),this.clearDropdownAlignmentPreference(),t("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),_.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.search.removeAttr("aria-activedescendant"),this.opts.element.trigger(t.Event("select2-close"))}},externalSearch:function(t){this.open(),this.search.val(t),this.updateResults(!1)},clearSearch:function(){},prefillNextSearchTerm:function(){if(""!==this.search.val())return!1;var t=this.opts.nextSearchTerm(this.data(),this.lastSearchTerm);return t!==e&&(this.search.val(t),this.search.select(),!0)},getMaximumSelectionSize:function(){return x(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var e,i,s,n,o,a,r,l,c=this.results;if(!(0>(i=this.highlight()))){if(0==i)return void c.scrollTop(0);e=this.findHighlightableChoices().find(".select2-result-label"),n=(l=((s=t(e[i])).offset()||{}).top||0)+s.outerHeight(!0),i===e.length-1&&((r=c.find("li.select2-more-results")).length>0&&(n=r.offset().top+r.outerHeight(!0))),n>(o=c.offset().top+c.outerHeight(!1))&&c.scrollTop(c.scrollTop()+(n-o)),0>(a=l-c.offset().top)&&"none"!=s.css("display")&&c.scrollTop(c.scrollTop()+a)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(e){for(var i=this.findHighlightableChoices(),s=this.highlight();s>-1&&s<i.length;){var n=t(i[s+=e]);if(n.hasClass("select2-result-selectable")&&!n.hasClass("select2-disabled")&&!n.hasClass("select2-selected")){this.highlight(s);break}}},highlight:function(e){var i,s,o=this.findHighlightableChoices();return 0===arguments.length?n(o.filter(".select2-highlighted")[0],o.get()):(e>=o.length&&(e=o.length-1),0>e&&(e=0),this.removeHighlight(),(i=t(o[e])).addClass("select2-highlighted"),this.search.attr("aria-activedescendant",i.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(i.text()),void((s=i.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(s),choice:s})))},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(e){var i=t(e.target).closest(".select2-result-selectable");if(i.length>0&&!i.is(".select2-highlighted")){var s=this.findHighlightableChoices();this.highlight(s.index(i))}else 0==i.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var t=this.results,e=t.find("li.select2-more-results"),i=this.resultsPage+1,s=this,n=this.search.val(),o=this.context;0!==e.length&&(e.offset().top-t.offset().top-t.height()<=this.opts.loadMorePadding&&(e.addClass("select2-active"),this.opts.query({element:this.opts.element,term:n,page:i,context:o,matcher:this.opts.matcher,callback:this.bind((function(a){s.opened()&&(s.opts.populateResults.call(this,t,a.results,{term:n,page:i,context:o}),s.postprocessResults(a,!1,!1),!0===a.more?(e.detach().appendTo(t).html(s.opts.escapeMarkup(x(s.opts.formatLoadMore,s.opts.element,i+1))),window.setTimeout((function(){s.loadMoreIfNeeded()}),10)):e.remove(),s.positionDropdown(),s.resultsPage=i,s.context=a.context,this.opts.element.trigger({type:"select2-loaded",items:a}))}))})))},tokenize:function(){},updateResults:function(i){function s(){c.removeClass("select2-active"),d.positionDropdown(),h.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?d.liveRegion.text(h.text()):d.liveRegion.text(d.opts.formatMatches(h.find('.select2-result-selectable:not(".select2-selected")').length))}function n(t){h.html(t),s()}var a,r,l,c=this.search,h=this.results,u=this.opts,d=this,p=c.val(),f=t.data(this.container,"select2-last-term");if((!0===i||!f||!o(p,f))&&(t.data(this.container,"select2-last-term",p),!0===i||!1!==this.showSearchInput&&this.opened())){l=++this.queryCount;var m=this.getMaximumSelectionSize();if(m>=1&&(a=this.data(),t.isArray(a)&&a.length>=m&&y(u.formatSelectionTooBig,"formatSelectionTooBig")))return void n("<li class='select2-selection-limit'>"+x(u.formatSelectionTooBig,u.element,m)+"</li>");if(c.val().length<u.minimumInputLength)return n(y(u.formatInputTooShort,"formatInputTooShort")?"<li class='select2-no-results'>"+x(u.formatInputTooShort,u.element,c.val(),u.minimumInputLength)+"</li>":""),void(i&&this.showSearch&&this.showSearch(!0));if(u.maximumInputLength&&c.val().length>u.maximumInputLength)return void n(y(u.formatInputTooLong,"formatInputTooLong")?"<li class='select2-no-results'>"+x(u.formatInputTooLong,u.element,c.val(),u.maximumInputLength)+"</li>":"");u.formatSearching&&0===this.findHighlightableChoices().length&&n("<li class='select2-searching'>"+x(u.formatSearching,u.element)+"</li>"),c.addClass("select2-active"),this.removeHighlight(),(r=this.tokenize())!=e&&null!=r&&c.val(r),this.resultsPage=1,u.query({element:u.element,term:c.val(),page:this.resultsPage,context:null,matcher:u.matcher,callback:this.bind((function(a){var r;if(l==this.queryCount){if(!this.opened())return void this.search.removeClass("select2-active");if(a.hasError!==e&&y(u.formatAjaxError,"formatAjaxError"))return void n("<li class='select2-ajax-error'>"+x(u.formatAjaxError,u.element,a.jqXHR,a.textStatus,a.errorThrown)+"</li>");if(this.context=a.context===e?null:a.context,this.opts.createSearchChoice&&""!==c.val()&&((r=this.opts.createSearchChoice.call(d,c.val(),a.results))!==e&&null!==r&&d.id(r)!==e&&null!==d.id(r)&&0===t(a.results).filter((function(){return o(d.id(this),d.id(r))})).length&&this.opts.createSearchChoicePosition(a.results,r)),0===a.results.length&&y(u.formatNoMatches,"formatNoMatches"))return n("<li class='select2-no-results'>"+x(u.formatNoMatches,u.element,c.val())+"</li>"),void(this.showSearch&&this.showSearch(c.val()));h.empty(),d.opts.populateResults.call(this,h,a.results,{term:c.val(),page:this.resultsPage,context:null}),!0===a.more&&y(u.formatLoadMore,"formatLoadMore")&&(h.append("<li class='select2-more-results'>"+u.escapeMarkup(x(u.formatLoadMore,u.element,this.resultsPage))+"</li>"),window.setTimeout((function(){d.loadMoreIfNeeded()}),10)),this.postprocessResults(a,i),s(),this.opts.element.trigger({type:"select2-loaded",items:a})}}))})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){!function(t){t[0]!==document.activeElement&&window.setTimeout((function(){var e,i=t[0],s=t.val().length;t.focus(),(i.offsetWidth>0||i.offsetHeight>0)&&i===document.activeElement&&(i.setSelectionRange?i.setSelectionRange(s,s):i.createTextRange&&((e=i.createTextRange()).collapse(!1),e.select()))}),0)}(this.search)},selectHighlighted:function(t){if(this._touchMoved)this.clearTouchMoved();else{var e=this.highlight(),i=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");i?(this.highlight(e),this.onSelect(i,t)):t&&t.noFocus&&this.close()}},getPlaceholder:function(){var t;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((t=this.getPlaceholderOption())!==e?t.text():e)},getPlaceholderOption:function(){if(this.select){var i=this.select.children("option").first();if(this.opts.placeholderOption!==e)return"first"===this.opts.placeholderOption&&i||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===t.trim(i.text())&&""===i.val())return i}},initContainerWidth:function(){var e=function(){var e,i,s,n,o;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if("string"==typeof(e=this.opts.element.attr("style")))for(n=0,o=(i=e.split(";")).length;o>n;n+=1)if(null!==(s=i[n].replace(/\s/g,"").match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&s.length>=1)return s[1];return"resolve"===this.opts.width?(e=this.opts.element.css("width")).indexOf("%")>0?e:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}return t.isFunction(this.opts.width)?this.opts.width():this.opts.width}.call(this);null!==e&&this.container.css("width",e)}}),E=T(k,{createContainer:function(){return t(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""))},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var e,i,s;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),(e=this.search.get(0)).createTextRange?((i=e.createTextRange()).collapse(!1),i.select()):e.setSelectionRange&&(s=this.search.val().length,e.setSelectionRange(s,s))),this.prefillNextSearchTerm(),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(t.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){t("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),C.call(this,"selection","focusser")},initContainer:function(){var e,s,n=this.container,o=this.dropdown,a=A();this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=e=n.find(".select2-choice"),this.focusser=n.find(".select2-focusser"),e.find(".select2-chosen").attr("id","select2-chosen-"+a),this.focusser.attr("aria-labelledby","select2-chosen-"+a),this.results.attr("id","select2-results-"+a),this.search.attr("aria-owns","select2-results-"+a),this.focusser.attr("id","s2id_autogen"+a),s=t("label[for='"+this.opts.element.attr("id")+"']"),this.opts.element.on("focus.select2",this.bind((function(){this.focus()}))),this.focusser.prev().text(s.text()).attr("for",this.focusser.attr("id"));var r=this.opts.element.attr("title");this.opts.element.attr("title",r||s.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(t("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind((function(t){if(this.isInterfaceEnabled()&&229!=t.keyCode){if(t.which===M.PAGE_UP||t.which===M.PAGE_DOWN)return void d(t);switch(t.which){case M.UP:case M.DOWN:return this.moveHighlight(t.which===M.UP?-1:1),void d(t);case M.ENTER:return this.selectHighlighted(),void d(t);case M.TAB:return void this.selectHighlighted({noFocus:!0});case M.ESC:return this.cancel(t),void d(t)}}}))),this.search.on("blur",this.bind((function(t){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind((function(){this.opened()&&this.results&&this.results.length>1&&this.search.focus()})),0)}))),this.focusser.on("keydown",this.bind((function(t){if(this.isInterfaceEnabled()&&t.which!==M.TAB&&!M.isControl(t)&&!M.isFunctionKey(t)&&t.which!==M.ESC){if(!1===this.opts.openOnEnter&&t.which===M.ENTER)return void d(t);if(t.which==M.DOWN||t.which==M.UP||t.which==M.ENTER&&this.opts.openOnEnter){if(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey)return;return this.open(),void d(t)}return t.which==M.DELETE||t.which==M.BACKSPACE?(this.opts.allowClear&&this.clear(),void d(t)):void 0}}))),l(this.focusser),this.focusser.on("keyup-change input",this.bind((function(t){if(this.opts.minimumResultsForSearch>=0){if(t.stopPropagation(),this.opened())return;this.open()}}))),e.on("mousedown touchstart","abbr",this.bind((function(t){this.isInterfaceEnabled()&&(this.clear(),function(t){t.preventDefault(),t.stopImmediatePropagation()}(t),this.close(),this.selection&&this.selection.focus())}))),e.on("mousedown touchstart",this.bind((function(s){i(e),this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),d(s)}))),o.on("mousedown touchstart",this.bind((function(){this.opts.shouldFocusInput(this)&&this.search.focus()}))),e.on("focus",this.bind((function(t){d(t)}))),this.focusser.on("focus",this.bind((function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active")}))).on("blur",this.bind((function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(t.Event("select2-blur")))}))),this.search.on("focus",this.bind((function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active")}))),this.initContainerWidth(),this.opts.element.hide(),this.setPlaceholder()},clear:function(e){var i=this.selection.data("select2-data");if(i){var s=t.Event("select2-clearing");if(this.opts.element.trigger(s),s.isDefaultPrevented())return;var n=this.getPlaceholderOption();this.opts.element.val(n?n.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==e&&(this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var t=this;this.opts.initSelection.call(null,this.opts.element,(function(i){i!==e&&null!==i&&(t.updateSelection(i),t.close(),t.setPlaceholder(),t.lastSearchTerm=t.search.val())}))}},isPlaceholderOptionSelected:function(){var t;return this.getPlaceholder()!==e&&((t=this.getPlaceholderOption())!==e&&t.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===e||null===this.opts.element.val())},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(t,e){var s=t.find("option").filter((function(){return this.selected&&!this.disabled}));e(i.optionToData(s))}:"data"in e&&(e.initSelection=e.initSelection||function(i,s){var n=i.val(),a=null;e.query({matcher:function(t,i,s){var r=o(n,e.id(s));return r&&(a=s),r},callback:t.isFunction(s)?function(){s(a)}:t.noop})}),e},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===e?e:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var t=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&t!==e){if(this.select&&this.getPlaceholderOption()===e)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(t)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(t,e,i){var s=0,n=this;if(this.findHighlightableChoices().each2((function(t,e){return o(n.id(e.data("select2-data")),n.opts.element.val())?(s=t,!1):void 0})),!1!==i&&(!0===e&&s>=0?this.highlight(s):this.highlight(0)),!0===e){var a=this.opts.minimumResultsForSearch;a>=0&&this.showSearch(S(t.results)>=a)}},showSearch:function(e){this.showSearchInput!==e&&(this.showSearchInput=e,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!e),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!e),t(this.dropdown,this.container).toggleClass("select2-with-searchbox",e))},onSelect:function(t,e){if(this.triggerSelect(t)){var i=this.opts.element.val(),s=this.data();this.opts.element.val(this.id(t)),this.updateSelection(t),this.opts.element.trigger({type:"select2-selected",val:this.id(t),choice:t}),this.lastSearchTerm=this.search.val(),this.close(),e&&e.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),o(i,this.id(t))||this.triggerChange({added:t,removed:s})}},updateSelection:function(t){var i,s,n=this.selection.find(".select2-chosen");this.selection.data("select2-data",t),n.empty(),null!==t&&(i=this.opts.formatSelection(t,n,this.opts.escapeMarkup)),i!==e&&n.append(i),(s=this.opts.formatSelectionCssClass(t,n))!==e&&n.addClass(s),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==e&&this.container.addClass("select2-allowclear")},val:function(){var t,i=!1,s=null,n=this,o=this.data();if(0===arguments.length)return this.opts.element.val();if(t=arguments[0],arguments.length>1&&(i=arguments[1],this.opts.debug&&console&&console.warn&&console.warn('Select2: The second option to `select2("val")` is not supported in Select2 4.0.0. The `change` event will always be triggered in 4.0.0.')),this.select)this.opts.debug&&console&&console.warn&&console.warn('Select2: Setting the value on a <select> using `select2("val")` is no longer supported in 4.0.0. You can use the `.val(newValue).trigger("change")` method provided by jQuery instead.'),this.select.val(t).find("option").filter((function(){return this.selected})).each2((function(t,e){return s=n.optionToData(e),!1})),this.updateSelection(s),this.setPlaceholder(),i&&this.triggerChange({added:s,removed:o});else{if(!t&&0!==t)return void this.clear(i);if(this.opts.initSelection===e)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(t),this.opts.initSelection(this.opts.element,(function(t){n.opts.element.val(t?n.id(t):""),n.updateSelection(t),n.setPlaceholder(),i&&n.triggerChange({added:t,removed:o})}))}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(t){var i,s=!1;return 0===arguments.length?((i=this.selection.data("select2-data"))==e&&(i=null),i):(this.opts.debug&&console&&console.warn&&console.warn('Select2: The `select2("data")` method can no longer set selected values in 4.0.0, consider using the `.val()` method instead.'),arguments.length>1&&(s=arguments[1]),void(t?(i=this.data(),this.opts.element.val(t?this.id(t):""),this.updateSelection(t),s&&this.triggerChange({added:t,removed:i})):this.clear(s)))}}),O=T(k,{createContainer:function(){return t(document.createElement("div")).attr({class:"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(t,e){var s=[];t.find("option").filter((function(){return this.selected&&!this.disabled})).each2((function(t,e){s.push(i.optionToData(e))})),e(s)}:"data"in e&&(e.initSelection=e.initSelection||function(i,s){var n=a(i.val(),e.separator,e.transformVal),r=[];e.query({matcher:function(i,s,a){var l=t.grep(n,(function(t){return o(t,e.id(a))})).length;return l&&r.push(a),l},callback:t.isFunction(s)?function(){for(var t=[],i=0;i<n.length;i++)for(var a=n[i],l=0;l<r.length;l++){var c=r[l];if(o(a,e.id(c))){t.push(c),r.splice(l,1);break}}s(t)}:t.noop})}),e},selectChoice:function(t){var e=this.container.find(".select2-search-choice-focus");e.length&&t&&t[0]==e[0]||(e.length&&this.opts.element.trigger("choice-deselected",e),e.removeClass("select2-search-choice-focus"),t&&t.length&&(this.close(),t.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",t)))},destroy:function(){t("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),C.call(this,"searchContainer","selection")},initContainer:function(){var e,i=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=e=this.container.find(i);var s=this;this.selection.on("click",".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)",(function(e){s.search[0].focus(),s.selectChoice(t(this))})),this.search.attr("id","s2id_autogen"+A()),this.search.prev().text(t("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.opts.element.on("focus.select2",this.bind((function(){this.focus()}))),this.search.on("input paste",this.bind((function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())}))),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind((function(t){if(this.isInterfaceEnabled()){++this.keydowns;var i=e.find(".select2-search-choice-focus"),s=i.prev(".select2-search-choice:not(.select2-locked)"),n=i.next(".select2-search-choice:not(.select2-locked)"),o=u(this.search);if(i.length&&(t.which==M.LEFT||t.which==M.RIGHT||t.which==M.BACKSPACE||t.which==M.DELETE||t.which==M.ENTER)){var a=i;return t.which==M.LEFT&&s.length?a=s:t.which==M.RIGHT?a=n.length?n:null:t.which===M.BACKSPACE?this.unselect(i.first())&&(this.search.width(10),a=s.length?s:n):t.which==M.DELETE?this.unselect(i.first())&&(this.search.width(10),a=n.length?n:null):t.which==M.ENTER&&(a=null),this.selectChoice(a),d(t),void(a&&a.length||this.open())}if((t.which===M.BACKSPACE&&1==this.keydowns||t.which==M.LEFT)&&0==o.offset&&!o.length)return this.selectChoice(e.find(".select2-search-choice:not(.select2-locked)").last()),void d(t);if(this.selectChoice(null),this.opened())switch(t.which){case M.UP:case M.DOWN:return this.moveHighlight(t.which===M.UP?-1:1),void d(t);case M.ENTER:return this.selectHighlighted(),void d(t);case M.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case M.ESC:return this.cancel(t),void d(t)}if(t.which!==M.TAB&&!M.isControl(t)&&!M.isFunctionKey(t)&&t.which!==M.BACKSPACE&&t.which!==M.ESC){if(t.which===M.ENTER){if(!1===this.opts.openOnEnter)return;if(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey)return}this.open(),(t.which===M.PAGE_UP||t.which===M.PAGE_DOWN)&&d(t),t.which===M.ENTER&&d(t)}}}))),this.search.on("keyup",this.bind((function(t){this.keydowns=0,this.resizeSearch()}))),this.search.on("blur",this.bind((function(e){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),e.stopImmediatePropagation(),this.opts.element.trigger(t.Event("select2-blur"))}))),this.container.on("click",i,this.bind((function(e){this.isInterfaceEnabled()&&(t(e.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.open(),this.focusSearch(),e.preventDefault()))}))),this.container.on("focus",i,this.bind((function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())}))),this.initContainerWidth(),this.opts.element.hide(),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var t=this;this.opts.initSelection.call(null,this.opts.element,(function(i){i!==e&&null!==i&&(t.updateSelection(i),t.close(),t.clearSearch())}))}},clearSearch:function(){var t=this.getPlaceholder(),i=this.getMaxSearchWidth();t!==e&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(t).addClass("select2-default"),this.search.width(i>0?i:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.prefillNextSearchTerm(),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(t.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(e){var i={},s=[],n=this;t(e).each((function(){n.id(this)in i||(i[n.id(this)]=0,s.push(this))})),this.selection.find(".select2-search-choice").remove(),this.addSelectedChoice(s),n.postprocessResults()},tokenize:function(){var t=this.search.val();null!=(t=this.opts.tokenizer.call(this,t,this.data(),this.bind(this.onSelect),this.opts))&&t!=e&&(this.search.val(t),t.length>0&&this.open())},onSelect:function(t,e){this.triggerSelect(t)&&""!==t.text&&(this.addSelectedChoice(t),this.opts.element.trigger({type:"selected",val:this.id(t),choice:t}),this.lastSearchTerm=this.search.val(),this.clearSearch(),this.updateResults(),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(t,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.prefillNextSearchTerm()&&this.updateResults(),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:t}),e&&e.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(e){var i=this.getVal(),s=this;t(e).each((function(){i.push(s.createChoice(this))})),this.setVal(i)},createChoice:function(i){var s,n,o=!i.locked,a=t("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),r=t("<li class='select2-search-choice select2-locked'><div></div></li>"),l=o?a:r,c=this.id(i);return(s=this.opts.formatSelection(i,l.find("div"),this.opts.escapeMarkup))!=e&&l.find("div").replaceWith(t("<div></div>").html(s)),(n=this.opts.formatSelectionCssClass(i,l.find("div")))!=e&&l.addClass(n),o&&l.find(".select2-search-choice-close").on("mousedown",d).on("click dblclick",this.bind((function(e){this.isInterfaceEnabled()&&(this.unselect(t(e.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),d(e),this.close(),this.focusSearch())}))).on("focus",this.bind((function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))}))),l.data("select2-data",i),l.insertBefore(this.searchContainer),c},unselect:function(e){var i,s,o=this.getVal();if(0===(e=e.closest(".select2-search-choice")).length)throw"Invalid argument: "+e+". Must be .select2-search-choice";if(i=e.data("select2-data")){var a=t.Event("select2-removing");if(a.val=this.id(i),a.choice=i,this.opts.element.trigger(a),a.isDefaultPrevented())return!1;for(;(s=n(this.id(i),o))>=0;)o.splice(s,1),this.setVal(o),this.select&&this.postprocessResults();return e.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}),!0}},postprocessResults:function(t,e,i){var s=this.getVal(),o=this.results.find(".select2-result"),a=this.results.find(".select2-result-with-children"),r=this;o.each2((function(t,e){n(r.id(e.data("select2-data")),s)>=0&&(e.addClass("select2-selected"),e.find(".select2-result-selectable").addClass("select2-selected"))})),a.each2((function(t,e){e.is(".select2-result-selectable")||0!==e.find(".select2-result-selectable:not(.select2-selected)").length||e.addClass("select2-selected")})),-1==this.highlight()&&!1!==i&&!0===this.opts.closeOnSelect&&r.highlight(0),!this.opts.createSearchChoice&&!o.filter(".select2-result:not(.select2-selected)").length>0&&(!t||t&&!t.more&&0===this.results.find(".select2-no-results").length)&&y(r.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+x(r.opts.formatNoMatches,r.opts.element,r.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-r(this.search)},resizeSearch:function(){var t,e,i,s,n=r(this.search);t=p(this.search)+10,e=this.search.offset().left,t>(s=(i=this.selection.width())-(e-this.selection.offset().left)-n)&&(s=i-n),40>s&&(s=i-n),0>=s&&(s=t),this.search.width(Math.floor(s))},getVal:function(){var t;return this.select?null===(t=this.select.val())?[]:t:a(t=this.opts.element.val(),this.opts.separator,this.opts.transformVal)},setVal:function(e){if(this.select)this.select.val(e);else{var i=[],s={};t(e).each((function(){this in s||(i.push(this),s[this]=0)})),this.opts.element.val(0===i.length?"":i.join(this.opts.separator))}},buildChangeDetails:function(t,e){e=e.slice(0),t=t.slice(0);for(var i=0;i<e.length;i++)for(var s=0;s<t.length;s++)if(o(this.opts.id(e[i]),this.opts.id(t[s]))){e.splice(i,1),i--,t.splice(s,1);break}return{added:e,removed:t}},val:function(i,s){var n,o=this;if(0===arguments.length)return this.getVal();if((n=this.data()).length||(n=[]),!i&&0!==i)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(s&&this.triggerChange({added:this.data(),removed:n}));if(this.setVal(i),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),s&&this.triggerChange(this.buildChangeDetails(n,this.data()));else{if(this.opts.initSelection===e)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,(function(e){var i=t.map(e,o.id);o.setVal(i),o.updateSelection(e),o.clearSearch(),s&&o.triggerChange(o.buildChangeDetails(n,o.data()))}))}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var e=[],i=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each((function(){e.push(i.opts.id(t(this).data("select2-data")))})),this.setVal(e),this.triggerChange()},data:function(e,i){var s,n,o=this;return 0===arguments.length?this.selection.children(".select2-search-choice").map((function(){return t(this).data("select2-data")})).get():(n=this.data(),e||(e=[]),s=t.map(e,(function(t){return o.opts.id(t)})),this.setVal(s),this.updateSelection(e),this.clearSearch(),void(i&&this.triggerChange(this.buildChangeDetails(n,this.data()))))}}),t.fn.select2=function(){var i,s,o,a,r,l=Array.prototype.slice.call(arguments,0),c=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],h=["opened","isFocused","container","dropdown"],u=["val","data"],d={search:"externalSearch"};return this.each((function(){if(0===l.length||"object"==typeof l[0])(i=0===l.length?{}:t.extend({},l[0])).element=t(this),"select"===i.element.get(0).tagName.toLowerCase()?r=i.element.prop("multiple"):(r=i.multiple||!1,"tags"in i&&(i.multiple=r=!0)),(s=r?new window.Select2.class.multi:new window.Select2.class.single).init(i);else{if("string"!=typeof l[0])throw"Invalid arguments to select2 plugin: "+l;if(n(l[0],c)<0)throw"Unknown method: "+l[0];if(a=e,(s=t(this).data("select2"))===e)return;if("container"===(o=l[0])?a=s.container:"dropdown"===o?a=s.dropdown:(d[o]&&(o=d[o]),a=s[o].apply(s,l.slice(1))),n(l[0],h)>=0||n(l[0],u)>=0&&1==l.length)return!1}})),a===e?this:a},t.fn.select2.defaults={debug:!1,width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(t,e,i,s){var n=[];return m(this.text(t),i.term,n,s),n.join("")},transformVal:function(e){return t.trim(e)},formatSelection:function(t,i,s){return t?s(this.text(t)):e},sortResults:function(t,e,i){return t},formatResultCssClass:function(t){return t.css},formatSelectionCssClass:function(t,i){return e},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(t){return t==e?null:t.id},text:function(e){return e&&this.data&&this.data.text?t.isFunction(this.data.text)?this.data.text(e):e[this.data.text]:e.text},matcher:function(t,e){return s(""+e).toUpperCase().indexOf(s(""+t).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:function(t,i,s,n){var a,r,l,c,h,u=t,d=!1;if(!n.createSearchChoice||!n.tokenSeparators||n.tokenSeparators.length<1)return e;for(;;){for(r=-1,l=0,c=n.tokenSeparators.length;c>l&&(h=n.tokenSeparators[l],!((r=t.indexOf(h))>=0));l++);if(0>r)break;if(a=t.substring(0,r),t=t.substring(r+h.length),a.length>0&&((a=n.createSearchChoice.call(this,a,i))!==e&&null!==a&&n.id(a)!==e&&null!==n.id(a))){for(d=!1,l=0,c=i.length;c>l;l++)if(o(n.id(a),n.id(i[l]))){d=!0;break}d||s(a)}}return u!==t?t:void 0},escapeMarkup:g,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(t){return t},adaptDropdownCssClass:function(t){return null},nextSearchTerm:function(t,i){return e},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(t){return!(("ontouchstart"in window||navigator.msMaxTouchPoints>0)&&t.opts.minimumResultsForSearch<0)}},t.fn.select2.locales=[],t.fn.select2.locales.en={formatMatches:function(t){return 1===t?"One result is available, press enter to select it.":t+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(t,e,i){return"Loading failed"},formatInputTooShort:function(t,e){var i=e-t.length;return"Please enter "+i+" or more character"+(1==i?"":"s")},formatInputTooLong:function(t,e){var i=t.length-e;return"Please delete "+i+" character"+(1==i?"":"s")},formatSelectionTooBig:function(t){return"You can only select "+t+" item"+(1==t?"":"s")},formatLoadMore:function(t){return"Loading more results…"},formatSearching:function(){return"Searching…"}},t.extend(t.fn.select2.defaults,t.fn.select2.locales.en),t.fn.select2.ajaxDefaults={transport:t.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:v,local:b,tags:w},util:{debounce:h,markMatch:m,escapeMarkup:g,stripDiacritics:s},class:{abstract:k,single:E,multi:O}}}}(n)},80:function(t,e,i){var s,n;s=[i(0),i(41)],void 0===(n=function(t,e){"use strict";return e.extend({name:"backdrop",trigger:".pat-backdrop",parser:"mockup",defaults:{zIndex:null,opacity:.8,className:"plone-backdrop",classActiveName:"plone-backdrop-active",closeOnEsc:!0,closeOnClick:!0},init:function(){var e=this;e.$backdrop=t("> ."+e.options.className,e.$el),0===e.$backdrop.size()&&(e.$backdrop=t("<div/>").hide().appendTo(e.$el).addClass(e.options.className),null!==e.options.zIndex&&e.$backdrop.css("z-index",e.options.zIndex)),!0===e.options.closeOnEsc&&t(document).on("keydown",(function(t,i){e.$el.is("."+e.options.classActiveName)&&27===t.keyCode&&e.hide()})),!0===e.options.closeOnClick&&e.$backdrop.on("click",(function(){e.$el.is("."+e.options.classActiveName)&&e.hide()}))},show:function(){this.$el.hasClass(this.options.classActiveName)||(this.emit("show"),this.$backdrop.css("opacity","0").show(),this.$el.addClass(this.options.classActiveName),this.$backdrop.animate({opacity:this.options.opacity},500),this.emit("shown"))},hide:function(){this.$el.hasClass(this.options.classActiveName)&&(this.emit("hide"),this.$backdrop.animate({opacity:"0"},500).hide(),this.$el.removeClass(this.options.classActiveName),this.emit("hidden"))}})}.apply(e,s))||(t.exports=n)},81:function(t,e,i){var s,n,o;!function(a){"use strict";n=[i(0)],void 0===(o="function"==typeof(s=function(t){var e={};e.fileapi=void 0!==t("<input type='file'/>").get(0).files,e.formdata=void 0!==window.FormData;var i=!!t.fn.prop;function s(e){var i=e.data;e.isDefaultPrevented()||(e.preventDefault(),t(e.target).ajaxSubmit(i))}function n(e){var i=e.target,s=t(i);if(!s.is("[type=submit],[type=image]")){var n=s.closest("[type=submit]");if(0===n.length)return;i=n[0]}var o=this;if(o.clk=i,"image"==i.type)if(void 0!==e.offsetX)o.clk_x=e.offsetX,o.clk_y=e.offsetY;else if("function"==typeof t.fn.offset){var a=s.offset();o.clk_x=e.pageX-a.left,o.clk_y=e.pageY-a.top}else o.clk_x=e.pageX-i.offsetLeft,o.clk_y=e.pageY-i.offsetTop;setTimeout((function(){o.clk=o.clk_x=o.clk_y=null}),100)}function o(){if(t.fn.ajaxSubmit.debug){var e="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e)}}t.fn.attr2=function(){if(!i)return this.attr.apply(this,arguments);var t=this.prop.apply(this,arguments);return t&&t.jquery||"string"==typeof t?t:this.attr.apply(this,arguments)},t.fn.ajaxSubmit=function(s){if(!this.length)return o("ajaxSubmit: skipping submit process - no element selected"),this;var n,a,r,l=this;"function"==typeof s?s={success:s}:void 0===s&&(s={}),n=s.type||this.attr2("method"),(r=(r="string"==typeof(a=s.url||this.attr2("action"))?t.trim(a):"")||window.location.href||"")&&(r=(r.match(/^([^#]+)/)||[])[1]),s=t.extend(!0,{url:r,success:t.ajaxSettings.success,type:n||t.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},s);var c={};if(this.trigger("form-pre-serialize",[this,s,c]),c.veto)return o("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(s.beforeSerialize&&!1===s.beforeSerialize(this,s))return o("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var h=s.traditional;void 0===h&&(h=t.ajaxSettings.traditional);var u,d=[],p=this.formToArray(s.semantic,d);if(s.data&&(s.extraData=s.data,u=t.param(s.data,h)),s.beforeSubmit&&!1===s.beforeSubmit(p,this,s))return o("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[p,this,s,c]),c.veto)return o("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var f=t.param(p,h);u&&(f=f?f+"&"+u:u),"GET"==s.type.toUpperCase()?(s.url+=(s.url.indexOf("?")>=0?"&":"?")+f,s.data=null):s.data=f;var m=[];if(s.resetForm&&m.push((function(){l.resetForm()})),s.clearForm&&m.push((function(){l.clearForm(s.includeHidden)})),!s.dataType&&s.target){var g=s.success||function(){};m.push((function(e){var i=s.replaceTarget?"replaceWith":"html";t(s.target)[i](e).each(g,arguments)}))}else s.success&&m.push(s.success);if(s.success=function(t,e,i){for(var n=s.context||this,o=0,a=m.length;o<a;o++)m[o].apply(n,[t,e,i||l,l])},s.error){var v=s.error;s.error=function(t,e,i){var n=s.context||this;v.apply(n,[t,e,i,l])}}if(s.complete){var b=s.complete;s.complete=function(t,e){var i=s.context||this;b.apply(i,[t,e,l])}}var w=t("input[type=file]:enabled",this).filter((function(){return""!==t(this).val()})).length>0,y="multipart/form-data",x=l.attr("enctype")==y||l.attr("encoding")==y,S=e.fileapi&&e.formdata;o("fileAPI :"+S);var C,T=(w||x)&&!S;!1!==s.iframe&&(s.iframe||T)?s.closeKeepAlive?t.get(s.closeKeepAlive,(function(){C=E(p)})):C=E(p):C=(w||x)&&S?function(e){for(var i=new FormData,o=0;o<e.length;o++)i.append(e[o].name,e[o].value);if(s.extraData){var a=function(e){var i,n,o=t.param(e,s.traditional).split("&"),a=o.length,r=[];for(i=0;i<a;i++)o[i]=o[i].replace(/\+/g," "),n=o[i].split("="),r.push([decodeURIComponent(n[0]),decodeURIComponent(n[1])]);return r}(s.extraData);for(o=0;o<a.length;o++)a[o]&&i.append(a[o][0],a[o][1])}s.data=null;var r=t.extend(!0,{},t.ajaxSettings,s,{contentType:!1,processData:!1,cache:!1,type:n||"POST"});s.uploadProgress&&(r.xhr=function(){var e=t.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",(function(t){var e=0,i=t.loaded||t.position,n=t.total;t.lengthComputable&&(e=Math.ceil(i/n*100)),s.uploadProgress(t,i,n,e)}),!1),e});r.data=null;var l=r.beforeSend;return r.beforeSend=function(t,e){s.formData?e.data=s.formData:e.data=i,l&&l.call(this,t,e)},t.ajax(r)}(p):t.ajax(s),l.removeData("jqxhr").data("jqxhr",C);for(var k=0;k<d.length;k++)d[k]=null;return this.trigger("form-submit-notify",[this,s]),this;function E(e){var a,r,c,h,u,p,f,m,g,v,b,w,y=l[0],x=t.Deferred();if(x.abort=function(t){m.abort(t)},e)for(r=0;r<d.length;r++)a=t(d[r]),i?a.prop("disabled",!1):a.removeAttr("disabled");if((c=t.extend(!0,{},t.ajaxSettings,s)).context=c.context||c,u="jqFormIO"+(new Date).getTime(),c.iframeTarget?(v=(p=t(c.iframeTarget)).attr2("name"))?u=v:p.attr2("name",u):(p=t('<iframe name="'+u+'" src="'+c.iframeSrc+'" />')).css({position:"absolute",top:"-1000px",left:"-1000px"}),f=p[0],m={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(e){var i="timeout"===e?"timeout":"aborted";o("aborting upload... "+i),this.aborted=1;try{f.contentWindow.document.execCommand&&f.contentWindow.document.execCommand("Stop")}catch(t){}p.attr("src",c.iframeSrc),m.error=i,c.error&&c.error.call(c.context,m,i,e),h&&t.event.trigger("ajaxError",[m,c,i]),c.complete&&c.complete.call(c.context,m,i)}},(h=c.global)&&0==t.active++&&t.event.trigger("ajaxStart"),h&&t.event.trigger("ajaxSend",[m,c]),c.beforeSend&&!1===c.beforeSend.call(c.context,m,c))return c.global&&t.active--,x.reject(),x;if(m.aborted)return x.reject(),x;(g=y.clk)&&(v=g.name)&&!g.disabled&&(c.extraData=c.extraData||{},c.extraData[v]=g.value,"image"==g.type&&(c.extraData[v+".x"]=y.clk_x,c.extraData[v+".y"]=y.clk_y));function S(t){var e=null;try{t.contentWindow&&(e=t.contentWindow.document)}catch(t){o("cannot get iframe.contentWindow document: "+t)}if(e)return e;try{e=t.contentDocument?t.contentDocument:t.document}catch(i){o("cannot get iframe.contentDocument: "+i),e=t.document}return e}var C=t("meta[name=csrf-token]").attr("content"),T=t("meta[name=csrf-param]").attr("content");function k(){var e=l.attr2("target"),i=l.attr2("action"),s=l.attr("enctype")||l.attr("encoding")||"multipart/form-data";y.setAttribute("target",u),n&&!/post/i.test(n)||y.setAttribute("method","POST"),i!=c.url&&y.setAttribute("action",c.url),c.skipEncodingOverride||n&&!/post/i.test(n)||l.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),c.timeout&&(w=setTimeout((function(){b=!0,_(1)}),c.timeout));var a=[];try{if(c.extraData)for(var r in c.extraData)c.extraData.hasOwnProperty(r)&&(t.isPlainObject(c.extraData[r])&&c.extraData[r].hasOwnProperty("name")&&c.extraData[r].hasOwnProperty("value")?a.push(t('<input type="hidden" name="'+c.extraData[r].name+'">').val(c.extraData[r].value).appendTo(y)[0]):a.push(t('<input type="hidden" name="'+r+'">').val(c.extraData[r]).appendTo(y)[0]));c.iframeTarget||p.appendTo("body"),f.attachEvent?f.attachEvent("onload",_):f.addEventListener("load",_,!1),setTimeout((function t(){try{var e=S(f).readyState;o("state = "+e),e&&"uninitialized"==e.toLowerCase()&&setTimeout(t,50)}catch(t){o("Server abort: ",t," (",t.name,")"),_(2),w&&clearTimeout(w),w=void 0}}),15);try{y.submit()}catch(t){document.createElement("form").submit.apply(y)}}finally{y.setAttribute("action",i),y.setAttribute("enctype",s),e?y.setAttribute("target",e):l.removeAttr("target"),t(a).remove()}}T&&C&&(c.extraData=c.extraData||{},c.extraData[T]=C),c.forceSync?k():setTimeout(k,10);var E,O,A,I=50;function _(e){if(!m.aborted&&!A){if((O=S(f))||(o("cannot access response document"),e=2),1===e&&m)return m.abort("timeout"),void x.reject(m,"timeout");if(2==e&&m)return m.abort("server abort"),void x.reject(m,"error","server abort");if(O&&O.location.href!=c.iframeSrc||b){f.detachEvent?f.detachEvent("onload",_):f.removeEventListener("load",_,!1);var i,s="success";try{if(b)throw"timeout";var n="xml"==c.dataType||O.XMLDocument||t.isXMLDoc(O);if(o("isXml="+n),!n&&window.opera&&(null===O.body||!O.body.innerHTML)&&--I)return o("requeing onLoad callback, DOM not available"),void setTimeout(_,250);var a=O.body?O.body:O.documentElement;m.responseText=a?a.innerHTML:null,m.responseXML=O.XMLDocument?O.XMLDocument:O,n&&(c.dataType="xml"),m.getResponseHeader=function(t){return{"content-type":c.dataType}[t.toLowerCase()]},a&&(m.status=Number(a.getAttribute("status"))||m.status,m.statusText=a.getAttribute("statusText")||m.statusText);var r=(c.dataType||"").toLowerCase(),l=/(json|script|text)/.test(r);if(l||c.textarea){var u=O.getElementsByTagName("textarea")[0];if(u)m.responseText=u.value,m.status=Number(u.getAttribute("status"))||m.status,m.statusText=u.getAttribute("statusText")||m.statusText;else if(l){var d=O.getElementsByTagName("pre")[0],g=O.getElementsByTagName("body")[0];d?m.responseText=d.textContent?d.textContent:d.innerText:g&&(m.responseText=g.textContent?g.textContent:g.innerText)}}else"xml"==r&&!m.responseXML&&m.responseText&&(m.responseXML=N(m.responseText));try{E=M(m,r,c)}catch(t){s="parsererror",m.error=i=t||s}}catch(t){o("error caught: ",t),s="error",m.error=i=t||s}m.aborted&&(o("upload aborted"),s=null),m.status&&(s=m.status>=200&&m.status<300||304===m.status?"success":"error"),"success"===s?(c.success&&c.success.call(c.context,E,"success",m),x.resolve(m.responseText,"success",m),h&&t.event.trigger("ajaxSuccess",[m,c])):s&&(void 0===i&&(i=m.statusText),c.error&&c.error.call(c.context,m,s,i),x.reject(m,"error",i),h&&t.event.trigger("ajaxError",[m,c,i])),h&&t.event.trigger("ajaxComplete",[m,c]),h&&!--t.active&&t.event.trigger("ajaxStop"),c.complete&&c.complete.call(c.context,m,s),A=!0,c.timeout&&clearTimeout(w),setTimeout((function(){c.iframeTarget?p.attr("src",c.iframeSrc):p.remove(),m.responseXML=null}),100)}}}var N=t.parseXML||function(t,e){return window.ActiveXObject?((e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t)):e=(new DOMParser).parseFromString(t,"text/xml"),e&&e.documentElement&&"parsererror"!=e.documentElement.nodeName?e:null},j=t.parseJSON||function(t){return window.eval("("+t+")")},M=function(e,i,s){var n=e.getResponseHeader("content-type")||"",o="xml"===i||!i&&n.indexOf("xml")>=0,a=o?e.responseXML:e.responseText;return o&&"parsererror"===a.documentElement.nodeName&&t.error&&t.error("parsererror"),s&&s.dataFilter&&(a=s.dataFilter(a,i)),"string"==typeof a&&("json"===i||!i&&n.indexOf("json")>=0?a=j(a):("script"===i||!i&&n.indexOf("javascript")>=0)&&t.globalEval(a)),a};return x}},t.fn.ajaxForm=function(e){if((e=e||{}).delegation=e.delegation&&t.isFunction(t.fn.on),!e.delegation&&0===this.length){var i={s:this.selector,c:this.context};return!t.isReady&&i.s?(o("DOM not ready, queuing ajaxForm"),t((function(){t(i.s,i.c).ajaxForm(e)})),this):(o("terminating; zero elements found by selector"+(t.isReady?"":" (DOM not ready)")),this)}return e.delegation?(t(document).off("submit.form-plugin",this.selector,s).off("click.form-plugin",this.selector,n).on("submit.form-plugin",this.selector,e,s).on("click.form-plugin",this.selector,e,n),this):this.ajaxFormUnbind().bind("submit.form-plugin",e,s).bind("click.form-plugin",e,n)},t.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},t.fn.formToArray=function(i,s){var n=[];if(0===this.length)return n;var o,a,r,l,c,h,u,d,p=this[0],f=this.attr("id"),m=i?p.getElementsByTagName("*"):p.elements;if(m&&!/MSIE [678]/.test(navigator.userAgent)&&(m=t(m).get()),f&&(o=t(':input[form="'+f+'"]').get()).length&&(m=(m||[]).concat(o)),!m||!m.length)return n;for(a=0,u=m.length;a<u;a++)if((l=(h=m[a]).name)&&!h.disabled)if(i&&p.clk&&"image"==h.type)p.clk==h&&(n.push({name:l,value:t(h).val(),type:h.type}),n.push({name:l+".x",value:p.clk_x},{name:l+".y",value:p.clk_y}));else if((c=t.fieldValue(h,!0))&&c.constructor==Array)for(s&&s.push(h),r=0,d=c.length;r<d;r++)n.push({name:l,value:c[r]});else if(e.fileapi&&"file"==h.type){s&&s.push(h);var g=h.files;if(g.length)for(r=0;r<g.length;r++)n.push({name:l,value:g[r],type:h.type});else n.push({name:l,value:"",type:h.type})}else null!=c&&(s&&s.push(h),n.push({name:l,value:c,type:h.type,required:h.required}));if(!i&&p.clk){var v=t(p.clk),b=v[0];(l=b.name)&&!b.disabled&&"image"==b.type&&(n.push({name:l,value:v.val()}),n.push({name:l+".x",value:p.clk_x},{name:l+".y",value:p.clk_y}))}return n},t.fn.formSerialize=function(e){return t.param(this.formToArray(e))},t.fn.fieldSerialize=function(e){var i=[];return this.each((function(){var s=this.name;if(s){var n=t.fieldValue(this,e);if(n&&n.constructor==Array)for(var o=0,a=n.length;o<a;o++)i.push({name:s,value:n[o]});else null!=n&&i.push({name:this.name,value:n})}})),t.param(i)},t.fn.fieldValue=function(e){for(var i=[],s=0,n=this.length;s<n;s++){var o=this[s],a=t.fieldValue(o,e);null==a||a.constructor==Array&&!a.length||(a.constructor==Array?t.merge(i,a):i.push(a))}return i},t.fieldValue=function(e,i){var s=e.name,n=e.type,o=e.tagName.toLowerCase();if(void 0===i&&(i=!0),i&&(!s||e.disabled||"reset"==n||"button"==n||("checkbox"==n||"radio"==n)&&!e.checked||("submit"==n||"image"==n)&&e.form&&e.form.clk!=e||"select"==o&&-1==e.selectedIndex))return null;if("select"==o){var a=e.selectedIndex;if(a<0)return null;for(var r=[],l=e.options,c="select-one"==n,h=c?a+1:l.length,u=c?a:0;u<h;u++){var d=l[u];if(d.selected){var p=d.value;if(p||(p=d.attributes&&d.attributes.value&&!d.attributes.value.specified?d.text:d.value),c)return p;r.push(p)}}return r}return t(e).val()},t.fn.clearForm=function(e){return this.each((function(){t("input,select,textarea",this).clearFields(e)}))},t.fn.clearFields=t.fn.clearInputs=function(e){var i=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each((function(){var s=this.type,n=this.tagName.toLowerCase();i.test(s)||"textarea"==n?this.value="":"checkbox"==s||"radio"==s?this.checked=!1:"select"==n?this.selectedIndex=-1:"file"==s?/MSIE/.test(navigator.userAgent)?t(this).replaceWith(t(this).clone(!0)):t(this).val(""):e&&(!0===e&&/hidden/.test(s)||"string"==typeof e&&t(this).is(e))&&(this.value="")}))},t.fn.resetForm=function(){return this.each((function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()}))},t.fn.enable=function(t){return void 0===t&&(t=!0),this.each((function(){this.disabled=!t}))},t.fn.selected=function(e){return void 0===e&&(e=!0),this.each((function(){var i=this.type;if("checkbox"==i||"radio"==i)this.checked=e;else if("option"==this.tagName.toLowerCase()){var s=t(this).parent("select");e&&s[0]&&"select-one"==s[0].type&&s.find("option").selected(!1),this.selected=e}}))},t.fn.ajaxSubmit.debug=!1})?s.apply(e,n):s)||(t.exports=o)}()},9:function(t,e,i){var s,n;s=[i(0),i(41),i(43),i(79),i(57),i(58)],void 0===(n=function(t,e,i){"use strict";return e.extend({name:"select2",trigger:".pat-select2",parser:"mockup",defaults:{separator:","},initializeValues:function(){var e=this;e.options.initialValues&&(e.options.id=function(t){return t.id},e.options.initSelection=function(s,n){var o=[],a=s.val(),r=e.options.initialValues;"string"==typeof e.options.initialValues&&""!==e.options.initialValues&&("{"===e.options.initialValues[0]?r=JSON.parse(e.options.initialValues):(r={},t(e.options.initialValues.split(e.options.separator)).each((function(){var e=this.split(":"),i=t.trim(e[0]),s=t.trim(e[1]);r[i]=s})))),t(a.split(e.options.separator)).each((function(){var t=this;r[this]&&(t=r[this]),o.push({id:i.removeHTML(this),text:i.removeHTML(t)})})),n(o)})},initializeTags:function(){this.options.tags&&"string"==typeof this.options.tags&&("["===this.options.tags.substr(0,1)?this.options.tags=JSON.parse(this.options.tags):this.options.tags=this.options.tags.split(this.options.separator)),this.options.tags&&!this.options.allowNewItems&&(this.options.data=t.map(this.options.tags,(function(t,e){return{id:t,text:t}})),this.options.multiple=!0,delete this.options.tags)},initializeOrdering:function(){var e=this;if(e.options.orderable){var i=function(t,e){return t?t.text:void 0};e.options.formatSelection&&(i=e.options.formatSelection),e.options.formatSelection=function(s,n){return n.parents("li").drag("start",(function(i,s){return t(this).addClass("select2-choice-dragging"),e.$el.select2("onSortStart"),t.drop({tolerance:function(e,i,s){var n=e.pageY>s.top+s.height/2;return t.data(s.elem,"drop+reorder",n?"insertAfter":"insertBefore"),this.contains(s,[e.pageX,e.pageY])}}),t(this).clone().addClass("dragging").css({opacity:.75,position:"absolute"}).appendTo(document.body)})).drag((function(e,i){t(i.proxy).css({top:i.offsetY,left:i.offsetX});var s=i.drop[0],n=t.data(s||{},"drop+reorder");!s||s==i.current&&n==i.method||(t(this)[n](s),i.current=s,i.method=n,i.update())})).drag("end",(function(i,s){t(this).removeClass("select2-choice-dragging"),e.$el.select2("onSortEnd"),t(s.proxy).remove()})).drop("init",(function(t,e){return this!=e.drag})),i(s,n)}}},initializeSelect2:function(){this.options.formatResultCssClass=function(t){if(t.id)return"select2-option-"+t.id.toLowerCase().replace(/[ \:\)\(\[\]\{\}\_\+\=\&\*\%\#]/g,"-")},this.$el.select2(this.options),this.$select2=this.$el.parent().find(".select2-container"),this.$el.parent().off("close.plone-modal.patterns"),this.options.orderable&&this.$select2.addClass("select2-orderable")},init:function(){var e=this;if(e.options.allowNewItems=!e.options.hasOwnProperty("allowNewItems")||JSON.parse(e.options.allowNewItems),e.options.ajax||e.options.vocabularyUrl){e.options.vocabularyUrl&&(e.options.multiple=void 0===e.options.multiple||e.options.multiple,e.options.ajax=e.options.ajax||{},e.options.ajax.url=e.options.vocabularyUrl,e.options.initSelection=function(s,n){var o=[],a=s.val();t(a.split(e.options.separator)).each((function(){var t=i.removeHTML(this);o.push({id:t,text:t})})),n(o)});var s="";e.options.ajax=t.extend({quietMillis:300,data:function(t,e){return s=t,{query:t,page_limit:10,page:e}},results:function(n,o){var a=n.results;if(e.options.vocabularyUrl){var r=[];t.each(n.results,(function(t,e){r.push(e.id)})),a=[];var l=""===s||t.inArray(s,r)>=0;e.options.allowNewItems&&!l&&(s=i.removeHTML(s),a.push({id:s,text:s})),t.each(n.results,(function(t,e){a.push(e)}))}return{results:a}}},e.options.ajax)}else if(e.options.multiple&&e.$el.is("select")){var n=e.$el.val()||[],o=t.map(e.$el.find("option"),(function(e){return{text:t(e).html(),id:e.value}})),a=t('<input type="hidden" />');a.val(n.join(e.options.separator)),a.attr("class",e.$el.attr("class")),a.attr("name",e.$el.attr("name")),a.attr("id",e.$el.attr("id")),e.$orig=e.$el,e.$el.replaceWith(a),e.$el=a,e.options.data=o}e.initializeValues(),e.initializeTags(),e.initializeOrdering(),e.initializeSelect2()}})}.apply(e,s))||(t.exports=n)}}]);