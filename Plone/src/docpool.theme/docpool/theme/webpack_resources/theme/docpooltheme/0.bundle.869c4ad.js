/*! For license information please see 0.bundle.869c4ad.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(t,e,n){var i,o;i=[n(0),n(34),n(36),n(61),n(8),n(94),n(38),n(37),n(62)],void 0===(o=function(t,e,n,i,o,r,s,a){"use strict";return n.extend({name:"plone-modal",trigger:".pat-plone-modal",parser:"mockup",createModal:null,$model:null,defaults:{width:"",height:"",margin:20,position:"center middle",triggers:[],zIndexSelector:".plone-modal-wrapper,.plone-modal-backdrop",backdrop:"body",backdropOptions:{zIndex:"1040",opacity:"0.85",className:"plone-modal-backdrop",classActiveName:"plone-backdrop-active",closeOnEsc:!0,closeOnClick:!0},title:null,titleSelector:"h1:first",buttons:'.formControls > input[type="submit"]',content:"#content",automaticallyAddButtonActions:!0,loadLinksWithinModal:!0,prependContent:".portalMessage",templateOptions:{className:"plone-modal fade",classDialog:"plone-modal-dialog",classModal:"plone-modal-content",classHeaderName:"plone-modal-header",classBodyName:"plone-modal-body",classFooterName:"plone-modal-footer",classWrapperName:"plone-modal-wrapper",classWrapperInnerName:"modal-wrapper-inner",classActiveName:"in",classPrependName:"",classContentName:"",template:'<div class="<%= options.className %>">  <div class="<%= options.classDialog %>">    <div class="<%= options.classModal %>">      <div class="<%= options.classHeaderName %>">        <a class="plone-modal-close">&times;</a>        <% if (title) { %><h2 class="plone-modal-title"><%= title %></h2><% } %>      </div>      <div class="<%= options.classBodyName %>">        <div class="<%= options.classPrependName %>"><%= prepend %></div>         <div class="<%= options.classContentName %>"><%= content %></div>      </div>      <div class="<%= options.classFooterName %>">         <% if (buttons) { %><%= buttons %><% } %>      </div>    </div>  </div></div>'},actions:{},actionOptions:{eventType:"click",disableAjaxFormSubmit:!1,target:null,ajaxUrl:null,modalFunction:null,isForm:!1,timeout:5e3,displayInModal:!0,reloadWindowOnClose:!0,error:".portalMessage.error",formFieldError:".field.error",onSuccess:null,onError:null,onFormError:null,onTimeout:null,redirectOnResponse:!1,redirectToUrl:function(t,e,n){var i;return(i=/<body.*data-view-url=[\"'](.*)[\"'].*/im.exec(e))&&i.length>1?i[1].split('"')[0]:(i=/<body.*data-base-url=[\"'](.*)[\"'].*/im.exec(e))&&i.length>1?i[1].split('"')[0]:(i=/<base.*href=[\"'](.*)[\"'].*/im.exec(e))&&i.length>1?i[1]:""}},routerOptions:{id:null,pathExp:null},form:function(n){var i=this,o=i.$modal;i.options.automaticallyAddButtonActions&&(n[i.options.buttons]={}),n.a={},t.each(n,(function(n,r){var s=e.union(e.keys(i.options.actionOptions),["templateOptions"]),a=t.extend(!0,{},i.options.actionOptions,e.pick(r,s));r.templateOptions=t.extend(!0,r.templateOptions,i.options.templateOptions);var l=e.union(e.keys(i.options.actionOptions),["actions","actionOptions"]),c=t.extend(!0,e.omit(r,l),i.options);t(n,t("."+r.templateOptions.classBodyName,o)).each((function(e){var n=t(this);n.on(a.eventType,(function(e){e.stopPropagation(),e.preventDefault(),i.loading.show(!1),null!==a.modalFunction?i[a.modalFunction]():t.nodeName(n[0],"input")||t.nodeName(n[0],"button")||!0===r.isForm?i.options.handleFormAction.apply(i,[n,a,c]):(null!==r.ajaxUrl||t.nodeName(n[0],"a"))&&i.options.handleLinkAction.apply(i,[n,a,c])}))}))}))},handleFormAction:function(e,n,i){var o,r,s=this,a={};if(a[e.attr("name")]=e.attr("value"),o=t.nodeName(e[0],"form")?e:e.parents("form:not(.disableAutoSubmit)"),r=null!==n.ajaxUrl?"function"==typeof n.ajaxUrl?n.ajaxUrl.apply(s,[e,n]):n.ajaxUrl:e.parents("form").attr("action"),n.disableAjaxFormSubmit)return e.attr("name")&&e.attr("value")&&o.append(t('<input type="hidden" name="'+e.attr("name")+'" value="'+e.attr("value")+'" />')),void o.trigger("submit");o.on("submit",(function(t){t.preventDefault()})),o.trigger("submit"),s.loading.show(!1),o.ajaxSubmit({timeout:n.timeout,data:a,url:r,error:function(t,e,i){s.loading.hide(),"timeout"===e&&n.onTimeout?n.onTimeout.apply(s,t,i):n.onError?n.onError(t,e,i):console.log("error happened do something"),s.emit("formActionError",[t,e,i])},success:function(o,r,a,l){s.loading.hide(),0===t(n.error,o).size()&&0===t(n.formFieldError,o).size()?!0!==n.redirectOnResponse?(n.onSuccess&&n.onSuccess(s,o,r,a,l),!0===n.displayInModal?s.redraw(o,i):(e.trigger("destroy.plone-modal.patterns"),n.reloadWindowOnClose&&s.reloadWindow()),s.emit("formActionSuccess",[o,r,a,l])):"function"==typeof n.redirectToUrl?window.parent.location.href=n.redirectToUrl.apply(s,[e,o,n]):window.parent.location.href=n.redirectToUrl:n.onFormError?n.onFormError(s,o,r,a,l):s.redraw(o,i)}})},handleLinkAction:function(e,n,i){var o,r=this;o=n.ajaxUrl?"function"==typeof n.ajaxUrl?n.ajaxUrl.apply(r,[e,n]):n.ajaxUrl:e.attr("href"),!1!==n.displayInModal?t.ajax({url:o}).fail((function(t,e,i){"timeout"===e&&n.onTimeout?n.onTimeout(r.$modal,t,i):n.onError?n.onError(t,e,i):window.alert(a("There was an error loading modal.")),r.emit("linkActionError",[t,e,i])})).done((function(t,e,o){r.redraw(t,i),n.onSuccess&&n.onSuccess(r,t,e,o),r.emit("linkActionSuccess",[t,e,o])})).always((function(){r.loading.hide()})):"_blank"===e.attr("target")?(window.open(o,"_blank"),r.loading.hide()):window.location=o},render:function(n){var i=this;if(i.emit("before-render"),i.$raw){var o=i.$raw.clone();t("input:checked",o).each((function(){this.setAttribute&&this.setAttribute("checked","checked")}));var r={title:"",prepend:"<div />",content:"",buttons:'<div class="pattern-modal-buttons"></div>',options:n.templateOptions};if(null===n.title){var s=t(n.titleSelector,o);r.title=s.html(),t(n.titleSelector,o).remove()}else r.title=n.title;n.prependContent&&(r.prepend=t("<div />").append(t(n.prependContent,o).clone()).html(),t(n.prependContent,o).remove()),n.content?r.content=t(n.content,o).html():r.content=o.html(),i.$modal=t(e.template(i.options.templateOptions.template)(r)),i.$modalDialog=t("> ."+i.options.templateOptions.classDialog,i.$modal),i.$modalContent=t("> ."+i.options.templateOptions.classModal,i.$modalDialog),t("form",i.$modal).on("keydown",(function(e){13===e.keyCode&&"TEXTAREA"!==e.target.nodeName&&(e.preventDefault(),t("input[type=submit], button[type=submit], button:not(type)",this).eq(0).trigger("click"))})),t(n.buttons,i.$modal).each((function(){var e=t(this);e.on("click",(function(t){t.stopPropagation(),t.preventDefault()})).clone().appendTo(t(".pattern-modal-buttons",i.$modal)).off("click").on("click",(function(t){t.stopPropagation(),t.preventDefault(),e.trigger("click")})),e.hide()})),i.emit("before-events-setup"),t(".plone-modal-header > a.plone-modal-close, .plone-modal-footer > a.plone-modal-close",i.$modal).off("click").on("click",(function(e){e.stopPropagation(),e.preventDefault(),t(e.target).trigger("destroy.plone-modal.patterns")})),n.form&&n.form.apply(i,[n.actions]),i.$modal.addClass(i.options.templateOptions.className).on("destroy.plone-modal.patterns",(function(t){t.stopPropagation(),i.hide()})).on("resize.plone-modal.patterns",(function(t){t.stopPropagation(),t.preventDefault(),i.positionModal()})).appendTo(i.$wrapperInner),i.options.loadLinksWithinModal&&i.$modal.on("click",(function(e){e.stopPropagation(),t.nodeName(e.target,"a")&&e.preventDefault(),i.$modal.trigger("modal-click")})),i.$modal.data("pattern-"+i.name,i),i.emit("after-render")}}},reloadWindow:function(){window.parent.location.reload()},init:function(){var e=this;e.options.loadLinksWithinModal=t.parseJSON(e.options.loadLinksWithinModal),null!==e.options.routerOptions.id&&r.addRoute("modal",e.options.routerOptions.id,(function(){this.show()}),e,e.options.routerOptions.pathExp,e.options.routerOptions.expReplace),!0===e.options.backdropOptions.closeOnEsc&&t(document).on("keydown",(function(t,n){e.$el.is("."+e.options.templateOptions.classActiveName)&&27===t.keyCode&&e.hide()})),t(window.parent).resize((function(){e.positionModal()})),e.options.triggers&&t.each(e.options.triggers,(function(n,i){var o=i.substring(0,i.indexOf(" ")),r=i.substring(i.indexOf(" "),i.length);t(r||e.$el).on(o,(function(t){t.stopPropagation(),t.preventDefault(),e.show()}))})),e.$el.is("a")&&(e.$el.attr("href")&&!e.options.image&&(e.options.target||"#"!==e.$el.attr("href").substr(0,1)||(e.options.target=e.$el.attr("href"),e.options.content=""),e.options.ajaxUrl||"#"===e.$el.attr("href").substr(0,1)||(e.options.ajaxUrl=function(){return e.$el.attr("href")})),e.$el.on("click",(function(t){t.stopPropagation(),t.preventDefault(),e.show()}))),e.initModal()},createAjaxModal:function(){var e=this;e.emit("before-ajax"),e.loading.show();var n=e.options.ajaxUrl;"function"==typeof n&&(n=n.apply(e,[e.options])),e.ajaxXHR=t.ajax({url:n,type:e.options.ajaxType}).done((function(n,i,o){e.ajaxXHR=void 0,e.$raw=t("<div />").append(t(s.parseBodyTag(n))),e.emit("after-ajax",e,i,o),e._show()})).fail((function(t,n,i){var o=e.options.actionOptions;"timeout"===n&&o.onTimeout?o.onTimeout(e.$modal,t,i):o.onError?o.onError(t,n,i):(window.alert(a("There was an error loading modal.")),e.hide()),e.emit("linkActionError",[t,n,i])})).always((function(){e.loading.hide()}))},createTargetModal:function(){this.$raw=t(this.options.target).clone(),this._show()},createBasicModal:function(){this.$raw=t("<div/>").html(this.$el.clone()),this._show()},createHtmlModal:function(){var e=t(this.options.html);this.$raw=e,this._show()},createImageModal:function(){this.$wrapper.addClass("image-modal");var e=this.$el.attr("href"),n=this.$el.attr("data-modal-srcset")||"",i=t.trim(this.$el.context.innerText)||"Image";this.$raw=t("<div><h1>"+i+'</h1><div id="content"><div class="modal-image"><img src="'+e+'" srcset="'+n+'" /></div></div></div>'),this._show()},initModal:function(){this.options.ajaxUrl?this.createModal=this.createAjaxModal:this.options.target?this.createModal=this.createTargetModal:this.options.html?this.createModal=this.createHtmlModal:this.options.image?this.createModal=this.createImageModal:this.createModal=this.createBasicModal},findPosition:function(t,e,n,i,o,r,s){var a,l,c,h,u={};return h=c=a=c="auto","left"===t?(c=n+"px",i>r&&(c="0px"),u.left=c):"right"===t?(h=n+"px",i>r&&(h="0px"),u.right=h,u.left="auto"):(c=r/2-i/2-n+"px",i>r&&(c="0px"),u.left=c),"top"===e?(a=n+"px",o>s&&(a="0px"),u.top=a):"bottom"===e?(l=n+"px",o>s&&(l="0px"),u.bottom=l,u.top="auto"):(a=s/2-o/2-n+"px",o>s&&(a="0px"),u.top=a),u},modalInitialized:function(){return null!==this.$modal&&void 0!==this.$modal},positionModal:function(){if(this.modalInitialized()){this.$modal.removeAttr("style"),this.$wrapper.parent().is("body")&&this.$wrapper.height(t(window.parent).height());var e="function"==typeof this.options.margin?this.options.margin():this.options.margin;this.$modal.css({position:"absolute",padding:e}),this.$modalDialog.css({margin:"0",padding:"0",width:this.options.width,height:this.options.height}),this.$modalContent.css({width:this.options.width});var n=this.options.position.split(" "),i=n[0],o=n[1],r=this.$modalDialog.outerWidth(!0),s=this.$modalDialog.outerHeight(!0),a=this.$wrapperInner.width(),l=this.$wrapperInner.height(),c=this.findPosition(i,o,e,r,s,a,l);for(var h in c)this.$modalDialog.css(h,c[h])}},render:function(t){this.emit("render"),this.options.render.apply(this,[t]),this.emit("rendered")},show:function(){this.backdrop=this.createBackdrop(),this.createModal()},createBackdrop:function(){var e=this,n=new i(e.$el.parents(e.options.backdrop),e.options.backdropOptions),o=1041;return t(e.options.zIndexSelector).each((function(){o=Math.max(o,parseInt(t(this).css("zIndex"))+1||1041)})),e.$wrapper=t("<div/>").hide().css({"z-index":o,"overflow-y":"auto",position:"fixed",height:"100%",width:"100%",bottom:"0",left:"0",right:"0",top:"0"}).addClass(e.options.templateOptions.classWrapperName).insertBefore(n.$backdrop).on("click",(function(t){e.options.backdropOptions.closeOnClick&&(t.stopPropagation(),t.preventDefault(),n.hide())})),n.on("hidden",(function(t){void 0!==e.$modal&&e.$modal.hasClass(e.options.templateOptions.classActiveName)&&e.hide()})),e.loading=new s.Loading({backdrop:n}),e.$wrapperInner=t("<div/>").addClass(e.options.classWrapperInnerName).css({position:"absolute",bottom:"0",left:"0",right:"0",top:"0"}).appendTo(e.$wrapper),n},_show:function(){var e=this;e.render.apply(e,[e.options]),e.emit("show"),e.backdrop.show(),e.$wrapper.show(),e.loading.hide(),e.$el.addClass(e.options.templateOptions.classActiveName),e.$modal.addClass(e.options.templateOptions.classActiveName),o.scan(e.$modal),e.positionModal(),t(window.parent).on("resize.plone-modal.patterns",(function(){e.positionModal()})),t("body").addClass("plone-modal-open"),e.emit("shown")},hide:function(){this.ajaxXHR&&this.ajaxXHR.abort(),this.emit("hide"),this._suppressHide&&!window.confirm(this._suppressHide)||(this.loading.hide(),this.$el.removeClass(this.options.templateOptions.classActiveName),void 0!==this.$modal&&(this.$modal.remove(),this.initModal()),this.$wrapper.remove(),t(".plone-modal",t("body")).size()<1&&(this._suppressHide=void 0,this.backdrop.hide(),t("body").removeClass("plone-modal-open"),t(window.parent).off("resize.plone-modal.patterns")),this.emit("hidden"))},redraw:function(e,n){this.emit("beforeDraw"),this.$modal.remove(),this.$raw=t("<div />").append(t(s.parseBodyTag(e))),this.render.apply(this,[n||this.options]),this.$modal.addClass(this.options.templateOptions.classActiveName),this.positionModal(),o.scan(this.$modal),this.emit("afterDraw")}})}.apply(e,i))||(t.exports=o)},34:function(t,e,n){var i;(function(){var n=this,o=n._,r=Array.prototype,s=Object.prototype,a=Function.prototype,l=r.push,c=r.slice,h=s.toString,u=s.hasOwnProperty,d=Array.isArray,p=Object.keys,f=a.bind,g=Object.create,m=function(){},v=function(t){return t instanceof v?t:this instanceof v?void(this._wrapped=t):new v(t)};t.exports&&(e=t.exports=v),e._=v,v.VERSION="1.8.3";var y=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,o){return t.call(e,n,i,o)};case 4:return function(n,i,o,r){return t.call(e,n,i,o,r)}}return function(){return t.apply(e,arguments)}},b=function(t,e,n){return null==t?v.identity:v.isFunction(t)?y(t,e,n):v.isObject(t)?v.matcher(t):v.property(t)};v.iteratee=function(t,e){return b(t,e,1/0)};var w=function(t,e){return function(n){var i=arguments.length;if(i<2||null==n)return n;for(var o=1;o<i;o++)for(var r=arguments[o],s=t(r),a=s.length,l=0;l<a;l++){var c=s[l];e&&void 0!==n[c]||(n[c]=r[c])}return n}},x=function(t){if(!v.isObject(t))return{};if(g)return g(t);m.prototype=t;var e=new m;return m.prototype=null,e},S=function(t){return function(e){return null==e?void 0:e[t]}},C=Math.pow(2,53)-1,k=S("length"),T=function(t){var e=k(t);return"number"==typeof e&&e>=0&&e<=C};function E(t){function e(e,n,i,o,r,s){for(;r>=0&&r<s;r+=t){var a=o?o[r]:r;i=n(i,e[a],a,e)}return i}return function(n,i,o,r){i=y(i,r,4);var s=!T(n)&&v.keys(n),a=(s||n).length,l=t>0?0:a-1;return arguments.length<3&&(o=n[s?s[l]:l],l+=t),e(n,i,o,s,l,a)}}v.each=v.forEach=function(t,e,n){var i,o;if(e=y(e,n),T(t))for(i=0,o=t.length;i<o;i++)e(t[i],i,t);else{var r=v.keys(t);for(i=0,o=r.length;i<o;i++)e(t[r[i]],r[i],t)}return t},v.map=v.collect=function(t,e,n){e=b(e,n);for(var i=!T(t)&&v.keys(t),o=(i||t).length,r=Array(o),s=0;s<o;s++){var a=i?i[s]:s;r[s]=e(t[a],a,t)}return r},v.reduce=v.foldl=v.inject=E(1),v.reduceRight=v.foldr=E(-1),v.find=v.detect=function(t,e,n){var i;if(void 0!==(i=T(t)?v.findIndex(t,e,n):v.findKey(t,e,n))&&-1!==i)return t[i]},v.filter=v.select=function(t,e,n){var i=[];return e=b(e,n),v.each(t,(function(t,n,o){e(t,n,o)&&i.push(t)})),i},v.reject=function(t,e,n){return v.filter(t,v.negate(b(e)),n)},v.every=v.all=function(t,e,n){e=b(e,n);for(var i=!T(t)&&v.keys(t),o=(i||t).length,r=0;r<o;r++){var s=i?i[r]:r;if(!e(t[s],s,t))return!1}return!0},v.some=v.any=function(t,e,n){e=b(e,n);for(var i=!T(t)&&v.keys(t),o=(i||t).length,r=0;r<o;r++){var s=i?i[r]:r;if(e(t[s],s,t))return!0}return!1},v.contains=v.includes=v.include=function(t,e,n,i){return T(t)||(t=v.values(t)),("number"!=typeof n||i)&&(n=0),v.indexOf(t,e,n)>=0},v.invoke=function(t,e){var n=c.call(arguments,2),i=v.isFunction(e);return v.map(t,(function(t){var o=i?e:t[e];return null==o?o:o.apply(t,n)}))},v.pluck=function(t,e){return v.map(t,v.property(e))},v.where=function(t,e){return v.filter(t,v.matcher(e))},v.findWhere=function(t,e){return v.find(t,v.matcher(e))},v.max=function(t,e,n){var i,o,r=-1/0,s=-1/0;if(null==e&&null!=t)for(var a=0,l=(t=T(t)?t:v.values(t)).length;a<l;a++)(i=t[a])>r&&(r=i);else e=b(e,n),v.each(t,(function(t,n,i){((o=e(t,n,i))>s||o===-1/0&&r===-1/0)&&(r=t,s=o)}));return r},v.min=function(t,e,n){var i,o,r=1/0,s=1/0;if(null==e&&null!=t)for(var a=0,l=(t=T(t)?t:v.values(t)).length;a<l;a++)(i=t[a])<r&&(r=i);else e=b(e,n),v.each(t,(function(t,n,i){((o=e(t,n,i))<s||o===1/0&&r===1/0)&&(r=t,s=o)}));return r},v.shuffle=function(t){for(var e,n=T(t)?t:v.values(t),i=n.length,o=Array(i),r=0;r<i;r++)(e=v.random(0,r))!==r&&(o[r]=o[e]),o[e]=n[r];return o},v.sample=function(t,e,n){return null==e||n?(T(t)||(t=v.values(t)),t[v.random(t.length-1)]):v.shuffle(t).slice(0,Math.max(0,e))},v.sortBy=function(t,e,n){return e=b(e,n),v.pluck(v.map(t,(function(t,n,i){return{value:t,index:n,criteria:e(t,n,i)}})).sort((function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return t.index-e.index})),"value")};var O=function(t){return function(e,n,i){var o={};return n=b(n,i),v.each(e,(function(i,r){var s=n(i,r,e);t(o,i,s)})),o}};v.groupBy=O((function(t,e,n){v.has(t,n)?t[n].push(e):t[n]=[e]})),v.indexBy=O((function(t,e,n){t[n]=e})),v.countBy=O((function(t,e,n){v.has(t,n)?t[n]++:t[n]=1})),v.toArray=function(t){return t?v.isArray(t)?c.call(t):T(t)?v.map(t,v.identity):v.values(t):[]},v.size=function(t){return null==t?0:T(t)?t.length:v.keys(t).length},v.partition=function(t,e,n){e=b(e,n);var i=[],o=[];return v.each(t,(function(t,n,r){(e(t,n,r)?i:o).push(t)})),[i,o]},v.first=v.head=v.take=function(t,e,n){if(null!=t)return null==e||n?t[0]:v.initial(t,t.length-e)},v.initial=function(t,e,n){return c.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},v.last=function(t,e,n){if(null!=t)return null==e||n?t[t.length-1]:v.rest(t,Math.max(0,t.length-e))},v.rest=v.tail=v.drop=function(t,e,n){return c.call(t,null==e||n?1:e)},v.compact=function(t){return v.filter(t,v.identity)};var A=function(t,e,n,i){for(var o=[],r=0,s=i||0,a=k(t);s<a;s++){var l=t[s];if(T(l)&&(v.isArray(l)||v.isArguments(l))){e||(l=A(l,e,n));var c=0,h=l.length;for(o.length+=h;c<h;)o[r++]=l[c++]}else n||(o[r++]=l)}return o};function _(t){return function(e,n,i){n=b(n,i);for(var o=k(e),r=t>0?0:o-1;r>=0&&r<o;r+=t)if(n(e[r],r,e))return r;return-1}}function j(t,e,n){return function(i,o,r){var s=0,a=k(i);if("number"==typeof r)t>0?s=r>=0?r:Math.max(r+a,s):a=r>=0?Math.min(r+1,a):r+a+1;else if(n&&r&&a)return i[r=n(i,o)]===o?r:-1;if(o!=o)return(r=e(c.call(i,s,a),v.isNaN))>=0?r+s:-1;for(r=t>0?s:a-1;r>=0&&r<a;r+=t)if(i[r]===o)return r;return-1}}v.flatten=function(t,e){return A(t,e,!1)},v.without=function(t){return v.difference(t,c.call(arguments,1))},v.uniq=v.unique=function(t,e,n,i){v.isBoolean(e)||(i=n,n=e,e=!1),null!=n&&(n=b(n,i));for(var o=[],r=[],s=0,a=k(t);s<a;s++){var l=t[s],c=n?n(l,s,t):l;e?(s&&r===c||o.push(l),r=c):n?v.contains(r,c)||(r.push(c),o.push(l)):v.contains(o,l)||o.push(l)}return o},v.union=function(){return v.uniq(A(arguments,!0,!0))},v.intersection=function(t){for(var e=[],n=arguments.length,i=0,o=k(t);i<o;i++){var r=t[i];if(!v.contains(e,r)){for(var s=1;s<n&&v.contains(arguments[s],r);s++);s===n&&e.push(r)}}return e},v.difference=function(t){var e=A(arguments,!0,!0,1);return v.filter(t,(function(t){return!v.contains(e,t)}))},v.zip=function(){return v.unzip(arguments)},v.unzip=function(t){for(var e=t&&v.max(t,k).length||0,n=Array(e),i=0;i<e;i++)n[i]=v.pluck(t,i);return n},v.object=function(t,e){for(var n={},i=0,o=k(t);i<o;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},v.findIndex=_(1),v.findLastIndex=_(-1),v.sortedIndex=function(t,e,n,i){for(var o=(n=b(n,i,1))(e),r=0,s=k(t);r<s;){var a=Math.floor((r+s)/2);n(t[a])<o?r=a+1:s=a}return r},v.indexOf=j(1,v.findIndex,v.sortedIndex),v.lastIndexOf=j(-1,v.findLastIndex),v.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var i=Math.max(Math.ceil((e-t)/n),0),o=Array(i),r=0;r<i;r++,t+=n)o[r]=t;return o};var I=function(t,e,n,i,o){if(!(i instanceof e))return t.apply(n,o);var r=x(t.prototype),s=t.apply(r,o);return v.isObject(s)?s:r};v.bind=function(t,e){if(f&&t.bind===f)return f.apply(t,c.call(arguments,1));if(!v.isFunction(t))throw new TypeError("Bind must be called on a function");var n=c.call(arguments,2),i=function(){return I(t,i,e,this,n.concat(c.call(arguments)))};return i},v.partial=function(t){var e=c.call(arguments,1),n=function(){for(var i=0,o=e.length,r=Array(o),s=0;s<o;s++)r[s]=e[s]===v?arguments[i++]:e[s];for(;i<arguments.length;)r.push(arguments[i++]);return I(t,n,this,this,r)};return n},v.bindAll=function(t){var e,n,i=arguments.length;if(i<=1)throw new Error("bindAll must be passed function names");for(e=1;e<i;e++)t[n=arguments[e]]=v.bind(t[n],t);return t},v.memoize=function(t,e){var n=function(i){var o=n.cache,r=""+(e?e.apply(this,arguments):i);return v.has(o,r)||(o[r]=t.apply(this,arguments)),o[r]};return n.cache={},n},v.delay=function(t,e){var n=c.call(arguments,2);return setTimeout((function(){return t.apply(null,n)}),e)},v.defer=v.partial(v.delay,v,1),v.throttle=function(t,e,n){var i,o,r,s=null,a=0;n||(n={});var l=function(){a=!1===n.leading?0:v.now(),s=null,r=t.apply(i,o),s||(i=o=null)};return function(){var c=v.now();a||!1!==n.leading||(a=c);var h=e-(c-a);return i=this,o=arguments,h<=0||h>e?(s&&(clearTimeout(s),s=null),a=c,r=t.apply(i,o),s||(i=o=null)):s||!1===n.trailing||(s=setTimeout(l,h)),r}},v.debounce=function(t,e,n){var i,o,r,s,a,l=function(){var c=v.now()-s;c<e&&c>=0?i=setTimeout(l,e-c):(i=null,n||(a=t.apply(r,o),i||(r=o=null)))};return function(){r=this,o=arguments,s=v.now();var c=n&&!i;return i||(i=setTimeout(l,e)),c&&(a=t.apply(r,o),r=o=null),a}},v.wrap=function(t,e){return v.partial(e,t)},v.negate=function(t){return function(){return!t.apply(this,arguments)}},v.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,i=t[e].apply(this,arguments);n--;)i=t[n].call(this,i);return i}},v.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},v.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},v.once=v.partial(v.before,2);var N=!{toString:null}.propertyIsEnumerable("toString"),M=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function P(t,e){var n=M.length,i=t.constructor,o=v.isFunction(i)&&i.prototype||s,r="constructor";for(v.has(t,r)&&!v.contains(e,r)&&e.push(r);n--;)(r=M[n])in t&&t[r]!==o[r]&&!v.contains(e,r)&&e.push(r)}v.keys=function(t){if(!v.isObject(t))return[];if(p)return p(t);var e=[];for(var n in t)v.has(t,n)&&e.push(n);return N&&P(t,e),e},v.allKeys=function(t){if(!v.isObject(t))return[];var e=[];for(var n in t)e.push(n);return N&&P(t,e),e},v.values=function(t){for(var e=v.keys(t),n=e.length,i=Array(n),o=0;o<n;o++)i[o]=t[e[o]];return i},v.mapObject=function(t,e,n){e=b(e,n);for(var i,o=v.keys(t),r=o.length,s={},a=0;a<r;a++)s[i=o[a]]=e(t[i],i,t);return s},v.pairs=function(t){for(var e=v.keys(t),n=e.length,i=Array(n),o=0;o<n;o++)i[o]=[e[o],t[e[o]]];return i},v.invert=function(t){for(var e={},n=v.keys(t),i=0,o=n.length;i<o;i++)e[t[n[i]]]=n[i];return e},v.functions=v.methods=function(t){var e=[];for(var n in t)v.isFunction(t[n])&&e.push(n);return e.sort()},v.extend=w(v.allKeys),v.extendOwn=v.assign=w(v.keys),v.findKey=function(t,e,n){e=b(e,n);for(var i,o=v.keys(t),r=0,s=o.length;r<s;r++)if(e(t[i=o[r]],i,t))return i},v.pick=function(t,e,n){var i,o,r={},s=t;if(null==s)return r;v.isFunction(e)?(o=v.allKeys(s),i=y(e,n)):(o=A(arguments,!1,!1,1),i=function(t,e,n){return e in n},s=Object(s));for(var a=0,l=o.length;a<l;a++){var c=o[a],h=s[c];i(h,c,s)&&(r[c]=h)}return r},v.omit=function(t,e,n){if(v.isFunction(e))e=v.negate(e);else{var i=v.map(A(arguments,!1,!1,1),String);e=function(t,e){return!v.contains(i,e)}}return v.pick(t,e,n)},v.defaults=w(v.allKeys,!0),v.create=function(t,e){var n=x(t);return e&&v.extendOwn(n,e),n},v.clone=function(t){return v.isObject(t)?v.isArray(t)?t.slice():v.extend({},t):t},v.tap=function(t,e){return e(t),t},v.isMatch=function(t,e){var n=v.keys(e),i=n.length;if(null==t)return!i;for(var o=Object(t),r=0;r<i;r++){var s=n[r];if(e[s]!==o[s]||!(s in o))return!1}return!0};var R=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof v&&(t=t._wrapped),e instanceof v&&(e=e._wrapped);var o=h.call(t);if(o!==h.call(e))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e}var r="[object Array]"===o;if(!r){if("object"!=typeof t||"object"!=typeof e)return!1;var s=t.constructor,a=e.constructor;if(s!==a&&!(v.isFunction(s)&&s instanceof s&&v.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}i=i||[];for(var l=(n=n||[]).length;l--;)if(n[l]===t)return i[l]===e;if(n.push(t),i.push(e),r){if((l=t.length)!==e.length)return!1;for(;l--;)if(!R(t[l],e[l],n,i))return!1}else{var c,u=v.keys(t);if(l=u.length,v.keys(e).length!==l)return!1;for(;l--;)if(c=u[l],!v.has(e,c)||!R(t[c],e[c],n,i))return!1}return n.pop(),i.pop(),!0};v.isEqual=function(t,e){return R(t,e)},v.isEmpty=function(t){return null==t||(T(t)&&(v.isArray(t)||v.isString(t)||v.isArguments(t))?0===t.length:0===v.keys(t).length)},v.isElement=function(t){return!(!t||1!==t.nodeType)},v.isArray=d||function(t){return"[object Array]"===h.call(t)},v.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},v.each(["Arguments","Function","String","Number","Date","RegExp","Error"],(function(t){v["is"+t]=function(e){return h.call(e)==="[object "+t+"]"}})),v.isArguments(arguments)||(v.isArguments=function(t){return v.has(t,"callee")}),"object"!=typeof Int8Array&&(v.isFunction=function(t){return"function"==typeof t||!1}),v.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},v.isNaN=function(t){return v.isNumber(t)&&t!==+t},v.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===h.call(t)},v.isNull=function(t){return null===t},v.isUndefined=function(t){return void 0===t},v.has=function(t,e){return null!=t&&u.call(t,e)},v.noConflict=function(){return n._=o,this},v.identity=function(t){return t},v.constant=function(t){return function(){return t}},v.noop=function(){},v.property=S,v.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},v.matcher=v.matches=function(t){return t=v.extendOwn({},t),function(e){return v.isMatch(e,t)}},v.times=function(t,e,n){var i=Array(Math.max(0,t));e=y(e,n,1);for(var o=0;o<t;o++)i[o]=e(o);return i},v.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},v.now=Date.now||function(){return(new Date).getTime()};var D={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},$=v.invert(D),L=function(t){var e=function(e){return t[e]},n="(?:"+v.keys(t).join("|")+")",i=RegExp(n),o=RegExp(n,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(o,e):t}};v.escape=L(D),v.unescape=L($),v.result=function(t,e,n){var i=null==t?void 0:t[e];return void 0===i&&(i=n),v.isFunction(i)?i.call(t):i};var F=0;v.uniqueId=function(t){var e=++F+"";return t?t+e:e},v.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var U=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},z=/\\|'|\r|\n|\u2028|\u2029/g,B=function(t){return"\\"+H[t]};v.template=function(t,e,n){!e&&n&&(e=n),e=v.defaults({},e,v.templateSettings);var i=RegExp([(e.escape||U).source,(e.interpolate||U).source,(e.evaluate||U).source].join("|")+"|$","g"),o=0,r="__p+='";t.replace(i,(function(e,n,i,s,a){return r+=t.slice(o,a).replace(z,B),o=a+e.length,n?r+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?r+="'+\n((__t=("+i+"))==null?'':__t)+\n'":s&&(r+="';\n"+s+"\n__p+='"),e})),r+="';\n",e.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{var s=new Function(e.variable||"obj","_",r)}catch(t){throw t.source=r,t}var a=function(t){return s.call(this,t,v)},l=e.variable||"obj";return a.source="function("+l+"){\n"+r+"}",a},v.chain=function(t){var e=v(t);return e._chain=!0,e};var W=function(t,e){return t._chain?v(e).chain():e};v.mixin=function(t){v.each(v.functions(t),(function(e){var n=v[e]=t[e];v.prototype[e]=function(){var t=[this._wrapped];return l.apply(t,arguments),W(this,n.apply(v,t))}}))},v.mixin(v),v.each(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var e=r[t];v.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],W(this,n)}})),v.each(["concat","join","slice"],(function(t){var e=r[t];v.prototype[t]=function(){return W(this,e.apply(this._wrapped,arguments))}})),v.prototype.value=function(){return this._wrapped},v.prototype.valueOf=v.prototype.toJSON=v.prototype.value,v.prototype.toString=function(){return""+this._wrapped},void 0===(i=function(){return v}.apply(e,[]))||(t.exports=i)}).call(this)},36:function(t,e,n){var i,o;i=[n(0),n(8),n(91),n(44)],void 0===(o=function(t,e,n,i){"use strict";var o=i.getLogger("Patternslib Base"),r=function(t,o,r){var s=this.prototype.name,a=i.getLogger("pat."+s),l=t.data("pattern-"+s);if(void 0===l&&e.patterns[s]){try{o="mockup"===this.prototype.parser?n.getOptions(t,s,o):o,l=new e.patterns[s](t,o,r)}catch(t){a.error("Failed while initializing '"+s+"' pattern.",t)}t.data("pattern-"+s,l)}return l},s=function(e,n,i){this.$el=e,this.options=t.extend(!0,{},this.defaults||{},n||{}),this.init(e,n,i),this.emit("init")};return s.prototype={constructor:s,on:function(t,e){this.$el.on(t+"."+this.name+".patterns",e)},emit:function(t,e){void 0===e&&(e=[]),this.$el.trigger(t+"."+this.name+".patterns",e)}},s.extend=function(n){var i,a=this;if(!n)throw new Error("Pattern configuration properties required when calling Base.extend");(i=n.hasOwnProperty("constructor")?n.constructor:function(){a.apply(this,arguments)}).extend=s.extend,i.init=r,i.jquery_plugin=!0,i.trigger=n.trigger;var l=function(){this.constructor=i};return l.prototype=a.prototype,i.prototype=new l,t.extend(!0,i.prototype,n),i.__super__=a.prototype,n.name?n.trigger?e.register(i,n.name):o.warn("The pattern '"+n.name+"' does not have a trigger attribute, it will not be registered."):o.warn("This pattern without a name attribute will not be registered!"),i},s}.apply(e,i))||(t.exports=o)},37:function(t,e,n){var i,o;i=[n(53)],void 0===(o=function(t){"use strict";var e=null;return function(n,i){if(null===e){var o=new t;o.loadCatalog("widgets"),e=o.MessageFactory("widgets")}return e(n,i)}}.apply(e,i))||(t.exports=o)},38:function(t,e,n){var i,o;n(0),n(0);i=[n(0)],void 0===(o=function(t){"use strict";var e=function(e){var n=this;n.className="plone-loader";return e||(e={}),n.options=t.extend({},{backdrop:null,zIndex:10005},e),n.init=function(){n.$el=t("."+n.className),0===n.$el.length&&(n.$el=t("<div><div></div></div>"),n.$el.addClass(n.className).hide().appendTo("body"))},n.show=function(e){n.init(),n.$el.show();var i=n.options.zIndex;"function"==typeof i?i=Math.max(i(),10005):(i=10005,t(".plone-modal-wrapper,.plone-modal-backdrop").each((function(){i=Math.max(i,t(this).css("zIndex")||10005)})),i+=1),n.$el.css("zIndex",i),void 0===e&&(e=!0),n.options.backdrop&&(n.options.backdrop.closeOnClick=e,n.options.backdrop.closeOnEsc=e,n.options.backdrop.init(),n.options.backdrop.show())},n.hide=function(){n.init(),n.$el.hide()},n},n=function(t){return void 0===t&&(t="id"),t+Math.floor(65536*(1+Math.random())).toString(16).substring(1)},i={get:function(t){if(window.localStorage){var e=window.localStorage[t];return"string"==typeof e?JSON.parse(e):void 0}},set:function(t,e){window.localStorage&&(window.localStorage[t]=JSON.stringify(e))}};return{bool:function(e){return"string"==typeof e&&(e=t.trim(e).toLowerCase()),-1===["false",!1,"0",0,"",void 0,null].indexOf(e)},escapeHTML:function(e){return t("<div/>").text(e).html()},removeHTML:function(t){return t.replace(/<[^>]+>/gi,"")},featureSupport:{dragAndDrop:function(){return"draggable"in document.createElement("span")},fileApi:function(){return"undefined"!=typeof FileReader},history:function(){return!(!window.history||!window.history.pushState)}},generateId:n,getAuthenticator:function(){var e=t('input[name="_authenticator"]');return 0===e.length?(e=t('a[href*="_authenticator"]')).length>0?e.attr("href").split("_authenticator=")[1]:"":e.val()},getWindow:function(){var t=window;return t.parent!==window&&(t=t.parent),t},Loading:e,loading:new e,parseBodyTag:function(e){return t(/<body[^>]*>[^]*<\/body>/im.exec(e)[0].replace("<body","<div").replace("</body>","</div>")).eq(0).html()},QueryHelper:function(e){var n=this;return n.options=t.extend({},{pattern:null,vocabularyUrl:null,searchParam:"SearchableText",pathOperator:"plone.app.querystring.operation.string.path",attributes:["UID","Title","Description","getURL","portal_type"],batchSize:10,baseCriteria:[],sort_on:"is_folderish",sort_order:"reverse",pathDepth:1},e),n.pattern=n.options.pattern,void 0!==n.pattern&&null!==n.pattern||(n.pattern={browsing:!1,basePath:"/"}),n.options.url&&!n.options.vocabularyUrl?n.options.vocabularyUrl=n.options.url:n.pattern.vocabularyUrl&&(n.options.vocabularyUrl=n.pattern.vocabularyUrl),n.valid=Boolean(n.options.vocabularyUrl),n.getBatch=function(t){return{page:t||1,size:n.options.batchSize}},n.getCurrentPath=function(){var t,e=n.pattern;"function"==typeof(t=n.currentPath?n.currentPath:e.currentPath)&&(t=t());var i=t;return i||(i=e.basePath?e.basePath:e.options.basePath?e.options.basePath:"/"),i},n.getCriterias=function(e,i){void 0===i&&(i={});var o=[];return(i=t.extend({},{useBaseCriteria:!0,additionalCriterias:[]},i)).useBaseCriteria&&(o=n.options.baseCriteria.slice(0)),e&&(e+="*",o.push({i:n.options.searchParam,o:"plone.app.querystring.operation.string.contains",v:e})),i.searchPath?o.push({i:"path",o:n.options.pathOperator,v:i.searchPath+"::"+n.options.pathDepth}):n.pattern.browsing&&o.push({i:"path",o:n.options.pathOperator,v:n.getCurrentPath()+"::"+n.options.pathDepth}),o=o.concat(i.additionalCriterias)},n.getQueryData=function(t,e){var i={query:JSON.stringify({criteria:n.getCriterias(t),sort_on:n.options.sort_on,sort_order:n.options.sort_order}),attributes:JSON.stringify(n.options.attributes)};return e&&(i.batch=JSON.stringify(n.getBatch(e))),i},n.getUrl=function(){var e=n.options.vocabularyUrl;return-1===e.indexOf("?")?e+="?":e+="&",e+t.param(n.getQueryData())},n.selectAjax=function(){return{url:n.options.vocabularyUrl,dataType:"JSON",quietMillis:100,data:function(t,e){return n.getQueryData(t,e)},results:function(t,e){var n=10*e<t.total;return{results:t.results,more:n}}}},n.search=function(e,i,o,r,s,a){void 0===s&&(s=!0),void 0===a&&(a="GET");var l=[];s&&(l=n.options.baseCriteria.slice(0)),l.push({i:e,o:i,v:o});var c={query:JSON.stringify({criteria:l}),attributes:JSON.stringify(n.options.attributes)};t.ajax({url:n.options.vocabularyUrl,dataType:"JSON",data:c,type:a,success:r})},n},setId:function(t,e){void 0===e&&(e="id");var i=t.attr("id");return i=void 0===i?n(e):i.replace(/\./g,"-"),t.attr("id",i),i},storage:i}}.apply(e,i))||(t.exports=o)},41:function(t,e,n){var i,o,r;r=this,i=[n(34),n(0),e],void 0===(o=function(t,e,n){r.Backbone=function(t,e,n,i){var o=t.Backbone,r=[],s=r.slice;e.VERSION="1.1.2",e.$=i,e.noConflict=function(){return t.Backbone=o,this},e.emulateHTTP=!1,e.emulateJSON=!1;var a=e.Events={on:function(t,e,n){return c(this,"on",t,[e,n])&&e?(this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push({callback:e,context:n,ctx:n||this}),this):this},once:function(t,e,i){if(!c(this,"once",t,[e,i])||!e)return this;var o=this,r=n.once((function(){o.off(t,r),e.apply(this,arguments)}));return r._callback=e,this.on(t,r,i)},off:function(t,e,i){var o,r,s,a,l,h,u,d;if(!this._events||!c(this,"off",t,[e,i]))return this;if(!t&&!e&&!i)return this._events=void 0,this;for(l=0,h=(a=t?[t]:n.keys(this._events)).length;l<h;l++)if(t=a[l],s=this._events[t]){if(this._events[t]=o=[],e||i)for(u=0,d=s.length;u<d;u++)r=s[u],(e&&e!==r.callback&&e!==r.callback._callback||i&&i!==r.context)&&o.push(r);o.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=s.call(arguments,1);if(!c(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&h(n,e),i&&h(i,arguments),this},stopListening:function(t,e,i){var o=this._listeningTo;if(!o)return this;var r=!e&&!i;for(var s in i||"object"!=typeof e||(i=this),t&&((o={})[t._listenId]=t),o)(t=o[s]).off(e,i,this),(r||n.isEmpty(t._events))&&delete this._listeningTo[s];return this}},l=/\s+/,c=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var o in n)t[e].apply(t,[o,n[o]].concat(i));return!1}if(l.test(n)){for(var r=n.split(l),s=0,a=r.length;s<a;s++)t[e].apply(t,[r[s]].concat(i));return!1}return!0},h=function(t,e){var n,i=-1,o=t.length,r=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++i<o;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<o;)(n=t[i]).callback.call(n.ctx,r);return;case 2:for(;++i<o;)(n=t[i]).callback.call(n.ctx,r,s);return;case 3:for(;++i<o;)(n=t[i]).callback.call(n.ctx,r,s,a);return;default:for(;++i<o;)(n=t[i]).callback.apply(n.ctx,e);return}};n.each({listenTo:"on",listenToOnce:"once"},(function(t,e){a[e]=function(e,i,o){return(this._listeningTo||(this._listeningTo={}))[e._listenId||(e._listenId=n.uniqueId("l"))]=e,o||"object"!=typeof i||(o=this),e[t](i,o,this),this}})),a.bind=a.on,a.unbind=a.off,n.extend(e,a);var u=e.Model=function(t,e){var i=t||{};e||(e={}),this.cid=n.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(i=this.parse(i,e)||{}),i=n.defaults({},i,n.result(this,"defaults")),this.set(i,e),this.changed={},this.initialize.apply(this,arguments)};n.extend(u.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,i){var o,r,s,a,l,c,h,u;if(null==t)return this;if("object"==typeof t?(r=t,i=e):(r={})[t]=e,i||(i={}),!this._validate(r,i))return!1;for(o in s=i.unset,l=i.silent,a=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=n.clone(this.attributes),this.changed={}),u=this.attributes,h=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]),r)e=r[o],n.isEqual(u[o],e)||a.push(o),n.isEqual(h[o],e)?delete this.changed[o]:this.changed[o]=e,s?delete u[o]:u[o]=e;if(!l){a.length&&(this._pending=i);for(var d=0,p=a.length;d<p;d++)this.trigger("change:"+a[d],this,u[a[d]],i)}if(c)return this;if(!l)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&n.clone(this.changed);var e,i=!1,o=this._changing?this._previousAttributes:this.attributes;for(var r in t)n.isEqual(o[r],e=t[r])||((i||(i={}))[r]=e);return i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){void 0===(t=t?n.clone(t):{}).parse&&(t.parse=!0);var e=this,i=t.success;return t.success=function(n){if(!e.set(e.parse(n,t),t))return!1;i&&i(e,n,t),e.trigger("sync",e,n,t)},N(this,t),this.sync("read",this,t)},save:function(t,e,i){var o,r,s,a=this.attributes;if(null==t||"object"==typeof t?(o=t,i=e):(o={})[t]=e,i=n.extend({validate:!0},i),o&&!i.wait){if(!this.set(o,i))return!1}else if(!this._validate(o,i))return!1;o&&i.wait&&(this.attributes=n.extend({},a,o)),void 0===i.parse&&(i.parse=!0);var l=this,c=i.success;return i.success=function(t){l.attributes=a;var e=l.parse(t,i);if(i.wait&&(e=n.extend(o||{},e)),n.isObject(e)&&!l.set(e,i))return!1;c&&c(l,t,i),l.trigger("sync",l,t,i)},N(this,i),"patch"==(r=this.isNew()?"create":i.patch?"patch":"update")&&(i.attrs=o),s=this.sync(r,this,i),o&&i.wait&&(this.attributes=a),s},destroy:function(t){t=t?n.clone(t):{};var e=this,i=t.success,o=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(n){(t.wait||e.isNew())&&o(),i&&i(e,n,t),e.isNew()||e.trigger("sync",e,n,t)},this.isNew())return t.success(),!1;N(this,t);var r=this.sync("delete",this,t);return t.wait||o(),r},url:function(){var t=n.result(this,"urlRoot")||n.result(this.collection,"url")||I();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},n.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;return!i||(this.trigger("invalid",this,i,n.extend(e,{validationError:i})),!1)}}),n.each(["keys","values","pairs","invert","pick","omit"],(function(t){u.prototype[t]=function(){var e=s.call(arguments);return e.unshift(this.attributes),n[t].apply(n,e)}}));var d=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},p={add:!0,remove:!0,merge:!0},f={add:!0,remove:!1};n.extend(d.prototype,a,{model:u,initialize:function(){},toJSON:function(t){return this.map((function(e){return e.toJSON(t)}))},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,f))},remove:function(t,e){var i,o,r,s,a=!n.isArray(t);for(e||(e={}),i=0,o=(t=a?[t]:n.clone(t)).length;i<o;i++)(s=t[i]=this.get(t[i]))&&(delete this._byId[s.id],delete this._byId[s.cid],r=this.indexOf(s),this.models.splice(r,1),this.length--,e.silent||(e.index=r,s.trigger("remove",s,this,e)),this._removeReference(s,e));return a?t[0]:t},set:function(t,e){(e=n.defaults({},e,p)).parse&&(t=this.parse(t,e));var i,o,r,s,a,l,c,h=!n.isArray(t);t=h?t?[t]:[]:n.clone(t);var d=e.at,f=this.model,g=this.comparator&&null==d&&!1!==e.sort,m=n.isString(this.comparator)?this.comparator:null,v=[],y=[],b={},w=e.add,x=e.merge,S=e.remove,C=!(g||!w||!S)&&[];for(i=0,o=t.length;i<o;i++){if(r=(a=t[i]||{})instanceof u?s=a:a[f.prototype.idAttribute||"id"],l=this.get(r))S&&(b[l.cid]=!0),x&&(a=a===s?s.attributes:a,e.parse&&(a=l.parse(a,e)),l.set(a,e),g&&!c&&l.hasChanged(m)&&(c=!0)),t[i]=l;else if(w){if(!(s=t[i]=this._prepareModel(a,e)))continue;v.push(s),this._addReference(s,e)}s=l||s,!C||!s.isNew()&&b[s.id]||C.push(s),b[s.id]=!0}if(S){for(i=0,o=this.length;i<o;++i)b[(s=this.models[i]).cid]||y.push(s);y.length&&this.remove(y,e)}if(v.length||C&&C.length)if(g&&(c=!0),this.length+=v.length,null!=d)for(i=0,o=v.length;i<o;i++)this.models.splice(d+i,0,v[i]);else{C&&(this.models.length=0);var k=C||v;for(i=0,o=k.length;i<o;i++)this.models.push(k[i])}if(c&&this.sort({silent:!0}),!e.silent){for(i=0,o=v.length;i<o;i++)(s=v[i]).trigger("add",s,this,e);(c||C&&C.length)&&this.trigger("sort",this,e)}return h?t[0]:t},reset:function(t,e){e||(e={});for(var i=0,o=this.models.length;i<o;i++)this._removeReference(this.models[i],e);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return s.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){return n.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"]((function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0}))},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return n.invoke(this.models,"get",t)},fetch:function(t){void 0===(t=t?n.clone(t):{}).parse&&(t.parse=!0);var e=t.success,i=this;return t.success=function(n){var o=t.reset?"reset":"set";i[o](n,t),e&&e(i,n,t),i.trigger("sync",i,n,t)},N(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?n.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var i=this,o=e.success;return e.success=function(t,n){e.wait&&i.add(t,e),o&&o(t,n,e)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof u)return t;(e=e?n.clone(e):{}).collection=this;var i=new this.model(t,e);return i.validationError?(this.trigger("invalid",this,i.validationError,e),!1):i},_addReference:function(t,e){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,i),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}}),n.each(["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"],(function(t){d.prototype[t]=function(){var e=s.call(arguments);return e.unshift(this.models),n[t].apply(n,e)}})),n.each(["groupBy","countBy","sortBy","indexBy"],(function(t){d.prototype[t]=function(e,i){var o=n.isFunction(e)?e:function(t){return t.get(e)};return n[t](this.models,o,i)}}));var g=e.View=function(t){this.cid=n.uniqueId("view"),t||(t={}),n.extend(this,n.pick(t,v)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},m=/^(\S+)\s*(.*)$/,v=["model","collection","el","id","attributes","className","tagName","events"];n.extend(g.prototype,a,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,n){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],!1!==n&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=n.result(this,"events")))return this;for(var e in this.undelegateEvents(),t){var i=t[e];if(n.isFunction(i)||(i=this[t[e]]),i){var o=e.match(m),r=o[1],s=o[2];i=n.bind(i,this),r+=".delegateEvents"+this.cid,""===s?this.$el.on(r,i):this.$el.on(r,s,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var t=n.extend({},n.result(this,"attributes"));this.id&&(t.id=n.result(this,"id")),this.className&&(t.class=n.result(this,"className"));var i=e.$("<"+n.result(this,"tagName")+">").attr(t);this.setElement(i,!1)}}}),e.sync=function(t,i,o){var r=b[t];n.defaults(o||(o={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var s={type:r,dataType:"json"};if(o.url||(s.url=n.result(i,"url")||I()),null!=o.data||!i||"create"!==t&&"update"!==t&&"patch"!==t||(s.contentType="application/json",s.data=JSON.stringify(o.attrs||i.toJSON(o))),o.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),o.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){s.type="POST",o.emulateJSON&&(s.data._method=r);var a=o.beforeSend;o.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",r),a)return a.apply(this,arguments)}}"GET"===s.type||o.emulateJSON||(s.processData=!1),"PATCH"===s.type&&y&&(s.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=o.xhr=e.ajax(n.extend(s,o));return i.trigger("request",i,l,o),l};var y=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),b={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var w=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},x=/\((.*?)\)/g,S=/(\(\?)?:\w+/g,C=/\*\w+/g,k=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(w.prototype,a,{initialize:function(){},route:function(t,i,o){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(i)&&(o=i,i=""),o||(o=this[i]);var r=this;return e.history.route(t,(function(n){var s=r._extractParameters(t,n);r.execute(o,s),r.trigger.apply(r,["route:"+i].concat(s)),r.trigger("route",i,s),e.history.trigger("route",r,i,s)})),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(k,"\\$&").replace(x,"(?:$1)?").replace(S,(function(t,e){return e?t:"([^/?]+)"})).replace(C,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return n.map(i,(function(t,e){return e===i.length-1?t||null:t?decodeURIComponent(t):null}))}});var T=e.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},E=/^[#\/]|\s+$/g,O=/^\/+|\/+$/g,A=/msie [\w.]+/,_=/\/$/,j=/#.*$/;T.started=!1,n.extend(T.prototype,a,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(_,"");t.indexOf(n)||(t=t.slice(n.length))}else t=this.getHash();return t.replace(E,"")},start:function(t){if(T.started)throw new Error("Backbone.history has already been started");T.started=!0,this.options=n.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment(),o=document.documentMode,r=A.exec(navigator.userAgent.toLowerCase())&&(!o||o<=7);if(this.root=("/"+this.root+"/").replace(O,"/"),r&&this._wantsHashChange){var s=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=s.hide().appendTo("body")[0].contentWindow,this.navigate(i)}this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;var a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&a.hash&&(this.fragment=this.getHash().replace(E,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),T.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(t){return t=this.fragment=this.getFragment(t),n.any(this.handlers,(function(e){if(e.route.test(t))return e.callback(t),!0}))},navigate:function(t,e){if(!T.started)return!1;e&&!0!==e||(e={trigger:!!e});var n=this.root+(t=this.getFragment(t||""));if(t=t.replace(j,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}}),e.history=new T,u.extend=d.extend=w.extend=g.extend=T.extend=function(t,e){var i,o=this;i=t&&n.has(t,"constructor")?t.constructor:function(){return o.apply(this,arguments)},n.extend(i,o,e);var r=function(){this.constructor=i};return r.prototype=o.prototype,i.prototype=new r,t&&n.extend(i.prototype,t),i.__super__=o.prototype,i};var I=function(){throw new Error('A "url" property or function must be specified')},N=function(t,e){var n=e.error;e.error=function(i){n&&n(t,i,e),t.trigger("error",t,i,e)}};return e}(r,n,t,e)}.apply(e,i))||(t.exports=o)},44:function(t,e,n){var i,o;i=[n(86)],void 0===(o=function(t){return t.getLogger("patterns")}.apply(e,i))||(t.exports=o)},51:function(t,e,n){var i=n(0);!function(t){t.fn.drag=function(e,n,i){var o="string"==typeof e?e:"",r=t.isFunction(e)?e:t.isFunction(n)?n:null;return 0!==o.indexOf("drag")&&(o="drag"+o),i=(e==r?n:i)||{},r?this.bind(o,i,r):this.trigger(o)};var e=t.event,n=e.special,i=n.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(e){var n=t.data(this,i.datakey),o=e.data||{};n.related+=1,t.each(i.defaults,(function(t,e){void 0!==o[t]&&(n[t]=o[t])}))},remove:function(){t.data(this,i.datakey).related-=1},setup:function(){if(!t.data(this,i.datakey)){var n=t.extend({related:0},i.defaults);t.data(this,i.datakey,n),e.add(this,"touchstart mousedown",i.init,n),this.attachEvent&&this.attachEvent("ondragstart",i.dontstart)}},teardown:function(){(t.data(this,i.datakey)||{}).related||(t.removeData(this,i.datakey),e.remove(this,"touchstart mousedown",i.init),i.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",i.dontstart))},init:function(o){if(!i.touched){var r,s=o.data;if(!(0!=o.which&&s.which>0&&o.which!=s.which)&&!t(o.target).is(s.not)&&(!s.handle||t(o.target).closest(s.handle,o.currentTarget).length)&&(i.touched="touchstart"==o.type?this:null,s.propagates=1,s.mousedown=this,s.interactions=[i.interaction(this,s)],s.target=o.target,s.pageX=o.pageX,s.pageY=o.pageY,s.dragging=null,r=i.hijack(o,"draginit",s),s.propagates))return(r=i.flatten(r))&&r.length&&(s.interactions=[],t.each(r,(function(){s.interactions.push(i.interaction(this,s))}))),s.propagates=s.interactions.length,!1!==s.drop&&n.drop&&n.drop.handler(o,s),i.textselect(!1),i.touched?e.add(i.touched,"touchmove touchend",i.handler,s):e.add(document,"mousemove mouseup",i.handler,s),!(!i.touched||s.live)&&void 0}},interaction:function(e,n){var o=t(e)[n.relative?"position":"offset"]()||{top:0,left:0};return{drag:e,callback:new i.callback,droppable:[],offset:o}},handler:function(o){var r=o.data;switch(o.type){case!r.dragging&&"touchmove":o.preventDefault();case!r.dragging&&"mousemove":if(Math.pow(o.pageX-r.pageX,2)+Math.pow(o.pageY-r.pageY,2)<Math.pow(r.distance,2))break;o.target=r.target,i.hijack(o,"dragstart",r),r.propagates&&(r.dragging=!0);case"touchmove":o.preventDefault();case"mousemove":if(r.dragging){if(i.hijack(o,"drag",r),r.propagates){!1!==r.drop&&n.drop&&n.drop.handler(o,r);break}o.type="mouseup"}case"touchend":case"mouseup":default:i.touched?e.remove(i.touched,"touchmove touchend",i.handler):e.remove(document,"mousemove mouseup",i.handler),r.dragging&&(!1!==r.drop&&n.drop&&n.drop.handler(o,r),i.hijack(o,"dragend",r)),i.textselect(!0),!1===r.click&&r.dragging&&t.data(r.mousedown,"suppress.click",(new Date).getTime()+5),r.dragging=i.touched=!1}},hijack:function(n,o,r,s,a){if(r){var l,c,h,u={event:n.originalEvent,type:n.type},d=o.indexOf("drop")?"drag":"drop",p=s||0,f=isNaN(s)?r.interactions.length:s;n.type=o,n.originalEvent=null,r.results=[];do{if(c=r.interactions[p]){if("dragend"!==o&&c.cancelled)continue;h=i.properties(n,r,c),c.results=[],t(a||c[d]||r.droppable).each((function(s,a){if(h.target=a,n.isPropagationStopped=function(){return!1},!1===(l=a?e.dispatch.call(a,n,h):null)?("drag"==d&&(c.cancelled=!0,r.propagates-=1),"drop"==o&&(c[d][s]=null)):"dropinit"==o&&c.droppable.push(i.element(l)||a),"dragstart"==o&&(c.proxy=t(i.element(l)||c.drag)[0]),c.results.push(l),delete n.result,"dropinit"!==o)return l})),r.results[p]=i.flatten(c.results),"dropinit"==o&&(c.droppable=i.flatten(c.droppable)),"dragstart"!=o||c.cancelled||h.update()}}while(++p<f);return n.type=u.type,n.originalEvent=u.event,i.flatten(r.results)}},properties:function(t,e,n){var o=n.callback;return o.drag=n.drag,o.proxy=n.proxy||n.drag,o.startX=e.pageX,o.startY=e.pageY,o.deltaX=t.pageX-e.pageX,o.deltaY=t.pageY-e.pageY,o.originalX=n.offset.left,o.originalY=n.offset.top,o.offsetX=o.originalX+o.deltaX,o.offsetY=o.originalY+o.deltaY,o.drop=i.flatten((n.drop||[]).slice()),o.available=i.flatten((n.droppable||[]).slice()),o},element:function(t){if(t&&(t.jquery||1==t.nodeType))return t},flatten:function(e){return t.map(e,(function(e){return e&&e.jquery?t.makeArray(e):e&&e.length?i.flatten(e):e}))},textselect:function(e){t(document)[e?"unbind":"bind"]("selectstart",i.dontstart).css("MozUserSelect",e?"":"none"),document.unselectable=e?"off":"on"},dontstart:function(){return!1},callback:function(){}};i.callback.prototype={update:function(){n.drop&&this.available.length&&t.each(this.available,(function(t){n.drop.locate(this,t)}))}};var o=e.dispatch;e.dispatch=function(e){if(!(t.data(this,"suppress."+e.type)-(new Date).getTime()>0))return o.apply(this,arguments);t.removeData(this,"suppress."+e.type)};var r=e.fixHooks.touchstart=e.fixHooks.touchmove=e.fixHooks.touchend=e.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(e,n){if(n){var i=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0]||null;i&&t.each(r.props,(function(t,n){e[n]=i[n]}))}return e}}}(i),t.exports=i.drag},52:function(t,e,n){var i=n(0);!function(t){t.fn.drop=function(e,n,i){var o="string"==typeof e?e:"",r=t.isFunction(e)?e:t.isFunction(n)?n:null;return 0!==o.indexOf("drop")&&(o="drop"+o),i=(e==r?n:i)||{},r?this.bind(o,i,r):this.trigger(o)},t.drop=function(e){e=e||{},n.multi=!0===e.multi?1/0:!1===e.multi?1:isNaN(e.multi)?n.multi:e.multi,n.delay=e.delay||n.delay,n.tolerance=t.isFunction(e.tolerance)?e.tolerance:null===e.tolerance?null:n.tolerance,n.mode=e.mode||n.mode||"intersect"};var e=t.event.special,n=t.event.special.drop={multi:1,delay:20,mode:"overlap",targets:[],datakey:"dropdata",noBubble:!0,add:function(e){t.data(this,n.datakey).related+=1},remove:function(){t.data(this,n.datakey).related-=1},setup:function(){if(!t.data(this,n.datakey)){t.data(this,n.datakey,{related:0,active:[],anyactive:0,winner:0,location:{}}),n.targets.push(this)}},teardown:function(){if(!(t.data(this,n.datakey)||{}).related){t.removeData(this,n.datakey);var e=this;n.targets=t.grep(n.targets,(function(t){return t!==e}))}},handler:function(i,o){var r;if(o)switch(i.type){case"mousedown":case"touchstart":r=t(n.targets),"string"==typeof o.drop&&(r=r.filter(o.drop)),r.each((function(){var e=t.data(this,n.datakey);e.active=[],e.anyactive=0,e.winner=0})),o.droppable=r,e.drag.hijack(i,"dropinit",o);break;case"mousemove":case"touchmove":n.event=i,n.timer||n.tolerate(o);break;case"mouseup":case"touchend":n.timer=clearTimeout(n.timer),o.propagates&&(e.drag.hijack(i,"drop",o),e.drag.hijack(i,"dropend",o))}},locate:function(e,i){var o=t.data(e,n.datakey),r=t(e),s=r.offset()||{},a=r.outerHeight(),l=r.outerWidth(),c={elem:e,width:l,height:a,top:s.top,left:s.left,right:s.left+l,bottom:s.top+a};return o&&(o.location=c,o.index=i,o.elem=e),c},contains:function(t,e){return(e[0]||e.left)>=t.left&&(e[0]||e.right)<=t.right&&(e[1]||e.top)>=t.top&&(e[1]||e.bottom)<=t.bottom},modes:{intersect:function(t,e,n){return this.contains(n,[t.pageX,t.pageY])?1e9:this.modes.overlap.apply(this,arguments)},overlap:function(t,e,n){return Math.max(0,Math.min(n.bottom,e.bottom)-Math.max(n.top,e.top))*Math.max(0,Math.min(n.right,e.right)-Math.max(n.left,e.left))},fit:function(t,e,n){return this.contains(n,e)?1:0},middle:function(t,e,n){return this.contains(n,[e.left+.5*e.width,e.top+.5*e.height])?1:0}},sort:function(t,e){return e.winner-t.winner||t.index-e.index},tolerate:function(i){var o,r,s,a,l,c,h,u,d=0,p=i.interactions.length,f=[n.event.pageX,n.event.pageY],g=n.tolerance||n.modes[n.mode];do{if(u=i.interactions[d]){if(!u)return;u.drop=[],l=[],c=u.droppable.length,g&&(s=n.locate(u.proxy)),o=0;do{if(h=u.droppable[o]){if(!(r=(a=t.data(h,n.datakey)).location))continue;a.winner=g?g.call(n,n.event,s,r):n.contains(r,f)?1:0,l.push(a)}}while(++o<c);l.sort(n.sort),o=0;do{(a=l[o])&&(a.winner&&u.drop.length<n.multi?(a.active[d]||a.anyactive||(!1!==e.drag.hijack(n.event,"dropstart",i,d,a.elem)[0]?(a.active[d]=1,a.anyactive+=1):a.winner=0),a.winner&&u.drop.push(a.elem)):a.active[d]&&1==a.anyactive&&(e.drag.hijack(n.event,"dropend",i,d,a.elem),a.active[d]=0,a.anyactive-=1))}while(++o<c)}}while(++d<p);n.last&&f[0]==n.last.pageX&&f[1]==n.last.pageY?delete n.timer:n.timer=setTimeout((function(){n.tolerate(i)}),n.delay),n.last=n.event}};e.dropinit=e.dropstart=e.dropend=n}(i),t.exports=i.drop},53:function(t,e,n){var i,o;i=[n(0)],void 0===(o=function(t){"use strict";return function(){var e=this;e.baseUrl=t("body").attr("data-i18ncatalogurl"),e.baseUrl||(e.baseUrl="/plonejsi18n"),e.currentLanguage=t("html").attr("lang")||"en",e.currentLanguage.split("-").length>1&&(e.currentLanguage=e.currentLanguage.split("-")[0]+"_"+e.currentLanguage.split("-")[1].toUpperCase()),e.storage=null,e.catalogs={},e.ttl=864e5,Date.now||(Date.now=function(){return(new Date).valueOf()});try{"localStorage"in window&&null!==window.localStorage&&"JSON"in window&&null!==window.JSON&&(e.storage=window.localStorage)}catch(t){}e.configure=function(t){for(var n in t)e[n]=t[n]},e._setCatalog=function(t,n,i){t in e.catalogs?e.catalogs[t][n]=i:(e.catalogs[t]={},e.catalogs[t][n]=i)},e._storeCatalog=function(t,n,i){var o=t+"-"+n;null!==e.storage&&null!==i&&(e.storage.setItem(o,JSON.stringify(i)),e.storage.setItem(o+"-updated",Date.now()))},e.getUrl=function(t,n){return e.baseUrl+"?domain="+t+"&language="+n},e.loadCatalog=function(n,i){if(void 0===i&&(i=e.currentLanguage),null!==e.storage){var o=n+"-"+i;if(o in e.storage&&Date.now()-parseInt(e.storage.getItem(o+"-updated"),10)<e.ttl){var r=JSON.parse(e.storage.getItem(o));return void e._setCatalog(n,i,r)}}t.getJSON(e.getUrl(n,i),(function(t){null!==t&&(e._setCatalog(n,i,t),e._storeCatalog(n,i,t))}))},e.MessageFactory=function(t,n){return n=n||e.currentLanguage,function(i,o){var r,s,a;if(r=t in e.catalogs&&n in e.catalogs[t]&&i in e.catalogs[t][n]?e.catalogs[t][n][i]:i,o)for(a in o)o.hasOwnProperty(a)&&(s=new RegExp("\\$\\{"+a+"\\}","g"),r=r.replace(s,o[a]));return r}}}}.apply(e,i))||(t.exports=o)},60:function(t,e,n){var i,o=n(0);void 0===(i=o).fn.each2&&i.extend(i.fn,{each2:function(t){for(var e=i([0]),n=-1,o=this.length;++n<o&&(e.context=e[0]=this[n])&&!1!==t.call(e[0],n,e););return this}}),function(t,e){"use strict";function n(e){var n=t(document.createTextNode(""));e.before(n),n.before(e),n.remove()}function i(t){return t.replace(/[^\u0000-\u007E]/g,(function(t){return R[t]||t}))}function o(t,e){for(var n=0,i=e.length;i>n;n+=1)if(r(t,e[n]))return n;return-1}function r(t,n){return t===n||t!==e&&n!==e&&(null!==t&&null!==n&&(t.constructor===String?t+""==n+"":n.constructor===String&&n+""==t+""))}function s(t,e,n){var i,o,r;if(null===t||t.length<1)return[];for(o=0,r=(i=t.split(e)).length;r>o;o+=1)i[o]=n(i[o]);return i}function a(t){return t.outerWidth(!1)-t.width()}function l(n){var i="keyup-change-value";n.on("keydown",(function(){t.data(n,i)===e&&t.data(n,i,n.val())})),n.on("keyup",(function(){var o=t.data(n,i);o!==e&&n.val()!==o&&(t.removeData(n,i),n.trigger("keyup-change"))}))}function c(n){n.on("mousemove",(function(n){var i=N;(i===e||i.x!==n.pageX||i.y!==n.pageY)&&t(n.target).trigger("mousemove-filtered",n)}))}function h(t,n,i){var o;return i=i||e,function(){var e=arguments;window.clearTimeout(o),o=window.setTimeout((function(){n.apply(i,e)}),t)}}function u(e){var n=0,i=0;if("selectionStart"in(e=t(e)[0]))n=e.selectionStart,i=e.selectionEnd-n;else if("selection"in document){e.focus();var o=document.selection.createRange();i=document.selection.createRange().text.length,o.moveStart("character",-e.value.length),n=o.text.length-i}return{offset:n,length:i}}function d(t){t.preventDefault(),t.stopPropagation()}function p(e){if(!_){var n=e[0].currentStyle||window.getComputedStyle(e[0],null);(_=t(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"})).attr("class","select2-sizer"),t(document.body).append(_)}return _.text(e.val()),_.width()}function f(e,n,i){var o,r,s=[];(o=t.trim(e.attr("class")))&&t((o=""+o).split(/\s+/)).each2((function(){0===this.indexOf("select2-")&&s.push(this)})),(o=t.trim(n.attr("class")))&&t((o=""+o).split(/\s+/)).each2((function(){0!==this.indexOf("select2-")&&((r=i(this))&&s.push(r))})),e.attr("class",s.join(" "))}function g(t,e,n,o){var r=i(t.toUpperCase()).indexOf(i(e.toUpperCase())),s=e.length;return 0>r?void n.push(o(t)):(n.push(o(t.substring(0,r))),n.push("<span class='select2-match'>"),n.push(o(t.substring(r,r+s))),n.push("</span>"),void n.push(o(t.substring(r+s,t.length))))}function m(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(t).replace(/[&<>"'\/\\]/g,(function(t){return e[t]}))}function v(n){var i,o=null,r=n.quietMillis||100,s=n.url,a=this;return function(l){window.clearTimeout(i),i=window.setTimeout((function(){var i=n.data,r=s,c=n.transport||t.fn.select2.ajaxDefaults.transport,h={type:n.type||"GET",cache:n.cache||!1,jsonpCallback:n.jsonpCallback||e,dataType:n.dataType||"json"},u=t.extend({},t.fn.select2.ajaxDefaults.params,h);i=i?i.call(a,l.term,l.page,l.context):null,r="function"==typeof r?r.call(a,l.term,l.page,l.context):r,o&&"function"==typeof o.abort&&o.abort(),n.params&&(t.isFunction(n.params)?t.extend(u,n.params.call(a)):t.extend(u,n.params)),t.extend(u,{url:r,dataType:n.dataType,data:i,success:function(t){var e=n.results(t,l.page,l);l.callback(e)},error:function(t,e,n){var i={hasError:!0,jqXHR:t,textStatus:e,errorThrown:n};l.callback(i)}}),o=c.call(a,u)}),r)}}function y(e){var n,i,o=e,r=function(t){return""+t.text};t.isArray(o)&&(o={results:i=o}),!1===t.isFunction(o)&&(i=o,o=function(){return i});var s=o();return s.text&&(r=s.text,t.isFunction(r)||(n=s.text,r=function(t){return t[n]})),function(e){var n,i=e.term,s={results:[]};return""===i?void e.callback(o()):(n=function(o,s){var a,l;if((o=o[0]).children){for(l in a={},o)o.hasOwnProperty(l)&&(a[l]=o[l]);a.children=[],t(o.children).each2((function(t,e){n(e,a.children)})),(a.children.length||e.matcher(i,r(a),o))&&s.push(a)}else e.matcher(i,r(o),o)&&s.push(o)},t(o().results).each2((function(t,e){n(e,s.results)})),void e.callback(s))}}function b(n){var i=t.isFunction(n);return function(o){var r=o.term,s={results:[]},a=i?n(o):n;t.isArray(a)&&(t(a).each((function(){var t=this.text!==e,n=t?this.text:this;(""===r||o.matcher(r,n))&&s.results.push(t?this:{id:this,text:this})})),o.callback(s))}}function w(e,n){if(t.isFunction(e))return!0;if(!e)return!1;if("string"==typeof e)return!0;throw new Error(n+" must be a string, function, or falsy value")}function x(e,n){if(t.isFunction(e)){var i=Array.prototype.slice.call(arguments,2);return e.apply(n,i)}return e}function S(e){var n=0;return t.each(e,(function(t,e){e.children?n+=S(e.children):n++})),n}function C(){var e=this;t.each(arguments,(function(t,n){e[n].remove(),e[n]=null}))}function k(e,n){var i=function(){};return(i.prototype=new e).constructor=i,i.prototype.parent=e.prototype,i.prototype=t.extend(i.prototype,n),i}if(window.Select2===e){var T,E,O,A,_,j,I,N={x:0,y:0},M={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(t){switch(t=t.which?t.which:t){case M.LEFT:case M.RIGHT:case M.UP:case M.DOWN:return!0}return!1},isControl:function(t){switch(t.which){case M.SHIFT:case M.CTRL:case M.ALT:return!0}return!!t.metaKey},isFunctionKey:function(t){return(t=t.which?t.which:t)>=112&&123>=t}},P="<div class='select2-measure-scrollbar'></div>",R={"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};j=t(document),A=function(){var t=1;return function(){return t++}}(),T=k(Object,{bind:function(t){var e=this;return function(){t.apply(e,arguments)}},init:function(n){var i,r,s=".select2-results";this.opts=n=this.prepareOpts(n),this.id=n.id,n.element.data("select2")!==e&&null!==n.element.data("select2")&&n.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=t(".select2-hidden-accessible"),0==this.liveRegion.length&&(this.liveRegion=t("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body)),this.containerId="s2id_"+(n.element.attr("id")||"autogen"+A()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",n.element.attr("title")),this.body=t(document.body),f(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",n.element.attr("style")),this.container.css(x(n.containerCss,this.opts.element)),this.container.addClass(x(n.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",d),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),f(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(x(n.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",d),this.results=i=this.container.find(s),this.search=r=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",d),c(this.results),this.dropdown.on("mousemove-filtered",s,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",s,this.bind((function(t){this._touchEvent=!0,this.highlightUnderEvent(t)}))),this.dropdown.on("touchmove",s,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",s,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind((function(t){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())}))),function(t,e){var n=h(t,(function(t){e.trigger("scroll-debounced",t)}));e.on("scroll",(function(t){o(t.target,e.get())>=0&&n(t)}))}(80,this.results),this.dropdown.on("scroll-debounced",s,this.bind(this.loadMoreIfNeeded)),t(this.container).on("change",".select2-input",(function(t){t.stopPropagation()})),t(this.dropdown).on("change",".select2-input",(function(t){t.stopPropagation()})),t.fn.mousewheel&&i.mousewheel((function(t,e,n,o){var r=i.scrollTop();o>0&&0>=r-o?(i.scrollTop(0),d(t)):0>o&&i.get(0).scrollHeight-i.scrollTop()+o<=i.height()&&(i.scrollTop(i.get(0).scrollHeight-i.height()),d(t))})),l(r),r.on("keyup-change input paste",this.bind(this.updateResults)),r.on("focus",(function(){r.addClass("select2-focused")})),r.on("blur",(function(){r.removeClass("select2-focused")})),this.dropdown.on("mouseup",s,this.bind((function(e){t(e.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(e),this.selectHighlighted(e))}))),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",(function(t){t.stopPropagation()})),this.lastSearchTerm=e,t.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==n.maximumInputLength&&this.search.attr("maxlength",n.maximumInputLength);var a=n.element.prop("disabled");a===e&&(a=!1),this.enable(!a);var u=n.element.prop("readonly");u===e&&(u=!1),this.readonly(u),I=I||function(){var e=t(P);e.appendTo(document.body);var n={width:e.width()-e[0].clientWidth,height:e.height()-e[0].clientHeight};return e.remove(),n}(),this.autofocus=n.element.prop("autofocus"),n.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",n.searchInputPlaceholder)},destroy:function(){var t=this.opts.element,n=t.data("select2"),i=this;this.close(),t.length&&t[0].detachEvent&&i._sync&&t.each((function(){i._sync&&this.detachEvent("onpropertychange",i._sync)})),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,n!==e&&(n.container.remove(),n.liveRegion.remove(),n.dropdown.remove(),t.removeData("select2").off(".select2"),t.is("input[type='hidden']")?t.css("display",""):(t.show().prop("autofocus",this.autofocus||!1),this.elementTabIndex?t.attr({tabindex:this.elementTabIndex}):t.removeAttr("tabindex"),t.show())),C.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(t){return t.is("option")?{id:t.prop("value"),text:t.text(),element:t.get(),css:t.attr("class"),disabled:t.prop("disabled"),locked:r(t.attr("locked"),"locked")||r(t.data("locked"),!0)}:t.is("optgroup")?{text:t.attr("label"),children:[],element:t.get(),css:t.attr("class")}:void 0},prepareOpts:function(n){var i,o,a,l,c=this;if("select"===(i=n.element).get(0).tagName.toLowerCase()&&(this.select=o=n.element),o&&t.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],(function(){if(this in n)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")})),n.debug=n.debug||t.fn.select2.defaults.debug,n.debug&&console&&console.warn&&(null!=n.id&&console.warn("Select2: The `id` option has been removed in Select2 4.0.0, consider renaming your `id` property or mapping the property before your data makes it to Select2. You can read more at https://select2.github.io/announcements-4.0.html#changed-id"),null!=n.text&&console.warn("Select2: The `text` option has been removed in Select2 4.0.0, consider renaming your `text` property or mapping the property before your data makes it to Select2. You can read more at https://select2.github.io/announcements-4.0.html#changed-id"),null!=n.sortResults&&console.warn("Select2: the `sortResults` option has been renamed to `sorter` in Select2 4.0.0. "),null!=n.selectOnBlur&&console.warn("Select2: The `selectOnBlur` option has been renamed to `selectOnClose` in Select2 4.0.0."),null!=n.ajax&&null!=n.ajax.results&&console.warn("Select2: The `ajax.results` option has been renamed to `ajax.processResults` in Select2 4.0.0."),null!=n.formatNoResults&&console.warn("Select2: The `formatNoResults` option has been renamed to `language.noResults` in Select2 4.0.0."),null!=n.formatSearching&&console.warn("Select2: The `formatSearching` option has been renamed to `language.searching` in Select2 4.0.0."),null!=n.formatInputTooShort&&console.warn("Select2: The `formatInputTooShort` option has been renamed to `language.inputTooShort` in Select2 4.0.0."),null!=n.formatInputTooLong&&console.warn("Select2: The `formatInputTooLong` option has been renamed to `language.inputTooLong` in Select2 4.0.0."),null!=n.formatLoading&&console.warn("Select2: The `formatLoading` option has been renamed to `language.loadingMore` in Select2 4.0.0."),null!=n.formatSelectionTooBig&&console.warn("Select2: The `formatSelectionTooBig` option has been renamed to `language.maximumSelected` in Select2 4.0.0."),n.element.data("select2Tags")&&console.warn("Select2: The `data-select2-tags` attribute has been renamed to `data-tags` in Select2 4.0.0.")),null!=n.element.data("tags")){var h=n.element.data("tags");t.isArray(h)||(h=[]),n.element.data("select2Tags",h)}if(null!=n.sorter&&(n.sortResults=n.sorter),null!=n.selectOnClose&&(n.selectOnBlur=n.selectOnClose),null!=n.ajax&&t.isFunction(n.ajax.processResults)&&(n.ajax.results=n.ajax.processResults),null!=n.language){var u=n.language;t.isFunction(u.noMatches)&&(n.formatNoMatches=u.noMatches),t.isFunction(u.searching)&&(n.formatSearching=u.searching),t.isFunction(u.inputTooShort)&&(n.formatInputTooShort=u.inputTooShort),t.isFunction(u.inputTooLong)&&(n.formatInputTooLong=u.inputTooLong),t.isFunction(u.loadingMore)&&(n.formatLoading=u.loadingMore),t.isFunction(u.maximumSelected)&&(n.formatSelectionTooBig=u.maximumSelected)}if("function"!=typeof(n=t.extend({},{populateResults:function(i,o,r){var s,a=this.opts.id,l=this.liveRegion;(s=function(i,o,h){var u,d,p,f,g,m,v,y,b,w,x=[];for(u=0,d=(i=n.sortResults(i,o,r)).length;d>u;u+=1)f=!(g=!0===(p=i[u]).disabled)&&a(p)!==e,m=p.children&&p.children.length>0,(v=t("<li></li>")).addClass("select2-results-dept-"+h),v.addClass("select2-result"),v.addClass(f?"select2-result-selectable":"select2-result-unselectable"),g&&v.addClass("select2-disabled"),m&&v.addClass("select2-result-with-children"),v.addClass(c.opts.formatResultCssClass(p)),v.attr("role","presentation"),(y=t(document.createElement("div"))).addClass("select2-result-label"),y.attr("id","select2-result-label-"+A()),y.attr("role","option"),(w=n.formatResult(p,y,r,c.opts.escapeMarkup))!==e&&(y.html(w),v.append(y)),m&&((b=t("<ul></ul>")).addClass("select2-result-sub"),s(p.children,b,h+1),v.append(b)),v.data("select2-data",p),x.push(v[0]);o.append(x),l.text(n.formatMatches(i.length))})(o,i,0)}},t.fn.select2.defaults,n)).id&&(a=n.id,n.id=function(t){return t[a]}),t.isArray(n.element.data("select2Tags"))){if("tags"in n)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+n.element.attr("id");n.tags=n.element.data("select2Tags")}if(o?(n.query=this.bind((function(t){var n,o,r,s={results:[],more:!1},a=t.term;r=function(e,n){var i;e.is("option")?t.matcher(a,e.text(),e)&&n.push(c.optionToData(e)):e.is("optgroup")&&(i=c.optionToData(e),e.children().each2((function(t,e){r(e,i.children)})),i.children.length>0&&n.push(i))},n=i.children(),this.getPlaceholder()!==e&&n.length>0&&((o=this.getPlaceholderOption())&&(n=n.not(o))),n.each2((function(t,e){r(e,s.results)})),t.callback(s)})),n.id=function(t){return t.id}):"query"in n||("ajax"in n?((l=n.element.data("ajax-url"))&&l.length>0&&(n.ajax.url=l),n.query=v.call(n.element,n.ajax)):"data"in n?n.query=y(n.data):"tags"in n&&(n.query=b(n.tags),n.createSearchChoice===e&&(n.createSearchChoice=function(e){return{id:t.trim(e),text:t.trim(e)}}),n.initSelection===e&&(n.initSelection=function(e,i){var o=[];t(s(e.val(),n.separator,n.transformVal)).each((function(){var e={id:this,text:this},i=n.tags;t.isFunction(i)&&(i=i()),t(i).each((function(){return r(this.id,e.id)?(e=this,!1):void 0})),o.push(e)})),i(o)}))),"function"!=typeof n.query)throw"query function not defined for Select2 "+n.element.attr("id");if("top"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(t,e){t.unshift(e)};else if("bottom"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(t,e){t.push(e)};else if("function"!=typeof n.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return n},monitorSource:function(){var n,i=this.opts.element,o=this;i.on("change.select2",this.bind((function(t){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()}))),this._sync=this.bind((function(){var t=i.prop("disabled");t===e&&(t=!1),this.enable(!t);var n=i.prop("readonly");n===e&&(n=!1),this.readonly(n),this.container&&(f(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(x(this.opts.containerCssClass,this.opts.element))),this.dropdown&&(f(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(x(this.opts.dropdownCssClass,this.opts.element)))})),i.length&&i[0].attachEvent&&i.each((function(){this.attachEvent("onpropertychange",o._sync)})),(n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)!==e&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new n((function(e){t.each(e,o._sync)})),this.propertyObserver.observe(i.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(e){var n=t.Event("select2-selecting",{val:this.id(e),object:e,choice:e});return this.opts.element.trigger(n),!n.isDefaultPrevented()},triggerChange:function(e){e=e||{},e=t.extend({},e,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(e),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var t=this._enabled&&!this._readonly,e=!t;return t!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",e),this.close(),this.enabledInterface=t,!0)},enable:function(t){t===e&&(t=!0),this._enabled!==t&&(this._enabled=t,this.opts.element.prop("disabled",!t),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(t){t===e&&(t=!1),this._readonly!==t&&(this._readonly=t,this.opts.element.prop("readonly",t),this.enableInterface())},opened:function(){return!!this.container&&this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var e,n,i,o,r,s=this.dropdown,a=this.container,l=a.offset(),c=a.outerHeight(!1),h=a.outerWidth(!1),u=s.outerHeight(!1),d=t(window),p=d.width(),f=d.height(),g=d.scrollLeft()+p,m=d.scrollTop()+f,v=l.top+c,y=l.left,b=m>=v+u,w=l.top-u>=d.scrollTop(),S=s.outerWidth(!1);s.hasClass("select2-drop-above")?(n=!0,!w&&b&&(i=!0,n=!1)):(n=!1,!b&&w&&(i=!0,n=!0)),i&&(s.hide(),l=this.container.offset(),c=this.container.outerHeight(!1),h=this.container.outerWidth(!1),u=s.outerHeight(!1),g=d.scrollLeft()+p,m=d.scrollTop()+f,v=l.top+c,y=l.left,S=s.outerWidth(!1),s.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(r=t(".select2-results",s)[0],s.addClass("select2-drop-auto-width"),s.css("width",""),(S=s.outerWidth(!1)+(r.scrollHeight===r.clientHeight?0:I.width))>h?h=S:S=h,u=s.outerHeight(!1)):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(v-=(e=this.body.offset()).top,y-=e.left),!(g>=y+S)&&l.left+g+a.outerWidth(!1)>S&&(y=l.left+this.container.outerWidth(!1)-S),o={left:y,width:h},n?(this.container.addClass("select2-drop-above"),s.addClass("select2-drop-above"),u=s.outerHeight(!1),o.top=l.top-u,o.bottom="auto"):(o.top=v,o.bottom="auto",this.container.removeClass("select2-drop-above"),s.removeClass("select2-drop-above")),o=t.extend(o,x(this.opts.dropdownCss,this.opts.element)),s.css(o)},shouldOpen:function(){var e;return!this.opened()&&(!1!==this._enabled&&!0!==this._readonly&&(e=t.Event("select2-opening"),this.opts.element.trigger(e),!e.isDefaultPrevented()))},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),j.on("mousemove.select2Event",(function(t){N.x=t.pageX,N.y=t.pageY})),!0)},opening:function(){var e,i=this.containerEventName,o="scroll."+i,r="resize."+i,s="orientationchange."+i;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),0===(e=t("#select2-drop-mask")).length&&((e=t(document.createElement("div"))).attr("id","select2-drop-mask").attr("class","select2-drop-mask"),e.hide(),e.appendTo(this.body),e.on("mousedown touchstart click",(function(i){n(e);var o,r=t("#select2-drop");r.length>0&&((o=r.data("select2")).opts.selectOnBlur&&o.selectHighlighted({noFocus:!0}),o.close(),i.preventDefault(),i.stopPropagation())}))),this.dropdown.prev()[0]!==e[0]&&this.dropdown.before(e),t("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),e.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var a=this;this.container.parents().add(window).each((function(){t(this).on(r+" "+o+" "+s,(function(t){a.opened()&&a.positionDropdown()}))}))},close:function(){if(this.opened()){var e=this.containerEventName,n="scroll."+e,i="resize."+e,o="orientationchange."+e;this.container.parents().add(window).each((function(){t(this).off(n).off(i).off(o)})),this.clearDropdownAlignmentPreference(),t("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),j.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.search.removeAttr("aria-activedescendant"),this.opts.element.trigger(t.Event("select2-close"))}},externalSearch:function(t){this.open(),this.search.val(t),this.updateResults(!1)},clearSearch:function(){},prefillNextSearchTerm:function(){if(""!==this.search.val())return!1;var t=this.opts.nextSearchTerm(this.data(),this.lastSearchTerm);return t!==e&&(this.search.val(t),this.search.select(),!0)},getMaximumSelectionSize:function(){return x(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var e,n,i,o,r,s,a,l,c=this.results;if(!(0>(n=this.highlight()))){if(0==n)return void c.scrollTop(0);e=this.findHighlightableChoices().find(".select2-result-label"),o=(l=((i=t(e[n])).offset()||{}).top||0)+i.outerHeight(!0),n===e.length-1&&((a=c.find("li.select2-more-results")).length>0&&(o=a.offset().top+a.outerHeight(!0))),o>(r=c.offset().top+c.outerHeight(!1))&&c.scrollTop(c.scrollTop()+(o-r)),0>(s=l-c.offset().top)&&"none"!=i.css("display")&&c.scrollTop(c.scrollTop()+s)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(e){for(var n=this.findHighlightableChoices(),i=this.highlight();i>-1&&i<n.length;){var o=t(n[i+=e]);if(o.hasClass("select2-result-selectable")&&!o.hasClass("select2-disabled")&&!o.hasClass("select2-selected")){this.highlight(i);break}}},highlight:function(e){var n,i,r=this.findHighlightableChoices();return 0===arguments.length?o(r.filter(".select2-highlighted")[0],r.get()):(e>=r.length&&(e=r.length-1),0>e&&(e=0),this.removeHighlight(),(n=t(r[e])).addClass("select2-highlighted"),this.search.attr("aria-activedescendant",n.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(n.text()),void((i=n.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(i),choice:i})))},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(e){var n=t(e.target).closest(".select2-result-selectable");if(n.length>0&&!n.is(".select2-highlighted")){var i=this.findHighlightableChoices();this.highlight(i.index(n))}else 0==n.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var t=this.results,e=t.find("li.select2-more-results"),n=this.resultsPage+1,i=this,o=this.search.val(),r=this.context;0!==e.length&&(e.offset().top-t.offset().top-t.height()<=this.opts.loadMorePadding&&(e.addClass("select2-active"),this.opts.query({element:this.opts.element,term:o,page:n,context:r,matcher:this.opts.matcher,callback:this.bind((function(s){i.opened()&&(i.opts.populateResults.call(this,t,s.results,{term:o,page:n,context:r}),i.postprocessResults(s,!1,!1),!0===s.more?(e.detach().appendTo(t).html(i.opts.escapeMarkup(x(i.opts.formatLoadMore,i.opts.element,n+1))),window.setTimeout((function(){i.loadMoreIfNeeded()}),10)):e.remove(),i.positionDropdown(),i.resultsPage=n,i.context=s.context,this.opts.element.trigger({type:"select2-loaded",items:s}))}))})))},tokenize:function(){},updateResults:function(n){function i(){c.removeClass("select2-active"),d.positionDropdown(),h.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?d.liveRegion.text(h.text()):d.liveRegion.text(d.opts.formatMatches(h.find('.select2-result-selectable:not(".select2-selected")').length))}function o(t){h.html(t),i()}var s,a,l,c=this.search,h=this.results,u=this.opts,d=this,p=c.val(),f=t.data(this.container,"select2-last-term");if((!0===n||!f||!r(p,f))&&(t.data(this.container,"select2-last-term",p),!0===n||!1!==this.showSearchInput&&this.opened())){l=++this.queryCount;var g=this.getMaximumSelectionSize();if(g>=1&&(s=this.data(),t.isArray(s)&&s.length>=g&&w(u.formatSelectionTooBig,"formatSelectionTooBig")))return void o("<li class='select2-selection-limit'>"+x(u.formatSelectionTooBig,u.element,g)+"</li>");if(c.val().length<u.minimumInputLength)return o(w(u.formatInputTooShort,"formatInputTooShort")?"<li class='select2-no-results'>"+x(u.formatInputTooShort,u.element,c.val(),u.minimumInputLength)+"</li>":""),void(n&&this.showSearch&&this.showSearch(!0));if(u.maximumInputLength&&c.val().length>u.maximumInputLength)return void o(w(u.formatInputTooLong,"formatInputTooLong")?"<li class='select2-no-results'>"+x(u.formatInputTooLong,u.element,c.val(),u.maximumInputLength)+"</li>":"");u.formatSearching&&0===this.findHighlightableChoices().length&&o("<li class='select2-searching'>"+x(u.formatSearching,u.element)+"</li>"),c.addClass("select2-active"),this.removeHighlight(),(a=this.tokenize())!=e&&null!=a&&c.val(a),this.resultsPage=1,u.query({element:u.element,term:c.val(),page:this.resultsPage,context:null,matcher:u.matcher,callback:this.bind((function(s){var a;if(l==this.queryCount){if(!this.opened())return void this.search.removeClass("select2-active");if(s.hasError!==e&&w(u.formatAjaxError,"formatAjaxError"))return void o("<li class='select2-ajax-error'>"+x(u.formatAjaxError,u.element,s.jqXHR,s.textStatus,s.errorThrown)+"</li>");if(this.context=s.context===e?null:s.context,this.opts.createSearchChoice&&""!==c.val()&&((a=this.opts.createSearchChoice.call(d,c.val(),s.results))!==e&&null!==a&&d.id(a)!==e&&null!==d.id(a)&&0===t(s.results).filter((function(){return r(d.id(this),d.id(a))})).length&&this.opts.createSearchChoicePosition(s.results,a)),0===s.results.length&&w(u.formatNoMatches,"formatNoMatches"))return o("<li class='select2-no-results'>"+x(u.formatNoMatches,u.element,c.val())+"</li>"),void(this.showSearch&&this.showSearch(c.val()));h.empty(),d.opts.populateResults.call(this,h,s.results,{term:c.val(),page:this.resultsPage,context:null}),!0===s.more&&w(u.formatLoadMore,"formatLoadMore")&&(h.append("<li class='select2-more-results'>"+u.escapeMarkup(x(u.formatLoadMore,u.element,this.resultsPage))+"</li>"),window.setTimeout((function(){d.loadMoreIfNeeded()}),10)),this.postprocessResults(s,n),i(),this.opts.element.trigger({type:"select2-loaded",items:s})}}))})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){!function(t){t[0]!==document.activeElement&&window.setTimeout((function(){var e,n=t[0],i=t.val().length;t.focus(),(n.offsetWidth>0||n.offsetHeight>0)&&n===document.activeElement&&(n.setSelectionRange?n.setSelectionRange(i,i):n.createTextRange&&((e=n.createTextRange()).collapse(!1),e.select()))}),0)}(this.search)},selectHighlighted:function(t){if(this._touchMoved)this.clearTouchMoved();else{var e=this.highlight(),n=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");n?(this.highlight(e),this.onSelect(n,t)):t&&t.noFocus&&this.close()}},getPlaceholder:function(){var t;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((t=this.getPlaceholderOption())!==e?t.text():e)},getPlaceholderOption:function(){if(this.select){var n=this.select.children("option").first();if(this.opts.placeholderOption!==e)return"first"===this.opts.placeholderOption&&n||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===t.trim(n.text())&&""===n.val())return n}},initContainerWidth:function(){var e=function(){var e,n,i,o,r;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if("string"==typeof(e=this.opts.element.attr("style")))for(o=0,r=(n=e.split(";")).length;r>o;o+=1)if(null!==(i=n[o].replace(/\s/g,"").match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&i.length>=1)return i[1];return"resolve"===this.opts.width?(e=this.opts.element.css("width")).indexOf("%")>0?e:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}return t.isFunction(this.opts.width)?this.opts.width():this.opts.width}.call(this);null!==e&&this.container.css("width",e)}}),E=k(T,{createContainer:function(){return t(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""))},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var e,n,i;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),(e=this.search.get(0)).createTextRange?((n=e.createTextRange()).collapse(!1),n.select()):e.setSelectionRange&&(i=this.search.val().length,e.setSelectionRange(i,i))),this.prefillNextSearchTerm(),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(t.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){t("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),C.call(this,"selection","focusser")},initContainer:function(){var e,i,o=this.container,r=this.dropdown,s=A();this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=e=o.find(".select2-choice"),this.focusser=o.find(".select2-focusser"),e.find(".select2-chosen").attr("id","select2-chosen-"+s),this.focusser.attr("aria-labelledby","select2-chosen-"+s),this.results.attr("id","select2-results-"+s),this.search.attr("aria-owns","select2-results-"+s),this.focusser.attr("id","s2id_autogen"+s),i=t("label[for='"+this.opts.element.attr("id")+"']"),this.opts.element.on("focus.select2",this.bind((function(){this.focus()}))),this.focusser.prev().text(i.text()).attr("for",this.focusser.attr("id"));var a=this.opts.element.attr("title");this.opts.element.attr("title",a||i.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(t("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind((function(t){if(this.isInterfaceEnabled()&&229!=t.keyCode){if(t.which===M.PAGE_UP||t.which===M.PAGE_DOWN)return void d(t);switch(t.which){case M.UP:case M.DOWN:return this.moveHighlight(t.which===M.UP?-1:1),void d(t);case M.ENTER:return this.selectHighlighted(),void d(t);case M.TAB:return void this.selectHighlighted({noFocus:!0});case M.ESC:return this.cancel(t),void d(t)}}}))),this.search.on("blur",this.bind((function(t){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind((function(){this.opened()&&this.results&&this.results.length>1&&this.search.focus()})),0)}))),this.focusser.on("keydown",this.bind((function(t){if(this.isInterfaceEnabled()&&t.which!==M.TAB&&!M.isControl(t)&&!M.isFunctionKey(t)&&t.which!==M.ESC){if(!1===this.opts.openOnEnter&&t.which===M.ENTER)return void d(t);if(t.which==M.DOWN||t.which==M.UP||t.which==M.ENTER&&this.opts.openOnEnter){if(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey)return;return this.open(),void d(t)}return t.which==M.DELETE||t.which==M.BACKSPACE?(this.opts.allowClear&&this.clear(),void d(t)):void 0}}))),l(this.focusser),this.focusser.on("keyup-change input",this.bind((function(t){if(this.opts.minimumResultsForSearch>=0){if(t.stopPropagation(),this.opened())return;this.open()}}))),e.on("mousedown touchstart","abbr",this.bind((function(t){this.isInterfaceEnabled()&&(this.clear(),function(t){t.preventDefault(),t.stopImmediatePropagation()}(t),this.close(),this.selection&&this.selection.focus())}))),e.on("mousedown touchstart",this.bind((function(i){n(e),this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),d(i)}))),r.on("mousedown touchstart",this.bind((function(){this.opts.shouldFocusInput(this)&&this.search.focus()}))),e.on("focus",this.bind((function(t){d(t)}))),this.focusser.on("focus",this.bind((function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active")}))).on("blur",this.bind((function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(t.Event("select2-blur")))}))),this.search.on("focus",this.bind((function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active")}))),this.initContainerWidth(),this.opts.element.hide(),this.setPlaceholder()},clear:function(e){var n=this.selection.data("select2-data");if(n){var i=t.Event("select2-clearing");if(this.opts.element.trigger(i),i.isDefaultPrevented())return;var o=this.getPlaceholderOption();this.opts.element.val(o?o.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==e&&(this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var t=this;this.opts.initSelection.call(null,this.opts.element,(function(n){n!==e&&null!==n&&(t.updateSelection(n),t.close(),t.setPlaceholder(),t.lastSearchTerm=t.search.val())}))}},isPlaceholderOptionSelected:function(){var t;return this.getPlaceholder()!==e&&((t=this.getPlaceholderOption())!==e&&t.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===e||null===this.opts.element.val())},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(t,e){var i=t.find("option").filter((function(){return this.selected&&!this.disabled}));e(n.optionToData(i))}:"data"in e&&(e.initSelection=e.initSelection||function(n,i){var o=n.val(),s=null;e.query({matcher:function(t,n,i){var a=r(o,e.id(i));return a&&(s=i),a},callback:t.isFunction(i)?function(){i(s)}:t.noop})}),e},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===e?e:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var t=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&t!==e){if(this.select&&this.getPlaceholderOption()===e)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(t)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(t,e,n){var i=0,o=this;if(this.findHighlightableChoices().each2((function(t,e){return r(o.id(e.data("select2-data")),o.opts.element.val())?(i=t,!1):void 0})),!1!==n&&(!0===e&&i>=0?this.highlight(i):this.highlight(0)),!0===e){var s=this.opts.minimumResultsForSearch;s>=0&&this.showSearch(S(t.results)>=s)}},showSearch:function(e){this.showSearchInput!==e&&(this.showSearchInput=e,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!e),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!e),t(this.dropdown,this.container).toggleClass("select2-with-searchbox",e))},onSelect:function(t,e){if(this.triggerSelect(t)){var n=this.opts.element.val(),i=this.data();this.opts.element.val(this.id(t)),this.updateSelection(t),this.opts.element.trigger({type:"select2-selected",val:this.id(t),choice:t}),this.lastSearchTerm=this.search.val(),this.close(),e&&e.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),r(n,this.id(t))||this.triggerChange({added:t,removed:i})}},updateSelection:function(t){var n,i,o=this.selection.find(".select2-chosen");this.selection.data("select2-data",t),o.empty(),null!==t&&(n=this.opts.formatSelection(t,o,this.opts.escapeMarkup)),n!==e&&o.append(n),(i=this.opts.formatSelectionCssClass(t,o))!==e&&o.addClass(i),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==e&&this.container.addClass("select2-allowclear")},val:function(){var t,n=!1,i=null,o=this,r=this.data();if(0===arguments.length)return this.opts.element.val();if(t=arguments[0],arguments.length>1&&(n=arguments[1],this.opts.debug&&console&&console.warn&&console.warn('Select2: The second option to `select2("val")` is not supported in Select2 4.0.0. The `change` event will always be triggered in 4.0.0.')),this.select)this.opts.debug&&console&&console.warn&&console.warn('Select2: Setting the value on a <select> using `select2("val")` is no longer supported in 4.0.0. You can use the `.val(newValue).trigger("change")` method provided by jQuery instead.'),this.select.val(t).find("option").filter((function(){return this.selected})).each2((function(t,e){return i=o.optionToData(e),!1})),this.updateSelection(i),this.setPlaceholder(),n&&this.triggerChange({added:i,removed:r});else{if(!t&&0!==t)return void this.clear(n);if(this.opts.initSelection===e)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(t),this.opts.initSelection(this.opts.element,(function(t){o.opts.element.val(t?o.id(t):""),o.updateSelection(t),o.setPlaceholder(),n&&o.triggerChange({added:t,removed:r})}))}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(t){var n,i=!1;return 0===arguments.length?((n=this.selection.data("select2-data"))==e&&(n=null),n):(this.opts.debug&&console&&console.warn&&console.warn('Select2: The `select2("data")` method can no longer set selected values in 4.0.0, consider using the `.val()` method instead.'),arguments.length>1&&(i=arguments[1]),void(t?(n=this.data(),this.opts.element.val(t?this.id(t):""),this.updateSelection(t),i&&this.triggerChange({added:t,removed:n})):this.clear(i)))}}),O=k(T,{createContainer:function(){return t(document.createElement("div")).attr({class:"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(t,e){var i=[];t.find("option").filter((function(){return this.selected&&!this.disabled})).each2((function(t,e){i.push(n.optionToData(e))})),e(i)}:"data"in e&&(e.initSelection=e.initSelection||function(n,i){var o=s(n.val(),e.separator,e.transformVal),a=[];e.query({matcher:function(n,i,s){var l=t.grep(o,(function(t){return r(t,e.id(s))})).length;return l&&a.push(s),l},callback:t.isFunction(i)?function(){for(var t=[],n=0;n<o.length;n++)for(var s=o[n],l=0;l<a.length;l++){var c=a[l];if(r(s,e.id(c))){t.push(c),a.splice(l,1);break}}i(t)}:t.noop})}),e},selectChoice:function(t){var e=this.container.find(".select2-search-choice-focus");e.length&&t&&t[0]==e[0]||(e.length&&this.opts.element.trigger("choice-deselected",e),e.removeClass("select2-search-choice-focus"),t&&t.length&&(this.close(),t.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",t)))},destroy:function(){t("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),C.call(this,"searchContainer","selection")},initContainer:function(){var e,n=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=e=this.container.find(n);var i=this;this.selection.on("click",".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)",(function(e){i.search[0].focus(),i.selectChoice(t(this))})),this.search.attr("id","s2id_autogen"+A()),this.search.prev().text(t("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.opts.element.on("focus.select2",this.bind((function(){this.focus()}))),this.search.on("input paste",this.bind((function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())}))),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind((function(t){if(this.isInterfaceEnabled()){++this.keydowns;var n=e.find(".select2-search-choice-focus"),i=n.prev(".select2-search-choice:not(.select2-locked)"),o=n.next(".select2-search-choice:not(.select2-locked)"),r=u(this.search);if(n.length&&(t.which==M.LEFT||t.which==M.RIGHT||t.which==M.BACKSPACE||t.which==M.DELETE||t.which==M.ENTER)){var s=n;return t.which==M.LEFT&&i.length?s=i:t.which==M.RIGHT?s=o.length?o:null:t.which===M.BACKSPACE?this.unselect(n.first())&&(this.search.width(10),s=i.length?i:o):t.which==M.DELETE?this.unselect(n.first())&&(this.search.width(10),s=o.length?o:null):t.which==M.ENTER&&(s=null),this.selectChoice(s),d(t),void(s&&s.length||this.open())}if((t.which===M.BACKSPACE&&1==this.keydowns||t.which==M.LEFT)&&0==r.offset&&!r.length)return this.selectChoice(e.find(".select2-search-choice:not(.select2-locked)").last()),void d(t);if(this.selectChoice(null),this.opened())switch(t.which){case M.UP:case M.DOWN:return this.moveHighlight(t.which===M.UP?-1:1),void d(t);case M.ENTER:return this.selectHighlighted(),void d(t);case M.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case M.ESC:return this.cancel(t),void d(t)}if(t.which!==M.TAB&&!M.isControl(t)&&!M.isFunctionKey(t)&&t.which!==M.BACKSPACE&&t.which!==M.ESC){if(t.which===M.ENTER){if(!1===this.opts.openOnEnter)return;if(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey)return}this.open(),(t.which===M.PAGE_UP||t.which===M.PAGE_DOWN)&&d(t),t.which===M.ENTER&&d(t)}}}))),this.search.on("keyup",this.bind((function(t){this.keydowns=0,this.resizeSearch()}))),this.search.on("blur",this.bind((function(e){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),e.stopImmediatePropagation(),this.opts.element.trigger(t.Event("select2-blur"))}))),this.container.on("click",n,this.bind((function(e){this.isInterfaceEnabled()&&(t(e.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.open(),this.focusSearch(),e.preventDefault()))}))),this.container.on("focus",n,this.bind((function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())}))),this.initContainerWidth(),this.opts.element.hide(),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var t=this;this.opts.initSelection.call(null,this.opts.element,(function(n){n!==e&&null!==n&&(t.updateSelection(n),t.close(),t.clearSearch())}))}},clearSearch:function(){var t=this.getPlaceholder(),n=this.getMaxSearchWidth();t!==e&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(t).addClass("select2-default"),this.search.width(n>0?n:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.prefillNextSearchTerm(),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(t.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(e){var n={},i=[],o=this;t(e).each((function(){o.id(this)in n||(n[o.id(this)]=0,i.push(this))})),this.selection.find(".select2-search-choice").remove(),this.addSelectedChoice(i),o.postprocessResults()},tokenize:function(){var t=this.search.val();null!=(t=this.opts.tokenizer.call(this,t,this.data(),this.bind(this.onSelect),this.opts))&&t!=e&&(this.search.val(t),t.length>0&&this.open())},onSelect:function(t,e){this.triggerSelect(t)&&""!==t.text&&(this.addSelectedChoice(t),this.opts.element.trigger({type:"selected",val:this.id(t),choice:t}),this.lastSearchTerm=this.search.val(),this.clearSearch(),this.updateResults(),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(t,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.prefillNextSearchTerm()&&this.updateResults(),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:t}),e&&e.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(e){var n=this.getVal(),i=this;t(e).each((function(){n.push(i.createChoice(this))})),this.setVal(n)},createChoice:function(n){var i,o,r=!n.locked,s=t("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),a=t("<li class='select2-search-choice select2-locked'><div></div></li>"),l=r?s:a,c=this.id(n);return(i=this.opts.formatSelection(n,l.find("div"),this.opts.escapeMarkup))!=e&&l.find("div").replaceWith(t("<div></div>").html(i)),(o=this.opts.formatSelectionCssClass(n,l.find("div")))!=e&&l.addClass(o),r&&l.find(".select2-search-choice-close").on("mousedown",d).on("click dblclick",this.bind((function(e){this.isInterfaceEnabled()&&(this.unselect(t(e.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),d(e),this.close(),this.focusSearch())}))).on("focus",this.bind((function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))}))),l.data("select2-data",n),l.insertBefore(this.searchContainer),c},unselect:function(e){var n,i,r=this.getVal();if(0===(e=e.closest(".select2-search-choice")).length)throw"Invalid argument: "+e+". Must be .select2-search-choice";if(n=e.data("select2-data")){var s=t.Event("select2-removing");if(s.val=this.id(n),s.choice=n,this.opts.element.trigger(s),s.isDefaultPrevented())return!1;for(;(i=o(this.id(n),r))>=0;)r.splice(i,1),this.setVal(r),this.select&&this.postprocessResults();return e.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}),!0}},postprocessResults:function(t,e,n){var i=this.getVal(),r=this.results.find(".select2-result"),s=this.results.find(".select2-result-with-children"),a=this;r.each2((function(t,e){o(a.id(e.data("select2-data")),i)>=0&&(e.addClass("select2-selected"),e.find(".select2-result-selectable").addClass("select2-selected"))})),s.each2((function(t,e){e.is(".select2-result-selectable")||0!==e.find(".select2-result-selectable:not(.select2-selected)").length||e.addClass("select2-selected")})),-1==this.highlight()&&!1!==n&&!0===this.opts.closeOnSelect&&a.highlight(0),!this.opts.createSearchChoice&&!r.filter(".select2-result:not(.select2-selected)").length>0&&(!t||t&&!t.more&&0===this.results.find(".select2-no-results").length)&&w(a.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+x(a.opts.formatNoMatches,a.opts.element,a.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-a(this.search)},resizeSearch:function(){var t,e,n,i,o=a(this.search);t=p(this.search)+10,e=this.search.offset().left,t>(i=(n=this.selection.width())-(e-this.selection.offset().left)-o)&&(i=n-o),40>i&&(i=n-o),0>=i&&(i=t),this.search.width(Math.floor(i))},getVal:function(){var t;return this.select?null===(t=this.select.val())?[]:t:s(t=this.opts.element.val(),this.opts.separator,this.opts.transformVal)},setVal:function(e){if(this.select)this.select.val(e);else{var n=[],i={};t(e).each((function(){this in i||(n.push(this),i[this]=0)})),this.opts.element.val(0===n.length?"":n.join(this.opts.separator))}},buildChangeDetails:function(t,e){e=e.slice(0),t=t.slice(0);for(var n=0;n<e.length;n++)for(var i=0;i<t.length;i++)if(r(this.opts.id(e[n]),this.opts.id(t[i]))){e.splice(n,1),n--,t.splice(i,1);break}return{added:e,removed:t}},val:function(n,i){var o,r=this;if(0===arguments.length)return this.getVal();if((o=this.data()).length||(o=[]),!n&&0!==n)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(i&&this.triggerChange({added:this.data(),removed:o}));if(this.setVal(n),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),i&&this.triggerChange(this.buildChangeDetails(o,this.data()));else{if(this.opts.initSelection===e)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,(function(e){var n=t.map(e,r.id);r.setVal(n),r.updateSelection(e),r.clearSearch(),i&&r.triggerChange(r.buildChangeDetails(o,r.data()))}))}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var e=[],n=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each((function(){e.push(n.opts.id(t(this).data("select2-data")))})),this.setVal(e),this.triggerChange()},data:function(e,n){var i,o,r=this;return 0===arguments.length?this.selection.children(".select2-search-choice").map((function(){return t(this).data("select2-data")})).get():(o=this.data(),e||(e=[]),i=t.map(e,(function(t){return r.opts.id(t)})),this.setVal(i),this.updateSelection(e),this.clearSearch(),void(n&&this.triggerChange(this.buildChangeDetails(o,this.data()))))}}),t.fn.select2=function(){var n,i,r,s,a,l=Array.prototype.slice.call(arguments,0),c=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],h=["opened","isFocused","container","dropdown"],u=["val","data"],d={search:"externalSearch"};return this.each((function(){if(0===l.length||"object"==typeof l[0])(n=0===l.length?{}:t.extend({},l[0])).element=t(this),"select"===n.element.get(0).tagName.toLowerCase()?a=n.element.prop("multiple"):(a=n.multiple||!1,"tags"in n&&(n.multiple=a=!0)),(i=a?new window.Select2.class.multi:new window.Select2.class.single).init(n);else{if("string"!=typeof l[0])throw"Invalid arguments to select2 plugin: "+l;if(o(l[0],c)<0)throw"Unknown method: "+l[0];if(s=e,(i=t(this).data("select2"))===e)return;if("container"===(r=l[0])?s=i.container:"dropdown"===r?s=i.dropdown:(d[r]&&(r=d[r]),s=i[r].apply(i,l.slice(1))),o(l[0],h)>=0||o(l[0],u)>=0&&1==l.length)return!1}})),s===e?this:s},t.fn.select2.defaults={debug:!1,width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(t,e,n,i){var o=[];return g(this.text(t),n.term,o,i),o.join("")},transformVal:function(e){return t.trim(e)},formatSelection:function(t,n,i){return t?i(this.text(t)):e},sortResults:function(t,e,n){return t},formatResultCssClass:function(t){return t.css},formatSelectionCssClass:function(t,n){return e},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(t){return t==e?null:t.id},text:function(e){return e&&this.data&&this.data.text?t.isFunction(this.data.text)?this.data.text(e):e[this.data.text]:e.text},matcher:function(t,e){return i(""+e).toUpperCase().indexOf(i(""+t).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:function(t,n,i,o){var s,a,l,c,h,u=t,d=!1;if(!o.createSearchChoice||!o.tokenSeparators||o.tokenSeparators.length<1)return e;for(;;){for(a=-1,l=0,c=o.tokenSeparators.length;c>l&&(h=o.tokenSeparators[l],!((a=t.indexOf(h))>=0));l++);if(0>a)break;if(s=t.substring(0,a),t=t.substring(a+h.length),s.length>0&&((s=o.createSearchChoice.call(this,s,n))!==e&&null!==s&&o.id(s)!==e&&null!==o.id(s))){for(d=!1,l=0,c=n.length;c>l;l++)if(r(o.id(s),o.id(n[l]))){d=!0;break}d||i(s)}}return u!==t?t:void 0},escapeMarkup:m,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(t){return t},adaptDropdownCssClass:function(t){return null},nextSearchTerm:function(t,n){return e},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(t){return!(("ontouchstart"in window||navigator.msMaxTouchPoints>0)&&t.opts.minimumResultsForSearch<0)}},t.fn.select2.locales=[],t.fn.select2.locales.en={formatMatches:function(t){return 1===t?"One result is available, press enter to select it.":t+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(t,e,n){return"Loading failed"},formatInputTooShort:function(t,e){var n=e-t.length;return"Please enter "+n+" or more character"+(1==n?"":"s")},formatInputTooLong:function(t,e){var n=t.length-e;return"Please delete "+n+" character"+(1==n?"":"s")},formatSelectionTooBig:function(t){return"You can only select "+t+" item"+(1==t?"":"s")},formatLoadMore:function(t){return"Loading more results"},formatSearching:function(){return"Searching"}},t.extend(t.fn.select2.defaults,t.fn.select2.locales.en),t.fn.select2.ajaxDefaults={transport:t.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:v,local:y,tags:b},util:{debounce:h,markMatch:g,escapeMarkup:m,stripDiacritics:i},class:{abstract:T,single:E,multi:O}}}}(o)},61:function(t,e,n){var i,o;i=[n(0),n(36)],void 0===(o=function(t,e){"use strict";return e.extend({name:"backdrop",trigger:".pat-backdrop",parser:"mockup",defaults:{zIndex:null,opacity:.8,className:"plone-backdrop",classActiveName:"plone-backdrop-active",closeOnEsc:!0,closeOnClick:!0},init:function(){var e=this;e.$backdrop=t("> ."+e.options.className,e.$el),0===e.$backdrop.size()&&(e.$backdrop=t("<div/>").hide().appendTo(e.$el).addClass(e.options.className),null!==e.options.zIndex&&e.$backdrop.css("z-index",e.options.zIndex)),!0===e.options.closeOnEsc&&t(document).on("keydown",(function(t,n){e.$el.is("."+e.options.classActiveName)&&27===t.keyCode&&e.hide()})),!0===e.options.closeOnClick&&e.$backdrop.on("click",(function(){e.$el.is("."+e.options.classActiveName)&&e.hide()}))},show:function(){this.$el.hasClass(this.options.classActiveName)||(this.emit("show"),this.$backdrop.css("opacity","0").show(),this.$el.addClass(this.options.classActiveName),this.$backdrop.animate({opacity:this.options.opacity},500),this.emit("shown"))},hide:function(){this.$el.hasClass(this.options.classActiveName)&&(this.emit("hide"),this.$backdrop.animate({opacity:"0"},500).hide(),this.$el.removeClass(this.options.classActiveName),this.emit("hidden"))}})}.apply(e,i))||(t.exports=o)},62:function(t,e,n){var i,o,r;!function(s){"use strict";o=[n(0)],void 0===(r="function"==typeof(i=function(t){var e={};e.fileapi=void 0!==t("<input type='file'/>").get(0).files,e.formdata=void 0!==window.FormData;var n=!!t.fn.prop;function i(e){var n=e.data;e.isDefaultPrevented()||(e.preventDefault(),t(e.target).ajaxSubmit(n))}function o(e){var n=e.target,i=t(n);if(!i.is("[type=submit],[type=image]")){var o=i.closest("[type=submit]");if(0===o.length)return;n=o[0]}var r=this;if(r.clk=n,"image"==n.type)if(void 0!==e.offsetX)r.clk_x=e.offsetX,r.clk_y=e.offsetY;else if("function"==typeof t.fn.offset){var s=i.offset();r.clk_x=e.pageX-s.left,r.clk_y=e.pageY-s.top}else r.clk_x=e.pageX-n.offsetLeft,r.clk_y=e.pageY-n.offsetTop;setTimeout((function(){r.clk=r.clk_x=r.clk_y=null}),100)}function r(){if(t.fn.ajaxSubmit.debug){var e="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e)}}t.fn.attr2=function(){if(!n)return this.attr.apply(this,arguments);var t=this.prop.apply(this,arguments);return t&&t.jquery||"string"==typeof t?t:this.attr.apply(this,arguments)},t.fn.ajaxSubmit=function(i){if(!this.length)return r("ajaxSubmit: skipping submit process - no element selected"),this;var o,s,a,l=this;"function"==typeof i?i={success:i}:void 0===i&&(i={}),o=i.type||this.attr2("method"),(a=(a="string"==typeof(s=i.url||this.attr2("action"))?t.trim(s):"")||window.location.href||"")&&(a=(a.match(/^([^#]+)/)||[])[1]),i=t.extend(!0,{url:a,success:t.ajaxSettings.success,type:o||t.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},i);var c={};if(this.trigger("form-pre-serialize",[this,i,c]),c.veto)return r("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(i.beforeSerialize&&!1===i.beforeSerialize(this,i))return r("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var h=i.traditional;void 0===h&&(h=t.ajaxSettings.traditional);var u,d=[],p=this.formToArray(i.semantic,d);if(i.data&&(i.extraData=i.data,u=t.param(i.data,h)),i.beforeSubmit&&!1===i.beforeSubmit(p,this,i))return r("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[p,this,i,c]),c.veto)return r("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var f=t.param(p,h);u&&(f=f?f+"&"+u:u),"GET"==i.type.toUpperCase()?(i.url+=(i.url.indexOf("?")>=0?"&":"?")+f,i.data=null):i.data=f;var g=[];if(i.resetForm&&g.push((function(){l.resetForm()})),i.clearForm&&g.push((function(){l.clearForm(i.includeHidden)})),!i.dataType&&i.target){var m=i.success||function(){};g.push((function(e){var n=i.replaceTarget?"replaceWith":"html";t(i.target)[n](e).each(m,arguments)}))}else i.success&&g.push(i.success);if(i.success=function(t,e,n){for(var o=i.context||this,r=0,s=g.length;r<s;r++)g[r].apply(o,[t,e,n||l,l])},i.error){var v=i.error;i.error=function(t,e,n){var o=i.context||this;v.apply(o,[t,e,n,l])}}if(i.complete){var y=i.complete;i.complete=function(t,e){var n=i.context||this;y.apply(n,[t,e,l])}}var b=t("input[type=file]:enabled",this).filter((function(){return""!==t(this).val()})).length>0,w="multipart/form-data",x=l.attr("enctype")==w||l.attr("encoding")==w,S=e.fileapi&&e.formdata;r("fileAPI :"+S);var C,k=(b||x)&&!S;!1!==i.iframe&&(i.iframe||k)?i.closeKeepAlive?t.get(i.closeKeepAlive,(function(){C=E(p)})):C=E(p):C=(b||x)&&S?function(e){for(var n=new FormData,r=0;r<e.length;r++)n.append(e[r].name,e[r].value);if(i.extraData){var s=function(e){var n,o,r=t.param(e,i.traditional).split("&"),s=r.length,a=[];for(n=0;n<s;n++)r[n]=r[n].replace(/\+/g," "),o=r[n].split("="),a.push([decodeURIComponent(o[0]),decodeURIComponent(o[1])]);return a}(i.extraData);for(r=0;r<s.length;r++)s[r]&&n.append(s[r][0],s[r][1])}i.data=null;var a=t.extend(!0,{},t.ajaxSettings,i,{contentType:!1,processData:!1,cache:!1,type:o||"POST"});i.uploadProgress&&(a.xhr=function(){var e=t.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",(function(t){var e=0,n=t.loaded||t.position,o=t.total;t.lengthComputable&&(e=Math.ceil(n/o*100)),i.uploadProgress(t,n,o,e)}),!1),e});a.data=null;var l=a.beforeSend;return a.beforeSend=function(t,e){i.formData?e.data=i.formData:e.data=n,l&&l.call(this,t,e)},t.ajax(a)}(p):t.ajax(i),l.removeData("jqxhr").data("jqxhr",C);for(var T=0;T<d.length;T++)d[T]=null;return this.trigger("form-submit-notify",[this,i]),this;function E(e){var s,a,c,h,u,p,f,g,m,v,y,b,w=l[0],x=t.Deferred();if(x.abort=function(t){g.abort(t)},e)for(a=0;a<d.length;a++)s=t(d[a]),n?s.prop("disabled",!1):s.removeAttr("disabled");if((c=t.extend(!0,{},t.ajaxSettings,i)).context=c.context||c,u="jqFormIO"+(new Date).getTime(),c.iframeTarget?(v=(p=t(c.iframeTarget)).attr2("name"))?u=v:p.attr2("name",u):(p=t('<iframe name="'+u+'" src="'+c.iframeSrc+'" />')).css({position:"absolute",top:"-1000px",left:"-1000px"}),f=p[0],g={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(e){var n="timeout"===e?"timeout":"aborted";r("aborting upload... "+n),this.aborted=1;try{f.contentWindow.document.execCommand&&f.contentWindow.document.execCommand("Stop")}catch(t){}p.attr("src",c.iframeSrc),g.error=n,c.error&&c.error.call(c.context,g,n,e),h&&t.event.trigger("ajaxError",[g,c,n]),c.complete&&c.complete.call(c.context,g,n)}},(h=c.global)&&0==t.active++&&t.event.trigger("ajaxStart"),h&&t.event.trigger("ajaxSend",[g,c]),c.beforeSend&&!1===c.beforeSend.call(c.context,g,c))return c.global&&t.active--,x.reject(),x;if(g.aborted)return x.reject(),x;(m=w.clk)&&(v=m.name)&&!m.disabled&&(c.extraData=c.extraData||{},c.extraData[v]=m.value,"image"==m.type&&(c.extraData[v+".x"]=w.clk_x,c.extraData[v+".y"]=w.clk_y));function S(t){var e=null;try{t.contentWindow&&(e=t.contentWindow.document)}catch(t){r("cannot get iframe.contentWindow document: "+t)}if(e)return e;try{e=t.contentDocument?t.contentDocument:t.document}catch(n){r("cannot get iframe.contentDocument: "+n),e=t.document}return e}var C=t("meta[name=csrf-token]").attr("content"),k=t("meta[name=csrf-param]").attr("content");function T(){var e=l.attr2("target"),n=l.attr2("action"),i=l.attr("enctype")||l.attr("encoding")||"multipart/form-data";w.setAttribute("target",u),o&&!/post/i.test(o)||w.setAttribute("method","POST"),n!=c.url&&w.setAttribute("action",c.url),c.skipEncodingOverride||o&&!/post/i.test(o)||l.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),c.timeout&&(b=setTimeout((function(){y=!0,j(1)}),c.timeout));var s=[];try{if(c.extraData)for(var a in c.extraData)c.extraData.hasOwnProperty(a)&&(t.isPlainObject(c.extraData[a])&&c.extraData[a].hasOwnProperty("name")&&c.extraData[a].hasOwnProperty("value")?s.push(t('<input type="hidden" name="'+c.extraData[a].name+'">').val(c.extraData[a].value).appendTo(w)[0]):s.push(t('<input type="hidden" name="'+a+'">').val(c.extraData[a]).appendTo(w)[0]));c.iframeTarget||p.appendTo("body"),f.attachEvent?f.attachEvent("onload",j):f.addEventListener("load",j,!1),setTimeout((function t(){try{var e=S(f).readyState;r("state = "+e),e&&"uninitialized"==e.toLowerCase()&&setTimeout(t,50)}catch(t){r("Server abort: ",t," (",t.name,")"),j(2),b&&clearTimeout(b),b=void 0}}),15);try{w.submit()}catch(t){document.createElement("form").submit.apply(w)}}finally{w.setAttribute("action",n),w.setAttribute("enctype",i),e?w.setAttribute("target",e):l.removeAttr("target"),t(s).remove()}}k&&C&&(c.extraData=c.extraData||{},c.extraData[k]=C),c.forceSync?T():setTimeout(T,10);var E,O,A,_=50;function j(e){if(!g.aborted&&!A){if((O=S(f))||(r("cannot access response document"),e=2),1===e&&g)return g.abort("timeout"),void x.reject(g,"timeout");if(2==e&&g)return g.abort("server abort"),void x.reject(g,"error","server abort");if(O&&O.location.href!=c.iframeSrc||y){f.detachEvent?f.detachEvent("onload",j):f.removeEventListener("load",j,!1);var n,i="success";try{if(y)throw"timeout";var o="xml"==c.dataType||O.XMLDocument||t.isXMLDoc(O);if(r("isXml="+o),!o&&window.opera&&(null===O.body||!O.body.innerHTML)&&--_)return r("requeing onLoad callback, DOM not available"),void setTimeout(j,250);var s=O.body?O.body:O.documentElement;g.responseText=s?s.innerHTML:null,g.responseXML=O.XMLDocument?O.XMLDocument:O,o&&(c.dataType="xml"),g.getResponseHeader=function(t){return{"content-type":c.dataType}[t.toLowerCase()]},s&&(g.status=Number(s.getAttribute("status"))||g.status,g.statusText=s.getAttribute("statusText")||g.statusText);var a=(c.dataType||"").toLowerCase(),l=/(json|script|text)/.test(a);if(l||c.textarea){var u=O.getElementsByTagName("textarea")[0];if(u)g.responseText=u.value,g.status=Number(u.getAttribute("status"))||g.status,g.statusText=u.getAttribute("statusText")||g.statusText;else if(l){var d=O.getElementsByTagName("pre")[0],m=O.getElementsByTagName("body")[0];d?g.responseText=d.textContent?d.textContent:d.innerText:m&&(g.responseText=m.textContent?m.textContent:m.innerText)}}else"xml"==a&&!g.responseXML&&g.responseText&&(g.responseXML=I(g.responseText));try{E=M(g,a,c)}catch(t){i="parsererror",g.error=n=t||i}}catch(t){r("error caught: ",t),i="error",g.error=n=t||i}g.aborted&&(r("upload aborted"),i=null),g.status&&(i=g.status>=200&&g.status<300||304===g.status?"success":"error"),"success"===i?(c.success&&c.success.call(c.context,E,"success",g),x.resolve(g.responseText,"success",g),h&&t.event.trigger("ajaxSuccess",[g,c])):i&&(void 0===n&&(n=g.statusText),c.error&&c.error.call(c.context,g,i,n),x.reject(g,"error",n),h&&t.event.trigger("ajaxError",[g,c,n])),h&&t.event.trigger("ajaxComplete",[g,c]),h&&!--t.active&&t.event.trigger("ajaxStop"),c.complete&&c.complete.call(c.context,g,i),A=!0,c.timeout&&clearTimeout(b),setTimeout((function(){c.iframeTarget?p.attr("src",c.iframeSrc):p.remove(),g.responseXML=null}),100)}}}var I=t.parseXML||function(t,e){return window.ActiveXObject?((e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t)):e=(new DOMParser).parseFromString(t,"text/xml"),e&&e.documentElement&&"parsererror"!=e.documentElement.nodeName?e:null},N=t.parseJSON||function(t){return window.eval("("+t+")")},M=function(e,n,i){var o=e.getResponseHeader("content-type")||"",r="xml"===n||!n&&o.indexOf("xml")>=0,s=r?e.responseXML:e.responseText;return r&&"parsererror"===s.documentElement.nodeName&&t.error&&t.error("parsererror"),i&&i.dataFilter&&(s=i.dataFilter(s,n)),"string"==typeof s&&("json"===n||!n&&o.indexOf("json")>=0?s=N(s):("script"===n||!n&&o.indexOf("javascript")>=0)&&t.globalEval(s)),s};return x}},t.fn.ajaxForm=function(e){if((e=e||{}).delegation=e.delegation&&t.isFunction(t.fn.on),!e.delegation&&0===this.length){var n={s:this.selector,c:this.context};return!t.isReady&&n.s?(r("DOM not ready, queuing ajaxForm"),t((function(){t(n.s,n.c).ajaxForm(e)})),this):(r("terminating; zero elements found by selector"+(t.isReady?"":" (DOM not ready)")),this)}return e.delegation?(t(document).off("submit.form-plugin",this.selector,i).off("click.form-plugin",this.selector,o).on("submit.form-plugin",this.selector,e,i).on("click.form-plugin",this.selector,e,o),this):this.ajaxFormUnbind().bind("submit.form-plugin",e,i).bind("click.form-plugin",e,o)},t.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},t.fn.formToArray=function(n,i){var o=[];if(0===this.length)return o;var r,s,a,l,c,h,u,d,p=this[0],f=this.attr("id"),g=n?p.getElementsByTagName("*"):p.elements;if(g&&!/MSIE [678]/.test(navigator.userAgent)&&(g=t(g).get()),f&&(r=t(':input[form="'+f+'"]').get()).length&&(g=(g||[]).concat(r)),!g||!g.length)return o;for(s=0,u=g.length;s<u;s++)if((l=(h=g[s]).name)&&!h.disabled)if(n&&p.clk&&"image"==h.type)p.clk==h&&(o.push({name:l,value:t(h).val(),type:h.type}),o.push({name:l+".x",value:p.clk_x},{name:l+".y",value:p.clk_y}));else if((c=t.fieldValue(h,!0))&&c.constructor==Array)for(i&&i.push(h),a=0,d=c.length;a<d;a++)o.push({name:l,value:c[a]});else if(e.fileapi&&"file"==h.type){i&&i.push(h);var m=h.files;if(m.length)for(a=0;a<m.length;a++)o.push({name:l,value:m[a],type:h.type});else o.push({name:l,value:"",type:h.type})}else null!=c&&(i&&i.push(h),o.push({name:l,value:c,type:h.type,required:h.required}));if(!n&&p.clk){var v=t(p.clk),y=v[0];(l=y.name)&&!y.disabled&&"image"==y.type&&(o.push({name:l,value:v.val()}),o.push({name:l+".x",value:p.clk_x},{name:l+".y",value:p.clk_y}))}return o},t.fn.formSerialize=function(e){return t.param(this.formToArray(e))},t.fn.fieldSerialize=function(e){var n=[];return this.each((function(){var i=this.name;if(i){var o=t.fieldValue(this,e);if(o&&o.constructor==Array)for(var r=0,s=o.length;r<s;r++)n.push({name:i,value:o[r]});else null!=o&&n.push({name:this.name,value:o})}})),t.param(n)},t.fn.fieldValue=function(e){for(var n=[],i=0,o=this.length;i<o;i++){var r=this[i],s=t.fieldValue(r,e);null==s||s.constructor==Array&&!s.length||(s.constructor==Array?t.merge(n,s):n.push(s))}return n},t.fieldValue=function(e,n){var i=e.name,o=e.type,r=e.tagName.toLowerCase();if(void 0===n&&(n=!0),n&&(!i||e.disabled||"reset"==o||"button"==o||("checkbox"==o||"radio"==o)&&!e.checked||("submit"==o||"image"==o)&&e.form&&e.form.clk!=e||"select"==r&&-1==e.selectedIndex))return null;if("select"==r){var s=e.selectedIndex;if(s<0)return null;for(var a=[],l=e.options,c="select-one"==o,h=c?s+1:l.length,u=c?s:0;u<h;u++){var d=l[u];if(d.selected){var p=d.value;if(p||(p=d.attributes&&d.attributes.value&&!d.attributes.value.specified?d.text:d.value),c)return p;a.push(p)}}return a}return t(e).val()},t.fn.clearForm=function(e){return this.each((function(){t("input,select,textarea",this).clearFields(e)}))},t.fn.clearFields=t.fn.clearInputs=function(e){var n=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each((function(){var i=this.type,o=this.tagName.toLowerCase();n.test(i)||"textarea"==o?this.value="":"checkbox"==i||"radio"==i?this.checked=!1:"select"==o?this.selectedIndex=-1:"file"==i?/MSIE/.test(navigator.userAgent)?t(this).replaceWith(t(this).clone(!0)):t(this).val(""):e&&(!0===e&&/hidden/.test(i)||"string"==typeof e&&t(this).is(e))&&(this.value="")}))},t.fn.resetForm=function(){return this.each((function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()}))},t.fn.enable=function(t){return void 0===t&&(t=!0),this.each((function(){this.disabled=!t}))},t.fn.selected=function(e){return void 0===e&&(e=!0),this.each((function(){var n=this.type;if("checkbox"==n||"radio"==n)this.checked=e;else if("option"==this.tagName.toLowerCase()){var i=t(this).parent("select");e&&i[0]&&"select-one"==i[0].type&&i.find("option").selected(!1),this.selected=e}}))},t.fn.ajaxSubmit.debug=!1})?i.apply(e,o):i)||(t.exports=r)}()},8:function(t,e,n){var i,o;i=[n(0),n(34),n(44),n(87),n(89),n(90)],void 0===(o=function(t,e,n,i){for(var o,r=n.getLogger("registry"),s=/patterns-disable=([^&]+)/g,a=/patterns-dont-catch/g,l=!1,c={};null!==(o=s.exec(window.location.search));)c[o[1]]=!0,r.info("Pattern disabled via url config:",o[1]);for(;null!==(o=a.exec(window.location.search));)l=!0,r.info("I will not catch init exceptions");var h={patterns:{},initialized:!1,init:function(){t(document).ready((function(){r.info("loaded: "+Object.keys(h.patterns).sort().join(", ")),h.scan(document.body),h.initialized=!0,r.info("finished initial scan.")}))},clear:function(){this.patterns={}},transformPattern:function(e,n){if(c[e])r.debug("Skipping disabled pattern:",e);else{var i=h.patterns[e];if(i.transform)try{i.transform(t(n))}catch(t){if(l)throw t;r.error("Transform error for pattern"+e,t)}}},initPattern:function(e,i,o){var r=t(i),s=h.patterns[e];if(s.init&&(plog=n.getLogger("pat."+e),r.is(s.trigger))){plog.debug("Initialising:",r);try{s.init(r,null,o),plog.debug("done.")}catch(t){if(l)throw t;plog.error("Caught error:",t)}}},orderPatterns:function(t){return e.contains(t,"validation")&&e.contains(t,"inject")&&(t.splice(t.indexOf("validation"),1),t.unshift("validation")),t},scan:function(n,i,o){var r=[];(i=this.orderPatterns(i||Object.keys(h.patterns))).forEach(e.partial(this.transformPattern,e,n)),i=e.each(i,(function(t){var e=h.patterns[t];e.trigger&&r.unshift(e.trigger)})),t(n).findInclusive(r.join(",")).filter((function(){return 0===t(this).parents("pre").length})).filter(":not(.cant-touch-this)").toArray().reduceRight(function(t,n){i.forEach(e.partial(this.initPattern,e,n,o))}.bind(this),null),t("body").addClass("patterns-loaded")},register:function(e,n){var o;return(n=n||e.name)?h.patterns[n]?(r.error("Already have a pattern called: "+n),!1):(h.patterns[n]=e,e.jquery_plugin&&(o=("pat-"+n).replace(/-([a-zA-Z])/g,(function(t,e){return e.toUpperCase()})),t.fn[o]=i.jqueryPlugin(e),t.fn[o.replace(/^pat/,"pattern")]=t.fn[o]),r.debug("Registered pattern:",n,e),h.initialized&&h.scan(document.body,[n]),!0):(r.error("Pattern lacks a name:",e),!1)}};return h}.apply(e,i))||(t.exports=o)},86:function(t,e,n){var i;!function(){var n,o;Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,i=function(){},o=function(){return n.apply(this instanceof i&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,o.prototype=new i,o});var r={DEBUG:10,INFO:20,WARN:30,ERROR:40,FATAL:50};function s(){}function a(){}function l(t,e){this._loggers={},this.name=t||"",this._parent=e||null,e||(this._enabled=!0,this._level=r.WARN)}function c(t){o=t}s.prototype={output:function(t,e,n){if(void 0!==window.console&&void 0!==console.log){t&&n.unshift(t+":");var i,o=n.join(" ");if(void 0===typeof console.info)i=e<=r.DEBUG?"DEBUG":e<=r.INFO?"INFO":e<=r.WARN?"WARN":e<=r.ERROR?"ERROR":"FATAL",console.log("["+i+"] "+o);else e<=r.DEBUG?(o="[DEBUG] "+o,console.log(o)):e<=r.INFO?console.info(o):e<=r.WARN?console.warn(o):console.error(o)}}},a.prototype={output:function(t,e,n){t&&n.unshift(t+":"),e<=r.DEBUG?(n.unshift("[DEBUG]"),console.log.apply(console,n)):e<=r.INFO?console.info.apply(console,n):e<=r.WARN?console.warn.apply(console,n):console.error.apply(console,n)}},l.prototype={getLogger:function(t){for(var e=t.split("."),n=this,i=this.name?[this.name]:[];e.length;){var o=e.shift();i.push(o),o in n._loggers||(n._loggers[o]=new l(i.join("."),n)),n=n._loggers[o]}return n},_getFlag:function(t){var e=this;for(t="_"+t;null!==e;){if(void 0!==e[t])return e[t];e=e._parent}return null},setEnabled:function(t){this._enabled=!!t},isEnabled:function(){this._getFlag("enabled")},setLevel:function(t){"number"==typeof t?this._level=t:"string"==typeof t&&(t=t.toUpperCase())in r&&(this._level=r[t])},getLevel:function(){return this._getFlag("level")},log:function(t,e){!e.length||!this._getFlag("enabled")||t<this._getFlag("level")||(e=Array.prototype.slice.call(e),o.output(this.name,t,e))},debug:function(){this.log(r.DEBUG,arguments)},info:function(){this.log(r.INFO,arguments)},warn:function(){this.log(r.WARN,arguments)},error:function(){this.log(r.ERROR,arguments)},fatal:function(){this.log(r.FATAL,arguments)}},window.console&&window.console.log&&"function"==typeof window.console.log.apply?c(new a):c(new s),n=new l;for(var h,u=/loglevel(|-[^=]+)=([^&]+)/g;null!==(h=u.exec(window.location.search));){(""===h[1]?n:n.getLogger(h[1].slice(1))).setLevel(h[2].toUpperCase())}var d={Level:r,getLogger:n.getLogger.bind(n),setEnabled:n.setEnabled.bind(n),isEnabled:n.isEnabled.bind(n),setLevel:n.setLevel.bind(n),getLevel:n.getLevel.bind(n),debug:n.debug.bind(n),info:n.info.bind(n),warn:n.warn.bind(n),error:n.error.bind(n),fatal:n.fatal.bind(n),getWriter:function(){return o},setWriter:c};void 0===(i=function(){return d}.apply(e,[]))||(t.exports=i)}()},87:function(t,e,n){var i,o,r=n(34);i=[n(0),n(88),n(34)],void 0===(o=function(t){t.fn.safeClone=function(){var e=this.clone();return void 0!==t.browser.msie&&e.findInclusive(":input[placeholder]").each((function(e,n){var i=t(n);i.attr("placeholder")===i.val()&&i.val("")})),e},Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var n,i;if(null===this)throw new TypeError(" this is null or not defined");var o=Object(this),r=o.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(n=e),i=0;i<r;){var s;i in o&&(s=o[i],t.call(n,s,i,o)),i++}});var e=function(e,n,i){return this.each((function(){var o,r=t(this);if(o=e.init(r,i),n){if(void 0===o[n])return t.error("Method "+n+" does not exist on jQuery."+e.name),!1;if("_"===n.charAt(0))return t.error("Method "+n+" is private on jQuery."+e.name),!1;o[n].apply(o,[i])}})),this},n=function(e,n,i){var o=this;if(n){if(e[n])return e[n].apply(o,[o].concat([i]));t.error("Method "+n+" does not exist on jQuery."+e.name)}else e.init.apply(o,[o].concat([i]));return o};function i(t){var e=typeof t;return"function"===e||"object"===e&&!!t}var o={none:{hide:"hide",show:"show"},fade:{hide:"fadeOut",show:"fadeIn"},slide:{hide:"slideUp",show:"slideDown"}};return isElementInViewport=function(e,n,i){if(e===[])return!1;e instanceof t&&(e=e[0]);var o=e.getBoundingClientRect(),s=[o.top,o.bottom,o.left,o.right];return!r.every(s,(function(t){if(0===t)return!0}))&&(n?(void 0===i&&(i=0),o.top<=0+i&&o.bottom>=0+i):o.top>=0&&o.left>=0&&o.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&o.right<=(window.innerWidth||document.documentElement.clientWidth))},{jqueryPlugin:function(t){return function(i,o){return 0===this.length?this:("object"==typeof i&&(o=i,i=void 0),"function"==typeof t?e.call(this,t,i,o):n.call(this,t,i,o))}},debounce:function(t,e){var n;return function(){var i=this,o=arguments,r=function(){n=null,t.apply(i,o)};clearTimeout(n),n=setTimeout(r,e)}},escapeRegExp:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isObject:i,extend:function(t){if(!i(t))return t;for(var e,n,o=1,r=arguments.length;o<r;o++)for(n in e=arguments[o])hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},rebaseURL:function(t,e){return-1!==e.indexOf("://")||"/"===e[0]?e:t.slice(0,t.lastIndexOf("/")+1)+e},findLabel:function(e){for(var n,i=e.parentNode;i&&11!==i.nodeType;i=i.parentNode)if("LABEL"===i.tagName)return i;return e.id&&(n=t('label[for="'+e.id+'"]')),n&&0===n.length&&e.form&&(n=t('label[for="'+e.name+'"]',e.form)),n&&n.length?n[0]:null},elementInViewport:function(t){var e=t.getBoundingClientRect(),n=document.documentElement,i=window.innerWidth||n.clientWidth,o=window.innerHeight||n.clientHeight;return!(e.right<0||e.bottom<0||e.left>i||e.top>o)},removeWildcardClass:function(e,n){if(-1===n.indexOf("*"))e.removeClass(n);else{var i=n.replace(/[\-\[\]{}()+?.,\\\^$|#\s]/g,"\\$&");i=i.replace(/[*]/g,".*"),i=new RegExp("^"+i+"$"),e.filter("[class]").each((function(){for(var e=t(this),n=e.attr("class").split(/\s+/),o=[],r=0;r<n.length;r++)i.test(n[r])||o.push(n[r]);o.length?e.attr("class",o.join(" ")):e.removeAttr("class")}))}},hideOrShow:function(t,e,n,i){var r="css"===n.transition||"none"===n.transition?null:n.effect.duration;t.removeClass("visible hidden in-progress");var s=function(){t.removeClass("in-progress").addClass(e?"visible":"hidden").trigger("pat-update",{pattern:i,transition:"complete"})};if(r){var a=o[n.transition];t.addClass("in-progress").trigger("pat-update",{pattern:i,transition:"start"}),t[e?a.show:a.hide]({duration:r,easing:n.effect.easing,complete:s})}else"css"!==n.transition&&t[e?"show":"hide"](),s()},addURLQueryParameter:function(t,e,n){var i=new RegExp("(\\?|\\&)"+e+"=.*?(?=(&|$))"),o=t.toString().split("#"),r=o[0],s=o[1],a=r;return a=i.test(r)?r.replace(i,"$1"+e+"="+n):/\?.+$/.test(r)?r+"&"+e+"="+n:r+"?"+e+"="+n,s&&(a+="#"+s),a},removeDuplicateObjects:function(t){var e=function(t,e){return this[e]===t};return r.reduce(t,(function(t,n){var i=!1;return r.each(t,(function(t){i=r.keys(t).length===r.keys(n).length&&!r.chain(t).omit(e.bind(n)).keys().value().length})),i||t.push(n),t}),[])},mergeStack:function(e,n){for(var i=[],o=0;o<n;o++)i.push({});return r.each(e,(function(e){for(var o=e.length-1,r=0;r<n;r++)i[r]=t.extend(i[r]||{},e[r>o?o:r])})),i},isElementInViewport:isElementInViewport}}.apply(e,i))||(t.exports=o)},88:function(t,e,n){var i,o;i=[n(0)],void 0===(o=function(t){return function(t){"use strict";function e(t){void 0===t&&(t=window.navigator.userAgent),t=t.toLowerCase();var e=/(edge)\/([\w.]+)/.exec(t)||/(opr)[\/]([\w.]+)/.exec(t)||/(chrome)[ \/]([\w.]+)/.exec(t)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[],n=/(ipad)/.exec(t)||/(ipod)/.exec(t)||/(iphone)/.exec(t)||/(kindle)/.exec(t)||/(silk)/.exec(t)||/(android)/.exec(t)||/(windows phone)/.exec(t)||/(win)/.exec(t)||/(mac)/.exec(t)||/(linux)/.exec(t)||/(cros)/.exec(t)||/(playbook)/.exec(t)||/(bb)/.exec(t)||/(blackberry)/.exec(t)||[],i={},o={browser:e[5]||e[3]||e[1]||"",version:e[2]||e[4]||"0",versionNumber:e[4]||e[2]||"0",platform:n[0]||""};if(o.browser&&(i[o.browser]=!0,i.version=o.version,i.versionNumber=parseInt(o.versionNumber,10)),o.platform&&(i[o.platform]=!0),(i.android||i.bb||i.blackberry||i.ipad||i.iphone||i.ipod||i.kindle||i.playbook||i.silk||i["windows phone"])&&(i.mobile=!0),(i.cros||i.mac||i.linux||i.win)&&(i.desktop=!0),(i.chrome||i.opr||i.safari)&&(i.webkit=!0),(i.rv||i.edge)&&(o.browser="msie",i.msie=!0),i.safari&&i.blackberry&&(o.browser="blackberry",i.blackberry=!0),i.safari&&i.playbook&&(o.browser="playbook",i.playbook=!0),i.bb){var r="blackberry";o.browser=r,i[r]=!0}return i.opr&&(o.browser="opera",i.opera=!0),i.safari&&i.android&&(o.browser="android",i.android=!0),i.safari&&i.kindle&&(o.browser="kindle",i.kindle=!0),i.safari&&i.silk&&(o.browser="silk",i.silk=!0),i.name=o.browser,i.platform=o.platform,i}return window.jQBrowser=e(window.navigator.userAgent),window.jQBrowser.uaMatch=e,t&&(t.browser=window.jQBrowser),window.jQBrowser}(t)}.apply(e,i))||(t.exports=o)},89:function(t,e,n){var i;void 0===(i=function(){var t,e,n,i;Array.prototype.every||(Array.prototype.every=function(t){"use strict";if(null===this)throw new TypeError;var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var i=arguments[1],o=0;o<n;o++)if(o in e&&!t.call(i,e[o],o,e))return!1;return!0}),Array.prototype.filter||(Array.prototype.filter=function(t){"use strict";if(null===this)throw new TypeError;var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var i=[],o=arguments[1],r=0;r<n;r++)if(r in e){var s=e[r];t.call(o,s,r,e)&&i.push(s)}return i}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var n,i;if(null===this)throw new TypeError(" this is null or not defined");var o=Object(this),r=o.length>>>0;if("[object Function]"!=={}.toString.call(t))throw new TypeError(t+" is not a function");for(e&&(n=e),i=0;i<r;){var s;i in o&&(s=o[i],t.call(n,s,i,o)),i++}}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t){"use strict";if(null===this)throw new TypeError;var e=Object(this),n=e.length>>>0;if(0===n)return-1;var i=0;if(arguments.length>0&&((i=Number(arguments[1]))!=i?i=0:0!==i&&i!==1/0&&i!==-1/0&&(i=(i>0||-1)*Math.floor(Math.abs(i)))),i>=n)return-1;for(var o=i>=0?i:Math.max(n-Math.abs(i),0);o<n;o++)if(o in e&&e[o]===t)return o;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(t){"use strict";if(null===this)throw new TypeError;var e=Object(this),n=e.length>>>0;if(0===n)return-1;var i=n;arguments.length>1&&((i=Number(arguments[1]))!=i?i=0:0!==i&&i!==1/0&&i!==-1/0&&(i=(i>0||-1)*Math.floor(Math.abs(i))));for(var o=i>=0?Math.min(i,n-1):n-Math.abs(i);o>=0;o--)if(o in e&&e[o]===t)return o;return-1}),Array.prototype.map||(Array.prototype.map=function(t,e){var n,i,o;if(null===this)throw new TypeError(" this is null or not defined");var r=Object(this),s=r.length>>>0;if("[object Function]"!=={}.toString.call(t))throw new TypeError(t+" is not a function");for(e&&(n=e),i=new Array(s),o=0;o<s;){var a,l;o in r&&(a=r[o],l=t.call(n,a,o,r),i[o]=l),o++}return i}),Array.prototype.reduce||(Array.prototype.reduce=function(t){if(null==this)throw new TypeError("Object is null or undefined");var e,n=0,i=this.length>>0;if("function"!=typeof t)throw new TypeError("First argument is not callable");if(arguments.length<2){if(0===i)throw new TypeError("Array length is 0 and no second argument");e=this[0],n=1}else e=arguments[1];for(;n<i;)n in this&&(e=t.call(void 0,e,this[n],n,this)),++n;return e}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(t){"use strict";if(null===this)throw new TypeError;var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError;if(0===n&&1===arguments.length)throw new TypeError;var i,o=n-1;if(arguments.length>=2)i=arguments[1];else for(;;){if(o in this){i=this[o--];break}if(--o<0)throw new TypeError}for(;o>=0;)o in e&&(i=t.call(void 0,i,e[o],o,e)),o--;return i}),Array.prototype.some||(Array.prototype.some=function(t){"use strict";if(null===this)throw new TypeError;var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var i=arguments[1],o=0;o<n;o++)if(o in e&&t.call(i,e[o],o,e))return!0;return!1}),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,i=function(){},o=function(){return n.apply(this instanceof i&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,o.prototype=new i,o}),Object.keys||(Object.keys=(t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),i=(n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(o){if("object"!=typeof o&&"function"!=typeof o||null===o)throw new TypeError("Object.keys called on non-object");var r=[];for(var s in o)t.call(o,s)&&r.push(s);if(e)for(var a=0;a<i;a++)t.call(o,n[a])&&r.push(n[a]);return r}))}.call(e,n,e,t))||(t.exports=i)},9:function(t,e,n){var i,o;i=[n(0),n(36),n(38),n(60),n(51),n(52)],void 0===(o=function(t,e,n){"use strict";return e.extend({name:"select2",trigger:".pat-select2",parser:"mockup",defaults:{separator:","},initializeValues:function(){var e=this;e.options.initialValues&&(e.options.id=function(t){return t.id},e.options.initSelection=function(i,o){var r=[],s=i.val(),a=e.options.initialValues;"string"==typeof e.options.initialValues&&""!==e.options.initialValues&&("{"===e.options.initialValues[0]?a=JSON.parse(e.options.initialValues):(a={},t(e.options.initialValues.split(e.options.separator)).each((function(){var e=this.split(":"),n=t.trim(e[0]),i=t.trim(e[1]);a[n]=i})))),t(s.split(e.options.separator)).each((function(){var t=this;a[this]&&(t=a[this]),r.push({id:n.removeHTML(this),text:n.removeHTML(t)})})),o(r)})},initializeTags:function(){this.options.tags&&"string"==typeof this.options.tags&&("["===this.options.tags.substr(0,1)?this.options.tags=JSON.parse(this.options.tags):this.options.tags=this.options.tags.split(this.options.separator)),this.options.tags&&!this.options.allowNewItems&&(this.options.data=t.map(this.options.tags,(function(t,e){return{id:t,text:t}})),this.options.multiple=!0,delete this.options.tags)},initializeOrdering:function(){var e=this;if(e.options.orderable){var n=function(t,e){return t?t.text:void 0};e.options.formatSelection&&(n=e.options.formatSelection),e.options.formatSelection=function(i,o){return o.parents("li").drag("start",(function(n,i){return t(this).addClass("select2-choice-dragging"),e.$el.select2("onSortStart"),t.drop({tolerance:function(e,n,i){var o=e.pageY>i.top+i.height/2;return t.data(i.elem,"drop+reorder",o?"insertAfter":"insertBefore"),this.contains(i,[e.pageX,e.pageY])}}),t(this).clone().addClass("dragging").css({opacity:.75,position:"absolute"}).appendTo(document.body)})).drag((function(e,n){t(n.proxy).css({top:n.offsetY,left:n.offsetX});var i=n.drop[0],o=t.data(i||{},"drop+reorder");!i||i==n.current&&o==n.method||(t(this)[o](i),n.current=i,n.method=o,n.update())})).drag("end",(function(n,i){t(this).removeClass("select2-choice-dragging"),e.$el.select2("onSortEnd"),t(i.proxy).remove()})).drop("init",(function(t,e){return this!=e.drag})),n(i,o)}}},initializeSelect2:function(){this.options.formatResultCssClass=function(t){if(t.id)return"select2-option-"+t.id.toLowerCase().replace(/[ \:\)\(\[\]\{\}\_\+\=\&\*\%\#]/g,"-")},this.$el.select2(this.options),this.$select2=this.$el.parent().find(".select2-container"),this.$el.parent().off("close.plone-modal.patterns"),this.options.orderable&&this.$select2.addClass("select2-orderable")},init:function(){var e=this;if(e.options.allowNewItems=!e.options.hasOwnProperty("allowNewItems")||JSON.parse(e.options.allowNewItems),e.options.ajax||e.options.vocabularyUrl){e.options.vocabularyUrl&&(e.options.multiple=void 0===e.options.multiple||e.options.multiple,e.options.ajax=e.options.ajax||{},e.options.ajax.url=e.options.vocabularyUrl,e.options.initSelection=function(i,o){var r=[],s=i.val();t(s.split(e.options.separator)).each((function(){var t=n.removeHTML(this);r.push({id:t,text:t})})),o(r)});var i="";e.options.ajax=t.extend({quietMillis:300,data:function(t,e){return i=t,{query:t,page_limit:10,page:e}},results:function(o,r){var s=o.results;if(e.options.vocabularyUrl){var a=[];t.each(o.results,(function(t,e){a.push(e.id)})),s=[];var l=""===i||t.inArray(i,a)>=0;e.options.allowNewItems&&!l&&(i=n.removeHTML(i),s.push({id:i,text:i})),t.each(o.results,(function(t,e){s.push(e)}))}return{results:s}}},e.options.ajax)}else if(e.options.multiple&&e.$el.is("select")){var o=e.$el.val()||[],r=t.map(e.$el.find("option"),(function(e){return{text:t(e).html(),id:e.value}})),s=t('<input type="hidden" />');s.val(o.join(e.options.separator)),s.attr("class",e.$el.attr("class")),s.attr("name",e.$el.attr("name")),s.attr("id",e.$el.attr("id")),e.$orig=e.$el,e.$el.replaceWith(s),e.$el=s,e.options.data=r}e.initializeValues(),e.initializeTags(),e.initializeOrdering(),e.initializeSelect2()}})}.apply(e,i))||(t.exports=o)},90:function(t,e,n){var i,o;i=[n(0)],void 0===(o=function(t){var e={init:function(n){var i={time:3,initialTime:8,exceptionAreas:[]};return this.each((function(){var o=t(this);o.data("timeout")||(n&&t.extend(i,n),o.data("timeout",{lastEvent:new Date,trueTime:i.time,time:i.initialTime,untouched:!0,inExceptionArea:!1}),o.bind("mouseover.timeout",e.mouseMoved),o.bind("mouseenter.timeout",e.mouseMoved),t(i.exceptionAreas).each((function(){o.find(this).live("mouseover.timeout",{parent:o},e.enteredException).live("mouseleave.timeout",{parent:o},e.leftException)})),i.initialTime>0?o.timeout("startTimer"):o.addClass("timeout"))}))},enteredException:function(t){var e=t.data.parent.data("timeout");e.inExceptionArea=!0,t.data.parent.data("timeout",e),t.data.parent.trigger("mouseover")},leftException:function(t){var e=t.data.parent.data("timeout");e.inExceptionArea=!1,t.data.parent.data("timeout",e)},destroy:function(){return this.each((function(){var e=t(this),n=e.data("timeout");t(window).unbind(".timeout"),n.timeout.remove(),e.removeData("timeout")}))},mouseMoved:function(){var e=t(this),n=e.data("timeout");e.hasClass("timeout")?(e.removeClass("timeout"),e.timeout("startTimer")):n.untouched&&(n.untouched=!1,n.time=n.trueTime),n.lastEvent=new Date,e.data("timeout",n)},startTimer:function(){var e=t(this),n=e.data("timeout"),i=function(){var t=e.data("timeout");if(t&&t.lastEvent)if(t.inExceptionArea)setTimeout(i,Math.floor(1e3*t.time));else{var n=new Date,o=Math.floor(1e3*t.time)-(n-t.lastEvent);o>0?setTimeout(i,o+100):e.addClass("timeout")}};setTimeout(i,Math.floor(1e3*n.time))}};t.fn.timeout=function(n){return e[n]?e[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void t.error("Method "+n+" does not exist on jQuery.timeout"):e.init.apply(this,arguments)},t.extend(t.expr[":"],{scrollable:function(e){return"scroll"===t(e).css("overflow")||"scroll"===t(e).css("overflowX")||"scroll"===t(e).css("overflowY")||(e.clientHeight<e.scrollHeight&&(-1!==t.inArray(t(e).css("overflowY"),["scroll","auto"])||-1!==t.inArray(t(e).css("overflow"),["scroll","auto"]))||e.clientWidth<e.scrollWidth&&(-1!==t.inArray(t(e).css("overflowX"),["scroll","auto"])||-1!==t.inArray(t(e).css("overflow"),["scroll","auto"])))}}),t.fn.makeVisibleInScroll=function(e){var n=null;return"string"==typeof e?n=t("#"+e):e&&(n=t(e)),this.each((function(){var e,i=t(this);e=n||((e=i.parents(":scrollable")).length>0?t(e[0]):t(window));var o=i.position().top,r=i.height()+o,s=e.scrollTop(),a=e.height()+s;o<s?e.scrollTop(o):r>a-e.height()/2&&e.scrollTop(o-(e.height()-i.height())/2)}))},t.fn.setPositionAbsolute=function(e,n,i){return this.each((function(){var o=t(this),r=t(this).width(),s=e.offset(),a=e.width(),l=e.height(),c=s.left+a-r+i,h=s.top+l+n;o.css({"z-index":1,position:"absolute",marginLeft:0,marginTop:0,left:c+"px",top:h+"px",width:r}),o.remove().appendTo("body").show()}))},t.fn.positionAncestor=function(e){var n=0,i=0;return this.each((function(){var o=t(this).closest(e);if(o.length&&"static"!==o.css("position")){var r=t(this),s=r.offset().left-parseInt(r.css("marginLeft"),10),a=r.offset().top-parseInt(r.css("marginTop"),10),l=o.offset().left+parseInt(o.css("borderLeftWidth"),10),c=o.offset().top+parseInt(o.css("borderTopWidth"),10);return n=s-l,i=a-c,!1}})),{left:n,top:i}},String.prototype.startsWith=function(t){return null!==this.match("^"+t)},String.prototype.endsWith=function(t){return null!==this.match(t+"$")},t.simplePlaceholder={placeholder_class:null,hide_placeholder:function(){var e=t(this);e.val()===e.attr("placeholder")&&e.val("").removeClass(t.simplePlaceholder.placeholder_class)},show_placeholder:function(){var e=t(this);""===e.val()&&e.val(e.attr("placeholder")).addClass(t.simplePlaceholder.placeholder_class)},prevent_placeholder_submit:function(){return t(this).find(".simple-placeholder").each((function(){var e=t(this);e.val()===e.attr("placeholder")&&e.val("")})),!0}},t.fn.simplePlaceholder=function(e){if(void 0===document.createElement("input").placeholder){var n={placeholder_class:"placeholding"};e&&t.extend(n,e),t.simplePlaceholder.placeholder_class=n.placeholder_class,this.each((function(){var e=t(this);e.focus(t.simplePlaceholder.hide_placeholder),e.blur(t.simplePlaceholder.show_placeholder),""===e.val()&&(e.val(e.attr("placeholder")),e.addClass(t.simplePlaceholder.placeholder_class)),e.addClass("simple-placeholder"),t(this.form).submit(t.simplePlaceholder.prevent_placeholder_submit)}))}return this},t.fn.findInclusive=function(t){return this.find("*").addBack().filter(t)},t.fn.slideIn=function(t,e,n){return this.animate({width:"show"},t,e,n)},t.fn.slideOut=function(t,e,n){return this.animate({width:"hide"},t,e,n)},t.expr[":"].Contains=function(e,n,i){return t(e).text().toUpperCase().indexOf(i[3].toUpperCase())>=0},t.fn.scopedFind=function(e){return e.startsWith("#")?t(e):this.find(e)}}.apply(e,i))||(t.exports=o)},91:function(t,e,n){var i,o;i=[n(0)],void 0===(o=function(t){"use strict";return{getOptions:function e(n,i,o){o=o||{},0===n.length||t.nodeName(n[0],"body")||(o=e(n.parent(),i,o));var r={};if(0!==n.length&&(r=n.data("pat-"+i))&&"string"==typeof r){var s={};t.each(r.split(";"),(function(t,e){(e=e.split(":")).reverse();var n=e.pop();n=n.replace(/^\s+|\s+$/g,""),e.reverse();var i=e.join(":");i=i.replace(/^\s+|\s+$/g,""),s[n]=i})),r=s}return t.extend(!0,{},o,r)}}}.apply(e,i))||(t.exports=o)},94:function(t,e,n){var i,o;i=[n(34),n(41)],void 0===(o=function(t,e){"use strict";var n=function(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")};return new(e.Router.extend({actions:[],redirects:{},addRoute:function(e,i,o,r,s,a){void 0===t.findWhere(this.patterns,{patternName:e,id:i})&&this.actions.push({patternName:e,id:i,callback:o,context:r,pathExp:s,expReplace:a});var l=new RegExp("("+n(e)+":"+n(i)+")");this.route(l,"handleRoute")},addRedirect:function(t,e){this.redirects[t]=e},handleRoute:function(e){var n=e.split(":"),i=n[0],o=n[1],r=t.findWhere(this.actions,{patternName:i,id:o});r&&r.callback.call(r.context)},redirect:function(){var e,n,i,o=window.parent.location.pathname;if(t.some(this.actions,(function(t){if(t.pathExp&&(n=new RegExp(t.pathExp),o.match(n))){i="!/"+t.patternName+":"+t.id;var r="";return t.expReplace&&(r=t.expReplace),e=o.replace(n,r),!0}}),this),void 0===i)for(var r in this.redirects)if(n=new RegExp(r),o.match(n)){i="!/"+this.redirects[r],e=o.replace(n,"");break}void 0!==i&&this._changeLocation.apply(this,[e,i])},_changeLocation:function(t,e){window.parent.location.hash=e,window.parent.location.pathname=t},start:function(){e.history.start()},reset:function(){this.actions=[]}}))}.apply(e,i))||(t.exports=o)}}]);