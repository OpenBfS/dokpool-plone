<tal:block i18n:domain="docpool.base"
           define="view nocall:options/view;
                   context nocall:options/context;
                   here nocall:context">
    <tal:def define="edoc options/edoc;
                 isOverview python:False;
                 isCollection python:False;
                 euid edoc/UID;
                 eurl edoc/getURL;
                 item_id edoc/id|edoc/getId;
                 item_title edoc/Title|edoc/title_or_id;
                 title_or_id python:item_title or item_id;                 
                 buttons options/buttons|nothing;
                 edocobj edoc/getObject;
                 myfolder nocall:options/myfolder;
                 item_description edoc/Description;
                 item_url python:isCollection and '%s/@@dview?d=%s&disable_border=1' % (myfolder.absolute_url(), euid) or edoc.getURL(original=True);
                 item_modified edoc/getMdate;
                 item_created edoc/CreationDate;
                 item_creator edoc/Creator;
                 toLocalizedTime nocall: context/@@plone/toLocalizedTime;
                 pas_member context/@@pas_member;
                 author python:pas_member.info(item_creator);
                 creator_fullname author/name_or_id;
                 item_ptype edoc/portal_type;
                 normalizeString nocall: context/plone_utils/normalizeString;
                 item_type_class python:'contenttype-' + normalizeString(item_ptype);
                 rs edoc/review_state;
                 item_wf_state_class python:'state-' + normalizeString(rs);              
                 navigation_root_url context/@@plone_portal_state/navigation_root_url;
                 ">
                <td class="actions" tal:condition="python:not isOverview and not isCollection">
                    <div metal:use-macro="here/@@dp.macros/macros/cb"/> 
                    <div metal:use-macro="here/@@dp.macros/macros/delete"/> 
                </td>
                <td class="title">
                    <div metal:use-macro="here/@@dp.macros/macros/doccontent"/> 
                    <div metal:use-macro="here/@@dp.macros/macros/fileimagelist"/>
                </td>
                <td class="metadata">
                    <div metal:use-macro="here/@@dp.macros/macros/content-metadata"/>
                </td>
    </tal:def> 
</tal:block>